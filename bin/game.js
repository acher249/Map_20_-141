"use strict";const getGlobalThis=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==this)return this;throw new Error("Unable to locate global `this`")},globalObject=getGlobalThis();var loader;!function(T){let S=0,x=[],C=[];const E={baseUrl:""},A={};function d(T,x,C){let E=null,R={},I=null;"function"==typeof T?R=T:"string"==typeof T?(E=T,"function"==typeof x?R=x:x instanceof Array&&(I=x,R=C)):T instanceof Array&&(I=T,"function"==typeof x&&(R=x)),I=I||["require","exports","module"],null===E&&(E="unnamed-module-"+S++),E=g(E),I=(I||[]).map((T=>function(T,S){return T?b(S,T):S}(E,T))),A[E]||(A[E]={name:E,parent:null,dclamd:1,dependencies:I,handlers:[],exports:{},dependants:new Set}),A[E].dependencies=I,p(I,(function(T){const S=A[E];if(!S)throw new Error("Could not access registered module "+E);let x=S.exports;x="function"==typeof R?R.apply(globalObject,T)||x:R,S.exports=x,u(E)}),(T=>{if("function"!=typeof onerror)throw T;onerror(T)}),E)}function u(T){const S=A[T];if(!S)throw new Error("Could not access registered module "+T);S.dclamd=2;let x=S.handlers;if(x&&x.length)for(let S=0;S<x.length;S++)x[S](A[T])}function c(T,S,x){if(!A[T])return null;if(T==S||50==x)return[T];const C=A[T].dependencies;for(let E=0,A=C.length;E<A;E++){let A=c(C[E],S,x+1);if(null!==A)return A.push(T),A}return null}function a(T,S){let x=A[T];if(!x)return!1;let C={};for(let T in A)C[T]=!1;let E=[];for(E.push(x),C[T]=!0;E.length>0;){let T=E.shift().dependencies;if(T)for(let x=0,R=T.length;x<R;x++){let R=T[x];if(R===S)return!0;let I=A[R];I&&!C[R]&&(C[R]=!0,E.push(I))}}return!1}function p(T,S,x,E){let R=new Array(T.length).fill(null),I=0,z=!1;if("string"==typeof T){if(A[T]){if(1===A[T].dclamd)throw new Error(`Trying to load ${T} from ${E}. The first module is still loading.`);return A[T]}throw new Error(T+" has not been defined. Please include it as a dependency in "+E+"'s define()")}const P=T.length;for(let O=0;O<P;O++)switch(T[O]){case"require":let h=function(T,S,x){return p(T,S,x,E)};h.toUrl=function(T){return b(T,E)},R[O]=h,I++;break;case"exports":if(!A[E])throw new Error("Parent module "+E+" not registered yet");R[O]=A[E].exports,I++;break;case"module":R[O]={id:E,uri:b(E)},I++;break;default:{const U=T[O],m=()=>{R[O]=A[U].exports,I++,I===P&&S&&(z=!0,S(R))};if(a(U,E)){const T=c(U,E,0);T&&(T.reverse(),T.push(U),C.push(T)),w(U,(()=>{}),x,E),m()}else w(U,m,x,E);break}}!z&&I===P&&S&&S(R)}function h(T,S){return function(){return dcl.callRpc(T,S.name,x.slice.call(arguments,0))}}function w(T,S,x,C){if(A[T])return A[T].dependants.add(C),void(1===A[T].dclamd?S&&A[T].handlers.push(S):S&&S(A[T]));if(A[T]={name:T,parent:C,dclamd:1,handlers:[S],dependencies:[],dependants:new Set([C]),exports:{}},0===T.indexOf("@")){let S=A[T].exports;if("function"!=typeof dcl.loadModule)throw new Error("Asynchronous modules will not work because loadModule function is not present");dcl.loadModule(T,S).then((x=>{for(let T in x.methods){const C=x.methods[T];S[C.name]=h(x.rpcHandle,C)}u(T)})).catch((T=>{x(T)}))}}function g(T){let S,x=T;for(S=/\/\.\//;S.test(x);)x=x.replace(S,"/");for(x=x.replace(/^\.\//g,""),S=/\/(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//;S.test(x);)x=x.replace(S,"/");return x=x.replace(/^(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//,""),x=x.replace(/^\//g,""),x}function b(T,S){switch(T){case"require":case"exports":case"module":return T}return S?function(T,S){let x=T;if(!x.startsWith("@")&&(x.startsWith("./")||x.startsWith("../"))){const T=S.split("/");T.pop(),x=g(T.join("/")+"/"+x)}return x}(T,S):g(T)}T.config=function(T){if("object"==typeof T)for(let S in T)T.hasOwnProperty(S)&&(E[S]=T[S])},T.define=d,function(T){T.amd={},T.modules=A}(d=T.define||(T.define={})),T.require=p,"undefined"!=typeof dcl&&dcl.onStart((()=>{const T=new Set,S=[];for(let x in A)A[x]&&(1===A[x].dclamd&&S.push(A[x]),A[x].dependencies.forEach((S=>{"require"!=S&&"exports"!=S&&"module"!=S&&(A[S]||T.add(S))})));const x=[];if(C.length&&x.push(`\n> Cyclic dependencies: ${C.map((T=>"\n  - "+T.join(" -> "))).join("")}`),T.size&&x.push(`\n> Undeclared/unknown modules: ${Array.from(T).map((T=>"\n  - "+T)).join("")}`),S.length&&x.push(`\n> These modules didn't load: ${S.map((T=>"\n  - "+T.name)).join("")}.\n`),x.length)throw new Error(x.join("\n"))})),p.toUrl=b}(loader||(loader={})),globalObject.define=loader.define,globalObject.dclamd=loader,function(T){var S=function(){function t(){}return t.AVATAR={getEntityRepresentation:function(T){return T.avatarEntity}},t.FIRST_PERSON_CAMERA={getEntityRepresentation:function(T){return T.firstPersonCameraEntity}},t}(),n=function(T,S){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(T[x]=S[x])})(T,S)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function o(T,S){if("function"!=typeof S&&null!==S)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function o(){this.constructor=T}n(T,S),T.prototype=null===S?Object.create(S):(o.prototype=S.prototype,new o)}var i=function(){return(i=Object.assign||function(T){for(var S,x=1,C=arguments.length;x<C;x++)for(var E in S=arguments[x])Object.prototype.hasOwnProperty.call(S,E)&&(T[E]=S[E]);return T}).apply(this,arguments)};function r(T,S,x,C){var E,A=arguments.length,R=A<3?S:null===C?C=Object.getOwnPropertyDescriptor(S,x):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(T,S,x,C);else for(var I=T.length-1;I>=0;I--)(E=T[I])&&(R=(A<3?E(R):A>3?E(S,x,R):E(S,x))||R);return A>3&&R&&Object.defineProperty(S,x,R),R}function u(T){var S="function"==typeof Symbol&&Symbol.iterator,x=S&&T[S],C=0;if(x)return x.call(T);if(T&&"number"==typeof T.length)return{next:function(){return T&&C>=T.length&&(T=void 0),{value:T&&T[C++],done:!T}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(T,S){var x="function"==typeof Symbol&&T[Symbol.iterator];if(!x)return T;var C,E,A=x.call(T),R=[];try{for(;(void 0===S||S-- >0)&&!(C=A.next()).done;)R.push(C.value)}catch(T){E={error:T}}finally{try{C&&!C.done&&(x=A.return)&&x.call(A)}finally{if(E)throw E.error}}return R}function h(T,S){for(var x=0,C=S.length,E=T.length;x<C;x++,E++)T[E]=S[x];return T}var x=0;function d(){for(var T=[],S=0;S<arguments.length;S++)T[S]=arguments[S];"undefined"!=typeof dcl?dcl.log.apply(dcl,h([],p(T))):console.log.apply(console,h(["DEBUG:"],p(T)))}function l(T,S){"undefined"!=typeof dcl?dcl.error(T,S):console.error("ERROR:",T,S)}function f(T){if(x++,0===T.length)throw new Error("newId(type: string): type cannot be empty");return T+x.toString(36)}function y(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(T){var S=16*Math.random()|0;return("x"===T?S:3&S|8).toString(16)}))}function v(T,S){for(var x=[],C=0;C<T;++C)x.push(S());return x}var C=[];function _(T){if(!("__event_name__"in T)||"string"!=typeof T.__event_name__)throw new Error("The EventConstructor is not registered");return T.__event_name__}var E=function(){function t(){this.listeners={}}return t.prototype.addListener=function(T,S,x){if(!T||"function"!=typeof T)throw new Error("Invalid EventConstructor");var C=_(T),E=this.listeners[C];E||(E=this.listeners[C]=[]);for(var A=0;A<E.length;A++)if(E[A].listener===S)throw new Error("The provided listener is already registered");return E.push({listener:S,fn:x}),this},t.prototype.removeListener=function(T,S){if(!S||"function"!=typeof S)throw new Error("Invalid EventConstructor");var x=_(S),C=this.listeners[x];if(!C)return!1;for(var E=0;E<C.length;E++)if(C[E].listener===T)return C.splice(E,1),!0;return!1},t.prototype.fireEvent=function(T){var S=_(T.constructor),x=this.listeners[S];if(x)for(var C=0;C<x.length;C++)try{var E=x[C];E.fn.call(E.listener,T)}catch(T){l(T)}return this},t}();function w(){var T=f("EV");if(-1!==C.indexOf(T))throw new Error("The event name "+T+" is already taken");return C.push(T),function(S){return S.__event_name__=T,S}}var A,R=r([w()],(function(T,S,x){this.entity=T,this.componentName=S,this.component=x})),I=r([w()],(function(T,S,x){this.entity=T,this.componentName=S,this.classId=x})),z=r([w()],(function(T,S){this.entity=T,this.parent=S}));T.UIValueType=void 0,(A=T.UIValueType||(T.UIValueType={}))[A.PERCENT=0]="PERCENT",A[A.PIXELS=1]="PIXELS";var P=function(){function e(S){if(this.type=T.UIValueType.PIXELS,"string"==typeof S){var x=S;x.indexOf("px")>-1?this.type=T.UIValueType.PIXELS:x.indexOf("%")>-1&&(this.type=T.UIValueType.PERCENT),this.value=parseFloat(x)}else this.value=S}return e.prototype.toString=function(){var S=this.value.toString();return this.type===T.UIValueType.PERCENT?S+="%":S+="px",S},e}(),O="__name__symbol_",U="__classId__symbol_",k="__component__id_",W=r([w()],(function(T,S,x){this.componentId=T,this.componentName=S,this.classId=x})),H=r([w()],(function(T){this.componentId=T})),V=r([w()],(function(T,S){this.componentId=T,this.component=S}));function M(T,S){return function(x){if(x.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+x.originalClassName+" with: "+T);var C=x,i=function(){var x=Array.prototype.slice.call(arguments),E=new(C.bind.apply(C,h([void 0],p(x))));return Object.defineProperty(E,O,{enumerable:!1,writable:!1,configurable:!1,value:T}),void 0!==S&&Object.defineProperty(E,U,{enumerable:!1,writable:!1,configurable:!1,value:S}),E};return void 0!==S&&(i.__classId__symbol_=S),i.__name__symbol_=T,i.isComponent=!0,i.originalClassName=T,(i.prototype=x.prototype).constructor=x,i}}function F(T,S){return function(x){if(x.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+x.originalClassName+" with: "+T);if("number"!=typeof S||isNaN(S))throw new Error("classId: "+S+" is an invalid integer");var C=x,i=function(){if(!F.engine)throw new Error("You need to set a DisposableComponent.engine before creating disposable components");var x=Array.prototype.slice.call(arguments),E=new(C.bind.apply(C,h([void 0],p(x)))),A=f("C");return Object.defineProperty(E,O,{enumerable:!1,writable:!1,configurable:!1,value:T}),Object.defineProperty(E,k,{enumerable:!1,writable:!1,configurable:!1,value:A}),void 0!==S&&Object.defineProperty(E,U,{enumerable:!1,writable:!1,configurable:!1,value:S}),F.engine&&F.engine.registerComponent(E),E};return void 0!==S&&(i.__classId__symbol_=S),i.__name__symbol_=T,i.isComponent=!0,i.isDisposableComponent=!0,i.originalClassName=T,(i.prototype=x.prototype).constructor=x,i}}function L(T){if(!T)throw new TypeError(T+" is not a component.");if(T.__name__symbol_)return T.__name__symbol_;throw new TypeError(T+" is not a registered component.")}function N(T){if(!T)throw new TypeError(T+" is not a component.");if(T.__classId__symbol_)return T.__classId__symbol_;if(!T.__name__symbol_)throw new TypeError(T+" is not a registered component.");return null}function D(T){if(!T)throw new TypeError(T+" is not a component.");if(T.__component__id_)return T.__component__id_;throw new TypeError(T+" is not a registered disposable component.")}!function(T){T.engine=null}(F||(F={}));var G=function(){function t(){this.dirty=!1,this.data={},this.subscriptions=[]}return t.component=function(T,S){if(delete T[S]){var x=S+"_"+Math.random();T[x]=void 0,Object.defineProperty(T,x,i(i({},Object.getOwnPropertyDescriptor(T,x)),{enumerable:!1})),Object.defineProperty(T,S.toString(),{get:function(){return this[x]},set:function(T){var C=this[x];if(this.data[S]=T?D(T):null,this[x]=T,T!==C){this.dirty=!0;for(var E=0;E<this.subscriptions.length;E++)this.subscriptions[E](S,T,C)}},enumerable:!0})}},t.field=function(T,S){delete T[S]&&Object.defineProperty(T,S.toString(),{get:function(){return this.data[S]},set:function(T){var x=this.data[S];if(this.data[S]=T,T!==x){this.dirty=!0;for(var C=0;C<this.subscriptions.length;C++)this.subscriptions[C](S,T,x)}},enumerable:!0})},t.uiValue=function(T,S){delete T[S]&&Object.defineProperty(T,S.toString(),{get:function(){return this.data[S].toString()},set:function(T){var x=this.data[S],C=new P(T);if(this.data[S]=C,C!==x){this.dirty=!0;for(var E=0;E<this.subscriptions.length;E++)this.subscriptions[E](S,C,x)}},enumerable:!0})},t.readonly=function(T,S){delete T[S]&&Object.defineProperty(T,S.toString(),{get:function(){if(S in this.data==0)throw new Error("The field "+S+" is uninitialized");return this.data[S]},set:function(T){if(S in this.data)throw new Error("The field "+S+" is readonly");this.data[S]=T,this.dirty=!0},enumerable:!0,configurable:!1})},t.prototype.onChange=function(T){return this.subscriptions.push(T),this},t.prototype.toJSON=function(){return this.data},t}();function B(T){return k in T}var j=function(){function t(){for(var T=[],S=0;S<arguments.length;S++)T[S]=arguments[S];if(this.entities=[],this.active=!1,this._requiresNames=[],!T)throw new Error("ComponentGroup: Could not load the requires list");if(!(T instanceof Array))throw new Error("ComponentGroup: requires list is not an Array");Object.defineProperty(this,"requires",{get:function(){return T.slice()}}),Object.defineProperty(this,"requiresNames",{get:function(){return this._requiresNames.slice()}});for(var n=function(S){var C=T[S],E=null;if(!C)throw new Error("ComponentGroup: the required component at location "+S+" is invalid");try{E=L(C)}catch(T){throw new Error("ComponentGroup: the required component at location "+S+" is not registered as a @Component. Remember to provide the class of the component, not the name")}if(x._requiresNames.some((function(T){return T===E})))throw new Error("ComponentGroup: the required component list has a repeated name "+E);x._requiresNames.push(E)},x=this,C=0;C<T.length;C++)n(C)}return t.prototype.hasEntity=function(T){return!!T.isAddedToEngine()&&-1!==this.entities.indexOf(T)},t.prototype.addEntity=function(T){if(!T.isAddedToEngine())throw new TypeError("ComponentGroup: Cannot add a entity that is not added to the engine");-1===this.entities.indexOf(T)&&this.entities.push(T)},t.prototype.removeEntity=function(T){var S=this.entities.indexOf(T);-1!==S&&this.entities.splice(S,1)},t.prototype.componentRemoved=function(T,S){-1!==this._requiresNames.indexOf(S)&&this.removeEntity(T)},t.prototype.meetsRequirements=function(T){for(var S=0;S<this._requiresNames.length;S++)if(!(this._requiresNames[S]in T.components))return!1;return!0},t}(),X=function(){function t(T){this.name=T,this.children={},this.eventManager=null,this.alive=!1,this.uuid=f("E"),this.components={},this.engine=null,this._parent=null}return t.prototype.addComponentOrReplace=function(T){if("function"==typeof T)throw new Error("You passed a function or class as a component, an instance of component is expected");if("object"!=typeof T)throw new Error("You passed a "+typeof T+", an instance of component is expected");var S=L(T);if(this.components[S]){if(this.components[S]===T)return T;this.removeComponent(this.components[S],!1)}return this.addComponent(T)},t.prototype.hasComponent=function(T){var S=typeof T;if("string"!==S&&"object"!==S&&"function"!==S)throw new Error("Entity#has(component): component is not a class, name or instance");if(null==T)return!1;var x="string"===S?T:L(T),C=this.components[x];return!!C&&("object"===S?C===T:"function"!==S||C instanceof T)},t.prototype.getComponent=function(T){var S=typeof T;if("string"!==S&&"function"!==S)throw new Error("Entity#get(component): component is not a class or name");var x="string"===S?T:L(T),C=this.components[x];if(!C)throw new Error('Can not get component "'+x+'" from entity "'+this.identifier+'"');if("function"===S){if(C instanceof T)return C;throw new Error('Can not get component "'+x+'" from entity "'+this.identifier+'" (by instance)')}return C},t.prototype.getComponentOrNull=function(T){var S=typeof T;if("string"!==S&&"function"!==S)throw new Error("Entity#getOrNull(component): component is not a class or name");var x="string"===S?T:L(T),C=this.components[x];return C?"function"===S?C instanceof T?C:null:C:null},t.prototype.getComponentOrCreate=function(T){if("function"!=typeof T)throw new Error("Entity#getOrCreate(component): component is not a class");var S=this.getComponentOrNull(T);return S||(L(S=new T),this.addComponentOrReplace(S)),S},t.prototype.addComponent=function(T){if("object"!=typeof T)throw new Error("Entity#add(component): You passed a function or class as a component, an instance of component is expected");var S=L(T),x=N(T);if(this.components[S])throw new Error('A component of type "'+S+'" is already present in entity "'+this.identifier+'"');this.components[S]=T,this.eventManager&&this.eventManager.fireEvent(new I(this,S,x));var C=T;return"function"==typeof C.addedToEntity&&C.addedToEntity(this),T},t.prototype.removeComponent=function(T,S){void 0===S&&(S=!0);var x=typeof T;if("string"!==x&&"function"!==x&&"object"!==x)throw new Error("Entity#remove(component): component is not a class, class or name");var C="string"===x?T:L(T),E=this.components[C];if(E){if("function"===x)return E instanceof T?(delete this.components[C],void(E&&(S&&this.eventManager&&this.eventManager.fireEvent(new R(this,C,E)),"function"==typeof E.removedFromEntity&&E.removedFromEntity(this)))):void d('Entity Warning: Trying to remove wrong (by constructor) component "'+C+'" from entity "'+this.identifier+'"');delete this.components[C],E&&(S&&this.eventManager&&this.eventManager.fireEvent(new R(this,C,E)),"function"==typeof E.removedFromEntity&&E.removedFromEntity(this))}else d('Entity Warning: Trying to remove inexisting component "'+C+'" from entity "'+this.identifier+'"')},t.prototype.isAddedToEngine=function(){return!(!this.engine||!(this.uuid in this.engine.entities)&&this.engine.rootEntity!==this)},t.prototype.setParent=function(T){var S;if(T&&"getEntityRepresentation"in T){if(!this.engine)throw new Error("In order to set an attachable as parent, you first need to add the entity to the engine.");S=T.getEntityRepresentation(this.engine)}else S=!T&&this.engine?this.engine.rootEntity:T;var x=this.getParent();if(S===this)throw new Error('Failed to set parent for entity "'+this.identifier+"\": An entity can't set itself as a its own parent");if(S===x)return this;var C=this.getCircularAncestor(S);if(C)throw new Error('Failed to set parent for entity "'+this.identifier+'": Circular parent references are not allowed (See entity "'+C+'")');return x&&delete x.children[this.uuid],null!==S&&"0"!==S.uuid&&(!S.isAddedToEngine()&&this.isAddedToEngine()&&this.engine.removeEntity(this),S.isAddedToEngine()&&!this.isAddedToEngine()&&S.engine.addEntity(this)),this._parent=S||null,this.registerAsChild(),this.eventManager&&this.engine&&this.eventManager.fireEvent(new z(this,S)),this},t.prototype.getParent=function(){return this._parent},Object.defineProperty(t.prototype,"identifier",{get:function(){return this.name||this.uuid},enumerable:!1,configurable:!0}),t.prototype.getCircularAncestor=function(T){for(var S=this.engine?this.engine.rootEntity:null,x=T;x&&x!==S;){var C=x.getParent();if(C===this)return x.uuid;x=C}return null},t.prototype.registerAsChild=function(){var T=this.getParent();this.uuid&&T&&(T.children[this.uuid]=this)},t}(),Q=function(){function t(T){this.eventManager=new E,this.systems=[],this.entityLists={},this.addedSystems=[],this._entities={},this._disposableComponents={},this._componentGroups={},this.simpleSystems=[],this.eventManager.addListener(I,this,this.componentAddedHandler),this.eventManager.addListener(R,this,this.componentRemovedHandler),this.rootEntity=T,this.firstPersonCameraEntity=new X,this.firstPersonCameraEntity.uuid="FirstPersonCameraEntityReference",this.addEntity(this.firstPersonCameraEntity),this.avatarEntity=new X,this.avatarEntity.uuid="AvatarEntityReference",this.addEntity(this.avatarEntity)}return Object.defineProperty(t.prototype,"entities",{get:function(){return this._entities},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disposableComponents",{get:function(){return this._disposableComponents},enumerable:!1,configurable:!0}),t.prototype.addEntity=function(T){var S=T.getParent();if(T.isAddedToEngine())return T;for(var x in T.eventManager=this.eventManager,T.engine=this,this._entities[T.uuid]=T,this.checkRequirementsAndAdd(T),S?S.isAddedToEngine()||S===this.rootEntity||d("Engine: warning, added an entity with a parent not present in the engine. Parent id: "+S.uuid):T.setParent(this.rootEntity),T.alive=!0,T.children){var C=T.children[x];C&&(C.isAddedToEngine()||this.addEntity(C))}return T},t.prototype.removeEntity=function(T){var S=T.uuid;if(T.isAddedToEngine()){for(var x in T.components){var C=this._componentGroups[x];if(C)for(var E in C)C[E].removeEntity(T);delete this.entityLists[x][S]}for(var A=0;A<this.simpleSystems.length;A++){var R=this.simpleSystems[A];R.onRemoveEntity&&R.onRemoveEntity(T)}for(var A in T.children){var I=T.children[A];I&&this.removeEntity(I)}return T.alive=!1,T.eventManager=null,delete this._entities[S],!0}for(var x in d("Engine: Trying to remove non existent entity from engine."),T.isAddedToEngine()?d("Engine: Entity id: "+S):d('Engine: Entity "'+T.uuid+'" has not been added to any engine yet.'),d("Engine: Entity's components:"),T.components)d(x);return!1},t.prototype.addSystem=function(T,S){if(void 0===S&&(S=0),-1!==this.addedSystems.indexOf(T))return d("Engine: Trying to add a system that is already added. Aborting"),T;if(this.systems.length>0)for(var x=0;x<this.systems.length;x++){var C=this.systems[x],E=x===this.systems.length-1;if(C.priority>S){this.addedSystems.push(T),this.systems.splice(x,0,{system:T,priority:S});break}if(E){this.addedSystems.push(T),this.systems.splice(x+1,0,{system:T,priority:S});break}}else this.addedSystems.push(T),this.systems.splice(1,0,{system:T,priority:S});return this.registerSystem(T),T},t.prototype.removeSystem=function(T){var S=this.addedSystems.indexOf(T);if(-1!==S){T.active=!1,T.deactivate&&T.deactivate(),this.addedSystems.splice(S,1);for(var x=0;x<this.systems.length;x++)this.systems[x].system===T&&this.systems.splice(x,1);return!0}return!1},t.prototype.update=function(T){for(var S in this.systems){var x=this.systems[S].system;if(x.active&&x.update)try{x.update(T)}catch(T){l(T)}}return this},t.prototype.getEntitiesWithComponent=function(T){var S="string"==typeof T?T:L(T);return S in this.entityLists?this.entityLists[S]:this.entityLists[S]={}},t.prototype.registerComponent=function(T){var S=D(T),x=L(T),C=N(T);this._disposableComponents[S]=T,null!==C&&(this.eventManager.fireEvent(new W(S,x,C)),this.eventManager.fireEvent(new V(S,T)))},t.prototype.disposeComponent=function(T){var S=D(T);return delete this._disposableComponents[S]&&(this.eventManager.fireEvent(new H(S)),T.onDispose&&T.onDispose(),!0)},t.prototype.updateComponent=function(T){this.eventManager.fireEvent(new V(D(T),T))},t.prototype.getComponentGroup=function(){for(var T=[],S=0;S<arguments.length;S++)T[S]=arguments[S];var x=void 0;if(T.length>0&&(z=this._componentGroups[L(T[0])]))for(var C=T.slice(),E=0;E<z.length;E++){var A=z[E];if(C.length===A.requires.length){for(var R=0;R<C.length&&-1!==A.requires.indexOf(C[R]);R++)R===C.length-1&&(x=A);if(x)break}}if(x)return x;(x=new(j.bind.apply(j,h([void 0],p(T))))).active=!0;var I=x.requiresNames;for(E=0;E<I.length;E++){var z,P=I[E];(z=this._componentGroups[P])||(this._componentGroups[P]=z=[]),-1===z.indexOf(x)&&z.push(x)}for(var O in this._entities)this.checkRequirements(this._entities[O],x);return x},t.prototype.removeComponentGroup=function(T){if(T.active){T.active=!1;for(var S=T.requiresNames,x=0;x<S.length;x++){var C=S[x],E=this._componentGroups[C];if(E){var A=E.indexOf(T);-1!==A&&E.splice(A,1)}}return!0}return!1},t.prototype.registerSystem=function(T){T.active=!0,T.activate&&T.activate(this),this.simpleSystems.push(T)},t.prototype.checkRequirementsAndAdd=function(T){if(T.isAddedToEngine()){for(var S in T.components){S in this.entityLists||(this.entityLists[S]={}),this.entityLists[S][T.uuid]=T;var x=this._componentGroups[S];if(x)for(var C in x)this.checkRequirements(T,x[C])}for(var E=0;E<this.simpleSystems.length;E++){var A=this.simpleSystems[E];A.onAddEntity&&A.onAddEntity(T)}}},t.prototype.checkRequirements=function(T,S){S.meetsRequirements(T)?S.hasEntity(T)||S.addEntity(T):S.hasEntity(T)&&S.removeEntity(T)},t.prototype.componentAddedHandler=function(T){var S,x=T.entity,C=T.componentName;if(x.isAddedToEngine()){this.entityLists[C]?this.entityLists[C][x.uuid]=x:this.entityLists[C]=((S={})[x.uuid]=x,S);var E=this._componentGroups[C];if(E)for(var A in E)this.checkRequirements(x,E[A])}},t.prototype.componentRemovedHandler=function(T){var S=T.entity,x=T.componentName;if(S.isAddedToEngine()){delete this.entityLists[x][S.uuid];var C=this._componentGroups[x];if(C)for(var E in C)this.checkRequirements(S,C[E])}},t}(),Z=Promise.resolve().then.bind(Promise.resolve());function q(T){var S=Z(T);return S.isComplete=!1,S.then((function(T){S.isComplete=!0,S.result=T,S.didFail=!1})).catch((function(T){S.isComplete=!0,S.error=T,S.didFail=!0,l("executeTask: FAILED "+T.toString(),T)})),S}var K,J,$=function(){function t(T,S,x,C){void 0===S&&(S=!1),this.initalize(T,S,x,C)}return t.prototype.initalize=function(T,S,x,C){return void 0===S&&(S=!1),this.mask=T,this.skipNextObservers=S,this.target=x,this.currentTarget=C,this},t}(),Y=function(T,S,x){void 0===x&&(x=null),this.callback=T,this.mask=S,this.scope=x,this.unregisterOnNextCall=!1,this._willBeUnregistered=!1},et=function(){function t(){this._observers=null,this._observables=null}return t.Watch=function(T,S,x,C){var E,A;void 0===x&&(x=-1),void 0===C&&(C=null);var R=new t;R._observers=new Array,R._observables=T;try{for(var I=u(T),z=I.next();!z.done;z=I.next()){var P=z.value.add(S,x,!1,C);P&&R._observers.push(P)}}catch(T){E={error:T}}finally{try{z&&!z.done&&(A=I.return)&&A.call(I)}finally{if(E)throw E.error}}return R},t.prototype.dispose=function(){if(this._observers&&this._observables)for(var T=0;T<this._observers.length;T++)this._observables[T].remove(this._observers[T]);this._observers=null,this._observables=null},t}(),nt=function(){function t(T){this._observers=new Array,this._onObserverAdded=null,this._eventState=new $(0),T&&(this._onObserverAdded=T)}return t.prototype.add=function(T,S,x,C,E){if(void 0===S&&(S=-1),void 0===x&&(x=!1),void 0===C&&(C=null),void 0===E&&(E=!1),!T)return null;var A=new Y(T,S,C);return A.unregisterOnNextCall=E,x?this._observers.unshift(A):this._observers.push(A),this._onObserverAdded&&this._onObserverAdded(A),A},t.prototype.addOnce=function(T){return this.add(T,void 0,void 0,void 0,!0)},t.prototype.remove=function(T){return!!T&&-1!==this._observers.indexOf(T)&&(this._deferUnregister(T),!0)},t.prototype.removeCallback=function(T,S){for(var x=0;x<this._observers.length;x++)if(this._observers[x].callback===T&&(!S||S===this._observers[x].scope))return this._deferUnregister(this._observers[x]),!0;return!1},t.prototype.notifyObservers=function(T,S,x,C){var E,A;if(void 0===S&&(S=-1),!this._observers.length)return!0;var R=this._eventState;R.mask=S,R.target=x,R.currentTarget=C,R.skipNextObservers=!1,R.lastReturnValue=T;try{for(var I=u(this._observers),z=I.next();!z.done;z=I.next()){var P=z.value;if(!P._willBeUnregistered&&(P.mask&S&&(P.scope?R.lastReturnValue=P.callback.apply(P.scope,[T,R]):R.lastReturnValue=P.callback(T,R),P.unregisterOnNextCall&&this._deferUnregister(P)),R.skipNextObservers))return!1}}catch(T){E={error:T}}finally{try{z&&!z.done&&(A=I.return)&&A.call(I)}finally{if(E)throw E.error}}return!0},t.prototype.notifyObserversWithPromise=function(T,S,x,C){var E=this;void 0===S&&(S=-1);var A=Promise.resolve(T);if(!this._observers.length)return A;var R=this._eventState;return R.mask=S,R.target=x,R.currentTarget=C,R.skipNextObservers=!1,this._observers.forEach((function(x){R.skipNextObservers||x._willBeUnregistered||x.mask&S&&(A=x.scope?A.then((function(S){return R.lastReturnValue=S,x.callback.apply(x.scope,[T,R])})):A.then((function(S){return R.lastReturnValue=S,x.callback(T,R)})),x.unregisterOnNextCall&&E._deferUnregister(x))})),A.then((function(){return T}))},t.prototype.notifyObserver=function(T,S,x){void 0===x&&(x=-1);var C=this._eventState;C.mask=x,C.skipNextObservers=!1,T.callback(S,C)},t.prototype.hasObservers=function(){return this._observers.length>0},t.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},t.prototype.clone=function(){var T=new t;return T._observers=this._observers.slice(0),T},t.prototype.hasSpecificMask=function(T){var S,x;void 0===T&&(T=-1);try{for(var C=u(this._observers),E=C.next();!E.done;E=C.next()){var A=E.value;if(A.mask&T||A.mask===T)return!0}}catch(T){S={error:T}}finally{try{E&&!E.done&&(x=C.return)&&x.call(C)}finally{if(S)throw S.error}}return!1},t.prototype._deferUnregister=function(T){var S=this;T.unregisterOnNextCall=!1,T._willBeUnregistered=!0,q((function(){return function(T,S,x,C){return new(x||(x=Promise))((function(S,E){function s(T){try{u(C.next(T))}catch(T){E(T)}}function a(T){try{u(C.throw(T))}catch(T){E(T)}}function u(T){var C;T.done?S(T.value):(C=T.value,C instanceof x?C:new x((function(T){T(C)}))).then(s,a)}u((C=C.apply(T,[])).next())}))}(S,0,void 0,(function(){return function(T,S){var x,C,E,A,R={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return A={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A;function a(A){return function(I){return function(A){if(x)throw new TypeError("Generator is already executing.");for(;R;)try{if(x=1,C&&(E=2&A[0]?C.return:A[0]?C.throw||((E=C.return)&&E.call(C),0):C.next)&&!(E=E.call(C,A[1])).done)return E;switch(C=0,E&&(A=[2&A[0],E.value]),A[0]){case 0:case 1:E=A;break;case 4:return R.label++,{value:A[1],done:!1};case 5:R.label++,C=A[1],A=[0];continue;case 7:A=R.ops.pop(),R.trys.pop();continue;default:if(!((E=(E=R.trys).length>0&&E[E.length-1])||6!==A[0]&&2!==A[0])){R=0;continue}if(3===A[0]&&(!E||A[1]>E[0]&&A[1]<E[3])){R.label=A[1];break}if(6===A[0]&&R.label<E[1]){R.label=E[1],E=A;break}if(E&&R.label<E[2]){R.label=E[2],R.ops.push(A);break}E[2]&&R.ops.pop(),R.trys.pop();continue}A=S.call(T,R)}catch(T){A=[6,T],C=0}finally{x=E=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([A,I])}}}(this,(function(S){return[2,this._remove(T)]}))}))}))},t.prototype._remove=function(T){if(!T)return!1;var S=this._observers.indexOf(T);return-1!==S&&(this._observers.splice(S,1),!0)},t}(),ot=r([w()],(function(T,S){this.uuid=T,this.payload=S})),rt=r([w()],(function(T){this.payload=T})),it=r([w()],(function(T){this.payload=T}));function tt(T){return function(){J&&J.subscribe(T)}}var st=new nt(tt("cameraModeChanged")),at=new nt(tt("idleStateChanged")),ut=new nt(tt("onEnterScene")),pt=ut,lt=new nt(tt("onLeaveScene")),ht=lt,dt=new nt(tt("sceneStart")),ft=new nt(tt("playerExpression")),yt=new nt(tt("videoEvent")),mt=new nt(tt("profileChanged"));function ct(T){(J=T)&&J.onEvent((function(T){switch(T.type){case"onEnterScene":return void ut.notifyObservers(T.data);case"onLeaveScene":return void lt.notifyObservers(T.data);case"cameraModeChanged":return void st.notifyObservers(T.data);case"idleStateChanged":return void at.notifyObservers(T.data);case"sceneStart":return void dt.notifyObservers(T.data);case"playerExpression":return void ft.notifyObservers(T.data);case"videoEvent":var S=T.data,x=F.engine.disposableComponents[S.componentId];return x&&x.update(S),void yt.notifyObservers(S);case"profileChanged":return void mt.notifyObservers(T.data)}}))}var gt,vt,_t=function(){function t(T){this.dcl=T,this.cachedComponents={}}return t.prototype.activate=function(T){var S=this;this.engine=T,T.eventManager.addListener(I,this,this.componentAdded),T.eventManager.addListener(R,this,this.componentRemoved),T.eventManager.addListener(W,this,this.disposableComponentCreated),T.eventManager.addListener(H,this,this.disposableComponentRemoved),T.eventManager.addListener(V,this,this.disposableComponentUpdated),T.eventManager.addListener(z,this,this.parentChanged);var x=T.rootEntity.uuid;this.dcl.addEntity(x),this.dcl.onUpdate((function(x){T.update(x),S.presentEntities()})),this.dcl.onEvent((function(S){var x=S.data;switch(S.type){case"uuidEvent":T.eventManager.fireEvent(new ot(x.uuid,x.payload));break;case"raycastResponse":("HitFirst"===x.queryType||"HitAll"===x.queryType)&&T.eventManager.fireEvent(new rt(x));break;case"pointerEvent":T.eventManager.fireEvent(new it(x.payload))}}))},t.prototype.onAddEntity=function(T){if(T&&T.isAddedToEngine()){var S=T.uuid,x=T.getParent();for(var C in this.dcl.addEntity(S),x&&this.dcl.setParent(S,x.uuid),this.cachedComponents[S]={},T.components){var E=T.components[C],A=N(E);if(null!==A)if(B(E))this.dcl.attachEntityComponent(T.uuid,C,D(E));else{var R=JSON.stringify(E);this.dcl.updateEntityComponent(S,C,A,R),this.cachedComponents[S][C]=R}}}},t.prototype.onRemoveEntity=function(T){if(T.isAddedToEngine()){var S=T.uuid;this.dcl.removeEntity(S),delete this.cachedComponents[S]}},t.prototype.presentEntities=function(){for(var T in this.engine.entities){var S=this.engine.entities[T];for(var x in S.components){var C=N(R=S.components[x]);if(null!==C&&!B(R)){var E=this.getJsonIfDirty(S.uuid,x,R);E&&(this.dcl.updateEntityComponent(S.uuid,x,C,E),this.clearDirty(S.uuid,x,R,E))}}}for(var A in this.engine.disposableComponents){var R;(R=this.engine.disposableComponents[A])instanceof G&&R.dirty&&(this.dcl.componentUpdated(A,JSON.stringify(R)),R.dirty=!1)}},t.prototype.componentAdded=function(T){if(T.entity.isAddedToEngine()){var S=T.entity.components[T.componentName];if(B(S))this.dcl.attachEntityComponent(T.entity.uuid,T.componentName,D(S));else if(null!==T.classId){var x=JSON.stringify(S);this.dcl.updateEntityComponent(T.entity.uuid,T.componentName,T.classId,x),this.cachedComponents[T.entity.uuid][T.componentName]=x}}},t.prototype.componentRemoved=function(T){T.entity.isAddedToEngine()&&(this.dcl.removeEntityComponent(T.entity.uuid,T.componentName),delete this.cachedComponents[T.entity.uuid][T.componentName])},t.prototype.disposableComponentCreated=function(T){this.dcl.componentCreated(T.componentId,T.componentName,T.classId)},t.prototype.disposableComponentRemoved=function(T){this.dcl.componentDisposed(T.componentId)},t.prototype.disposableComponentUpdated=function(T){this.dcl.componentUpdated(T.componentId,JSON.stringify(T.component))},t.prototype.parentChanged=function(T){this.dcl.setParent(T.entity.uuid,T.parent?T.parent.uuid:"0")},t.prototype.getJsonIfDirty=function(T,S,x){var C=JSON.stringify(x);return C!==this.cachedComponents[T][S]&&C},t.prototype.clearDirty=function(T,S,x,C){this.cachedComponents[T][S]=C},t}();T.Orientation=void 0,(gt=T.Orientation||(T.Orientation={}))[gt.CW=0]="CW",gt[gt.CCW=1]="CCW",T.Space=void 0,(vt=T.Space||(T.Space={}))[vt.LOCAL=0]="LOCAL",vt[vt.WORLD=1]="WORLD",vt[vt.BONE=2]="BONE";var Tt,St,wt,xt,bt=1/2.2,Ct=2.2,Et=1e-6,At=Math.PI/180,Rt=360/(2*Math.PI),It=function(){function t(){}return t.WithinEpsilon=function(T,S,x){void 0===x&&(x=1401298e-51);var C=T-S;return-x<=C&&C<=x},t.ToHex=function(T){var S=T.toString(16);return T<=15?("0"+S).toUpperCase():S.toUpperCase()},t.Sign=function(T){var S=+T;return 0===S||isNaN(S)?S:S>0?1:-1},t.Clamp=function(T,S,x){return void 0===S&&(S=0),void 0===x&&(x=1),Math.min(x,Math.max(S,T))},t.Log2=function(T){return Math.log(T)*Math.LOG2E},t.Repeat=function(T,S){return T-Math.floor(T/S)*S},t.Normalize=function(T,S,x){return(T-S)/(x-S)},t.Denormalize=function(T,S,x){return T*(x-S)+S},t.DeltaAngle=function(T,S){var x=t.Repeat(S-T,360);return x>180&&(x-=360),x},t.PingPong=function(T,S){var x=t.Repeat(T,2*S);return S-Math.abs(x-S)},t.SmoothStep=function(T,S,x){var C=t.Clamp(x);return S*(C=-2*C*C*C+3*C*C)+T*(1-C)},t.MoveTowards=function(T,S,x){return Math.abs(S-T)<=x?S:T+t.Sign(S-T)*x},t.MoveTowardsAngle=function(T,S,x){var C=t.DeltaAngle(T,S);return-x<C&&C<x?S:t.MoveTowards(T,T+C,x)},t.Lerp=function(T,S,x){return T+(S-T)*x},t.LerpAngle=function(T,S,x){var C=t.Repeat(S-T,360);return C>180&&(C-=360),T+C*t.Clamp(x)},t.InverseLerp=function(T,S,x){return T!==S?t.Clamp((x-T)/(S-T)):0},t.Hermite=function(T,S,x,C,E){var A=E*E,R=E*A;return T*(2*R-3*A+1)+x*(-2*R+3*A)+S*(R-2*A+E)+C*(R-A)},t.RandomRange=function(T,S){return T===S?T:Math.random()*(S-T)+T},t.RangeToPercent=function(T,S,x){return(T-S)/(x-S)},t.PercentToRange=function(T,S,x){return(x-S)*T+S},t.NormalizeRadians=function(T){return T-t.TwoPi*Math.floor((T+Math.PI)/t.TwoPi)},t.TwoPi=2*Math.PI,t}(),Pt=function(){function t(T,S,x,C){this.x=T,this.y=S,this.z=x,this.w=C}return t.Add=function(T,S){return new t(T.x,T.y,T.z,T.w).addInPlace(S)},t.FromArray=function(T,S){return void 0===S&&(S=0),new t(T[S],T[S+1],T[S+2],T[S+3])},t.FromArrayToRef=function(T,S,x){x.x=T[S],x.y=T[S+1],x.z=T[S+2],x.w=T[S+3]},t.FromFloatArrayToRef=function(T,S,x){t.FromArrayToRef(T,S,x)},t.FromFloatsToRef=function(T,S,x,C,E){E.x=T,E.y=S,E.z=x,E.w=C},t.Zero=function(){return new t(0,0,0,0)},t.One=function(){return new t(1,1,1,1)},t.Normalize=function(T){var S=t.Zero();return t.NormalizeToRef(T,S),S},t.NormalizeToRef=function(T,S){S.copyFrom(T),S.normalize()},t.Minimize=function(T,S){var x=new t(T.x,T.y,T.z,T.w);return x.minimizeInPlace(S),x},t.Maximize=function(T,S){var x=new t(T.x,T.y,T.z,T.w);return x.maximizeInPlace(S),x},t.Distance=function(T,S){return Math.sqrt(t.DistanceSquared(T,S))},t.DistanceSquared=function(T,S){var x=T.x-S.x,C=T.y-S.y,E=T.z-S.z,A=T.w-S.w;return x*x+C*C+E*E+A*A},t.Center=function(T,S){var x=t.Add(T,S);return x.scaleInPlace(.5),x},t.TransformNormal=function(T,S){var x=t.Zero();return t.TransformNormalToRef(T,S,x),x},t.TransformNormalToRef=function(T,S,x){var C=S.m,E=T.x*C[0]+T.y*C[4]+T.z*C[8],A=T.x*C[1]+T.y*C[5]+T.z*C[9],R=T.x*C[2]+T.y*C[6]+T.z*C[10];x.x=E,x.y=A,x.z=R,x.w=T.w},t.TransformNormalFromFloatsToRef=function(T,S,x,C,E,A){var R=E.m;A.x=T*R[0]+S*R[4]+x*R[8],A.y=T*R[1]+S*R[5]+x*R[9],A.z=T*R[2]+S*R[6]+x*R[10],A.w=C},t.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"},t.prototype.getClassName=function(){return"Vector4"},t.prototype.getHashCode=function(){var T=this.x||0;return 397*(T=397*(T=397*T^(this.y||0))^(this.z||0))^(this.w||0)},t.prototype.asArray=function(){var T=new Array;return this.toArray(T,0),T},t.prototype.toArray=function(T,S){return void 0===S&&(S=0),T[S]=this.x,T[S+1]=this.y,T[S+2]=this.z,T[S+3]=this.w,this},t.prototype.addInPlace=function(T){return this.x+=T.x,this.y+=T.y,this.z+=T.z,this.w+=T.w,this},t.prototype.add=function(T){return new t(this.x+T.x,this.y+T.y,this.z+T.z,this.w+T.w)},t.prototype.addToRef=function(T,S){return S.x=this.x+T.x,S.y=this.y+T.y,S.z=this.z+T.z,S.w=this.w+T.w,this},t.prototype.subtractInPlace=function(T){return this.x-=T.x,this.y-=T.y,this.z-=T.z,this.w-=T.w,this},t.prototype.subtract=function(T){return new t(this.x-T.x,this.y-T.y,this.z-T.z,this.w-T.w)},t.prototype.subtractToRef=function(T,S){return S.x=this.x-T.x,S.y=this.y-T.y,S.z=this.z-T.z,S.w=this.w-T.w,this},t.prototype.subtractFromFloats=function(T,S,x,C){return new t(this.x-T,this.y-S,this.z-x,this.w-C)},t.prototype.subtractFromFloatsToRef=function(T,S,x,C,E){return E.x=this.x-T,E.y=this.y-S,E.z=this.z-x,E.w=this.w-C,this},t.prototype.negate=function(){return new t(-this.x,-this.y,-this.z,-this.w)},t.prototype.scaleInPlace=function(T){return this.x*=T,this.y*=T,this.z*=T,this.w*=T,this},t.prototype.scale=function(T){return new t(this.x*T,this.y*T,this.z*T,this.w*T)},t.prototype.scaleToRef=function(T,S){return S.x=this.x*T,S.y=this.y*T,S.z=this.z*T,S.w=this.w*T,this},t.prototype.scaleAndAddToRef=function(T,S){return S.x+=this.x*T,S.y+=this.y*T,S.z+=this.z*T,S.w+=this.w*T,this},t.prototype.equals=function(T){return T&&this.x===T.x&&this.y===T.y&&this.z===T.z&&this.w===T.w},t.prototype.equalsWithEpsilon=function(T,S){return void 0===S&&(S=Et),T&&It.WithinEpsilon(this.x,T.x,S)&&It.WithinEpsilon(this.y,T.y,S)&&It.WithinEpsilon(this.z,T.z,S)&&It.WithinEpsilon(this.w,T.w,S)},t.prototype.equalsToFloats=function(T,S,x,C){return this.x===T&&this.y===S&&this.z===x&&this.w===C},t.prototype.multiplyInPlace=function(T){return this.x*=T.x,this.y*=T.y,this.z*=T.z,this.w*=T.w,this},t.prototype.multiply=function(T){return new t(this.x*T.x,this.y*T.y,this.z*T.z,this.w*T.w)},t.prototype.multiplyToRef=function(T,S){return S.x=this.x*T.x,S.y=this.y*T.y,S.z=this.z*T.z,S.w=this.w*T.w,this},t.prototype.multiplyByFloats=function(T,S,x,C){return new t(this.x*T,this.y*S,this.z*x,this.w*C)},t.prototype.divide=function(T){return new t(this.x/T.x,this.y/T.y,this.z/T.z,this.w/T.w)},t.prototype.divideToRef=function(T,S){return S.x=this.x/T.x,S.y=this.y/T.y,S.z=this.z/T.z,S.w=this.w/T.w,this},t.prototype.divideInPlace=function(T){return this.divideToRef(T,this)},t.prototype.minimizeInPlace=function(T){return T.x<this.x&&(this.x=T.x),T.y<this.y&&(this.y=T.y),T.z<this.z&&(this.z=T.z),T.w<this.w&&(this.w=T.w),this},t.prototype.maximizeInPlace=function(T){return T.x>this.x&&(this.x=T.x),T.y>this.y&&(this.y=T.y),T.z>this.z&&(this.z=T.z),T.w>this.w&&(this.w=T.w),this},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},t.prototype.normalize=function(){var T=this.length();return 0===T?this:this.scaleInPlace(1/T)},t.prototype.toVector3=function(){return new Mt(this.x,this.y,this.z)},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copyFrom=function(T){return this.x=T.x,this.y=T.y,this.z=T.z,this.w=T.w,this},t.prototype.copyFromFloats=function(T,S,x,C){return this.x=T,this.y=S,this.z=x,this.w=C,this},t.prototype.set=function(T,S,x,C){return this.copyFromFloats(T,S,x,C)},t.prototype.setAll=function(T){return this.x=this.y=this.z=this.w=T,this},t}(),Ot=function(){function t(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this._m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._updateIdentityStatus(!1)}return Object.defineProperty(t.prototype,"m",{get:function(){return this._m},enumerable:!1,configurable:!0}),Object.defineProperty(t,"IdentityReadOnly",{get:function(){return t._identityReadOnly},enumerable:!1,configurable:!0}),t.FromArray=function(T,S){void 0===S&&(S=0);var x=new t;return t.FromArrayToRef(T,S,x),x},t.FromArrayToRef=function(T,S,x){for(var C=0;C<16;C++)x._m[C]=T[C+S];x._markAsUpdated()},t.FromFloatArrayToRefScaled=function(T,S,x,C){for(var E=0;E<16;E++)C._m[E]=T[E+S]*x;C._markAsUpdated()},t.FromValuesToRef=function(T,S,x,C,E,A,R,I,z,P,O,U,k,W,H,V,G){var j=G._m;j[0]=T,j[1]=S,j[2]=x,j[3]=C,j[4]=E,j[5]=A,j[6]=R,j[7]=I,j[8]=z,j[9]=P,j[10]=O,j[11]=U,j[12]=k,j[13]=W,j[14]=H,j[15]=V,G._markAsUpdated()},t.FromValues=function(T,S,x,C,E,A,R,I,z,P,O,U,k,W,H,V){var G=new t,j=G._m;return j[0]=T,j[1]=S,j[2]=x,j[3]=C,j[4]=E,j[5]=A,j[6]=R,j[7]=I,j[8]=z,j[9]=P,j[10]=O,j[11]=U,j[12]=k,j[13]=W,j[14]=H,j[15]=V,G._markAsUpdated(),G},t.Compose=function(T,S,x){var C=new t;return t.ComposeToRef(T,S,x,C),C},t.ComposeToRef=function(T,S,x,C){t.ScalingToRef(T.x,T.y,T.z,Nt.Matrix[1]),S.toRotationMatrix(Nt.Matrix[0]),Nt.Matrix[1].multiplyToRef(Nt.Matrix[0],C),C.setTranslation(x)},t.Identity=function(){var T=t.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return T._updateIdentityStatus(!0),T},t.IdentityToRef=function(T){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,T),T._updateIdentityStatus(!0)},t.Zero=function(){var T=t.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return T._updateIdentityStatus(!1),T},t.RotationX=function(T){var S=new t;return t.RotationXToRef(T,S),S},t.Invert=function(T){var S=new t;return T.invertToRef(S),S},t.RotationXToRef=function(T,S){var x=Math.sin(T),C=Math.cos(T);t.FromValuesToRef(1,0,0,0,0,C,x,0,0,-x,C,0,0,0,0,1,S),S._updateIdentityStatus(1===C&&0===x)},t.RotationY=function(T){var S=new t;return t.RotationYToRef(T,S),S},t.RotationYToRef=function(T,S){var x=Math.sin(T),C=Math.cos(T);t.FromValuesToRef(C,0,-x,0,0,1,0,0,x,0,C,0,0,0,0,1,S),S._updateIdentityStatus(1===C&&0===x)},t.RotationZ=function(T){var S=new t;return t.RotationZToRef(T,S),S},t.RotationZToRef=function(T,S){var x=Math.sin(T),C=Math.cos(T);t.FromValuesToRef(C,x,0,0,-x,C,0,0,0,0,1,0,0,0,0,1,S),S._updateIdentityStatus(1===C&&0===x)},t.RotationAxis=function(T,S){var x=new t;return t.RotationAxisToRef(T,S,x),x},t.RotationAxisToRef=function(T,S,x){var C=Math.sin(-S),E=Math.cos(-S),A=1-E;T.normalize();var R=x._m;R[0]=T.x*T.x*A+E,R[1]=T.x*T.y*A-T.z*C,R[2]=T.x*T.z*A+T.y*C,R[3]=0,R[4]=T.y*T.x*A+T.z*C,R[5]=T.y*T.y*A+E,R[6]=T.y*T.z*A-T.x*C,R[7]=0,R[8]=T.z*T.x*A-T.y*C,R[9]=T.z*T.y*A+T.x*C,R[10]=T.z*T.z*A+E,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,x._markAsUpdated()},t.RotationYawPitchRoll=function(T,S,x){var C=new t;return t.RotationYawPitchRollToRef(T,S,x,C),C},t.RotationYawPitchRollToRef=function(T,S,x,C){Ft.RotationYawPitchRollToRef(T,S,x,Nt.Quaternion[0]),Nt.Quaternion[0].toRotationMatrix(C)},t.Scaling=function(T,S,x){var C=new t;return t.ScalingToRef(T,S,x,C),C},t.ScalingToRef=function(T,S,x,C){t.FromValuesToRef(T,0,0,0,0,S,0,0,0,0,x,0,0,0,0,1,C),C._updateIdentityStatus(1===T&&1===S&&1===x)},t.Translation=function(T,S,x){var C=new t;return t.TranslationToRef(T,S,x,C),C},t.TranslationToRef=function(T,S,x,C){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,T,S,x,1,C),C._updateIdentityStatus(0===T&&0===S&&0===x)},t.Lerp=function(T,S,x){var C=new t;return t.LerpToRef(T,S,x,C),C},t.LerpToRef=function(T,S,x,C){for(var E=0;E<16;E++)C._m[E]=T._m[E]*(1-x)+S._m[E]*x;C._markAsUpdated()},t.DecomposeLerp=function(T,S,x){var C=new t;return t.DecomposeLerpToRef(T,S,x,C),C},t.DecomposeLerpToRef=function(T,S,x,C){var E=Nt.Vector3[0],A=Nt.Quaternion[0],R=Nt.Vector3[1];T.decompose(E,A,R);var I=Nt.Vector3[2],z=Nt.Quaternion[1],P=Nt.Vector3[3];S.decompose(I,z,P);var O=Nt.Vector3[4];Mt.LerpToRef(E,I,x,O);var U=Nt.Quaternion[2];Ft.SlerpToRef(A,z,x,U);var k=Nt.Vector3[5];Mt.LerpToRef(R,P,x,k),t.ComposeToRef(O,U,k,C)},t.LookAtLH=function(T,S,x){var C=new t;return t.LookAtLHToRef(T,S,x,C),C},t.LookAtLHToRef=function(T,S,x,C){var E=Nt.Vector3[0],A=Nt.Vector3[1],R=Nt.Vector3[2];S.subtractToRef(T,R),R.normalize(),Mt.CrossToRef(x,R,E);var I=E.lengthSquared();0===I?E.x=1:E.normalizeFromLength(Math.sqrt(I)),Mt.CrossToRef(R,E,A),A.normalize();var z=-Mt.Dot(E,T),P=-Mt.Dot(A,T),O=-Mt.Dot(R,T);t.FromValuesToRef(E.x,A.x,R.x,0,E.y,A.y,R.y,0,E.z,A.z,R.z,0,z,P,O,1,C)},t.LookAtRH=function(T,S,x){var C=new t;return t.LookAtRHToRef(T,S,x,C),C},t.LookAtRHToRef=function(T,S,x,C){var E=Nt.Vector3[0],A=Nt.Vector3[1],R=Nt.Vector3[2];T.subtractToRef(S,R),R.normalize(),Mt.CrossToRef(x,R,E);var I=E.lengthSquared();0===I?E.x=1:E.normalizeFromLength(Math.sqrt(I)),Mt.CrossToRef(R,E,A),A.normalize();var z=-Mt.Dot(E,T),P=-Mt.Dot(A,T),O=-Mt.Dot(R,T);t.FromValuesToRef(E.x,A.x,R.x,0,E.y,A.y,R.y,0,E.z,A.z,R.z,0,z,P,O,1,C)},t.OrthoLH=function(T,S,x,C){var E=new t;return t.OrthoLHToRef(T,S,x,C,E),E},t.OrthoLHToRef=function(T,S,x,C,E){var A=2/T,R=2/S,I=2/(C-x),z=-(C+x)/(C-x);t.FromValuesToRef(A,0,0,0,0,R,0,0,0,0,I,0,0,0,z,1,E),E._updateIdentityStatus(1===A&&1===R&&1===I&&0===z)},t.OrthoOffCenterLH=function(T,S,x,C,E,A){var R=new t;return t.OrthoOffCenterLHToRef(T,S,x,C,E,A,R),R},t.OrthoOffCenterLHToRef=function(T,S,x,C,E,A,R){var I=2/(S-T),z=2/(C-x),P=2/(A-E),O=-(A+E)/(A-E),U=(T+S)/(T-S),k=(C+x)/(x-C);t.FromValuesToRef(I,0,0,0,0,z,0,0,0,0,P,0,U,k,O,1,R),R._markAsUpdated()},t.OrthoOffCenterRH=function(T,S,x,C,E,A){var R=new t;return t.OrthoOffCenterRHToRef(T,S,x,C,E,A,R),R},t.OrthoOffCenterRHToRef=function(T,S,x,C,E,A,R){t.OrthoOffCenterLHToRef(T,S,x,C,E,A,R),R._m[10]*=-1},t.PerspectiveLH=function(T,S,x,C){var E=new t,A=2*x/T,R=2*x/S,I=(C+x)/(C-x),z=-2*C*x/(C-x);return t.FromValuesToRef(A,0,0,0,0,R,0,0,0,0,I,1,0,0,z,0,E),E._updateIdentityStatus(!1),E},t.PerspectiveFovLH=function(T,S,x,C){var E=new t;return t.PerspectiveFovLHToRef(T,S,x,C,E),E},t.PerspectiveFovLHToRef=function(T,S,x,C,E,A){void 0===A&&(A=!0);var R=x,I=C,z=1/Math.tan(.5*T),P=A?z/S:z,O=A?z:z*S,U=(I+R)/(I-R),k=-2*I*R/(I-R);t.FromValuesToRef(P,0,0,0,0,O,0,0,0,0,U,1,0,0,k,0,E),E._updateIdentityStatus(!1)},t.PerspectiveFovRH=function(T,S,x,C){var E=new t;return t.PerspectiveFovRHToRef(T,S,x,C,E),E},t.PerspectiveFovRHToRef=function(T,S,x,C,E,A){void 0===A&&(A=!0);var R=x,I=C,z=1/Math.tan(.5*T),P=A?z/S:z,O=A?z:z*S,U=-(I+R)/(I-R),k=-2*I*R/(I-R);t.FromValuesToRef(P,0,0,0,0,O,0,0,0,0,U,-1,0,0,k,0,E),E._updateIdentityStatus(!1)},t.PerspectiveFovWebVRToRef=function(T,S,x,C,E){void 0===E&&(E=!1);var A=E?-1:1,R=Math.tan(T.upDegrees*Math.PI/180),I=Math.tan(T.downDegrees*Math.PI/180),z=Math.tan(T.leftDegrees*Math.PI/180),P=Math.tan(T.rightDegrees*Math.PI/180),O=2/(z+P),U=2/(R+I),k=C._m;k[0]=O,k[1]=k[2]=k[3]=k[4]=0,k[5]=U,k[6]=k[7]=0,k[8]=(z-P)*O*.5,k[9]=-(R-I)*U*.5,k[10]=-x/(S-x),k[11]=1*A,k[12]=k[13]=k[15]=0,k[14]=-2*x*S/(x-S),C._markAsUpdated()},t.GetAsMatrix2x2=function(T){return[T._m[0],T._m[1],T._m[4],T._m[5]]},t.GetAsMatrix3x3=function(T){return[T._m[0],T._m[1],T._m[2],T._m[4],T._m[5],T._m[6],T._m[8],T._m[9],T._m[10]]},t.Transpose=function(T){var S=new t;return t.TransposeToRef(T,S),S},t.TransposeToRef=function(T,S){var x=S._m,C=T._m;x[0]=C[0],x[1]=C[4],x[2]=C[8],x[3]=C[12],x[4]=C[1],x[5]=C[5],x[6]=C[9],x[7]=C[13],x[8]=C[2],x[9]=C[6],x[10]=C[10],x[11]=C[14],x[12]=C[3],x[13]=C[7],x[14]=C[11],x[15]=C[15],S._updateIdentityStatus(T._isIdentity,T._isIdentityDirty)},t.Reflection=function(T){var S=new t;return t.ReflectionToRef(T,S),S},t.ReflectionToRef=function(T,S){T.normalize();var x=T.normal.x,C=T.normal.y,E=T.normal.z,A=-2*x,R=-2*C,I=-2*E;t.FromValuesToRef(A*x+1,R*x,I*x,0,A*C,R*C+1,I*C,0,A*E,R*E,I*E+1,0,A*T.d,R*T.d,I*T.d,1,S)},t.FromXYZAxesToRef=function(T,S,x,C){t.FromValuesToRef(T.x,T.y,T.z,0,S.x,S.y,S.z,0,x.x,x.y,x.z,0,0,0,0,1,C)},t.FromQuaternionToRef=function(T,S){var x=T.x*T.x,C=T.y*T.y,E=T.z*T.z,A=T.x*T.y,R=T.z*T.w,I=T.z*T.x,z=T.y*T.w,P=T.y*T.z,O=T.x*T.w;S._m[0]=1-2*(C+E),S._m[1]=2*(A+R),S._m[2]=2*(I-z),S._m[3]=0,S._m[4]=2*(A-R),S._m[5]=1-2*(E+x),S._m[6]=2*(P+O),S._m[7]=0,S._m[8]=2*(I+z),S._m[9]=2*(P-O),S._m[10]=1-2*(C+x),S._m[11]=0,S._m[12]=0,S._m[13]=0,S._m[14]=0,S._m[15]=1,S._markAsUpdated()},t.prototype._markAsUpdated=function(){this.updateFlag=t._updateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0},t.prototype.isIdentity=function(){if(this._isIdentityDirty){this._isIdentityDirty=!1;var T=this._m;this._isIdentity=1===T[0]&&0===T[1]&&0===T[2]&&0===T[3]&&0===T[4]&&1===T[5]&&0===T[6]&&0===T[7]&&0===T[8]&&0===T[9]&&1===T[10]&&0===T[11]&&0===T[12]&&0===T[13]&&0===T[14]&&1===T[15]}return this._isIdentity},t.prototype.isIdentityAs3x2=function(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2},t.prototype.determinant=function(){if(!0===this._isIdentity)return 1;var T=this._m,S=T[0],x=T[1],C=T[2],E=T[3],A=T[4],R=T[5],I=T[6],z=T[7],P=T[8],O=T[9],U=T[10],k=T[11],W=T[12],H=T[13],V=T[14],G=T[15],j=U*G-V*k,X=O*G-H*k,Q=O*V-H*U,Z=P*G-W*k,K=P*V-U*W,J=P*H-W*O;return S*+(R*j-I*X+z*Q)+x*-(A*j-I*Z+z*K)+C*+(A*X-R*Z+z*J)+E*-(A*Q-R*K+I*J)},t.prototype.toArray=function(){return this._m},t.prototype.asArray=function(){return this._m},t.prototype.invert=function(){return this.invertToRef(this),this},t.prototype.reset=function(){return t.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this},t.prototype.add=function(T){var S=new t;return this.addToRef(T,S),S},t.prototype.addToRef=function(T,S){for(var x=0;x<16;x++)S._m[x]=this._m[x]+T._m[x];return S._markAsUpdated(),this},t.prototype.addToSelf=function(T){for(var S=0;S<16;S++)this._m[S]+=T._m[S];return this._markAsUpdated(),this},t.prototype.invertToRef=function(T){if(!0===this._isIdentity)return t.IdentityToRef(T),this;var S=this._m,x=S[0],C=S[1],E=S[2],A=S[3],R=S[4],I=S[5],z=S[6],P=S[7],O=S[8],U=S[9],k=S[10],W=S[11],H=S[12],V=S[13],G=S[14],j=S[15],X=k*j-G*W,Q=U*j-V*W,Z=U*G-V*k,K=O*j-H*W,J=O*G-k*H,$=O*V-H*U,et=+(I*X-z*Q+P*Z),nt=-(R*X-z*K+P*J),ot=+(R*Q-I*K+P*$),rt=-(R*Z-I*J+z*$),it=x*et+C*nt+E*ot+A*rt;if(0===it)return T.copyFrom(this),this;var st=1/it,at=z*j-G*P,ut=I*j-V*P,pt=I*G-V*z,lt=R*j-H*P,ht=R*G-H*z,dt=R*V-H*I,ft=z*W-k*P,yt=I*W-U*P,mt=I*k-U*z,gt=R*W-O*P,vt=R*k-O*z,_t=R*U-O*I,Tt=-(C*X-E*Q+A*Z),St=+(x*X-E*K+A*J),wt=-(x*Q-C*K+A*$),xt=+(x*Z-C*J+E*$),bt=+(C*at-E*ut+A*pt),Ct=-(x*at-E*lt+A*ht),Et=+(x*ut-C*lt+A*dt),At=-(x*pt-C*ht+E*dt),Rt=-(C*ft-E*yt+A*mt),It=+(x*ft-E*gt+A*vt),Pt=-(x*yt-C*gt+A*_t),Ot=+(x*mt-C*vt+E*_t);return t.FromValuesToRef(et*st,Tt*st,bt*st,Rt*st,nt*st,St*st,Ct*st,It*st,ot*st,wt*st,Et*st,Pt*st,rt*st,xt*st,At*st,Ot*st,T),this},t.prototype.addAtIndex=function(T,S){return this._m[T]+=S,this._markAsUpdated(),this},t.prototype.multiplyAtIndex=function(T,S){return this._m[T]*=S,this._markAsUpdated(),this},t.prototype.setTranslationFromFloats=function(T,S,x){return this._m[12]=T,this._m[13]=S,this._m[14]=x,this._markAsUpdated(),this},t.prototype.setTranslation=function(T){return this.setTranslationFromFloats(T.x,T.y,T.z)},t.prototype.getTranslation=function(){return new Mt(this._m[12],this._m[13],this._m[14])},t.prototype.getTranslationToRef=function(T){return T.x=this._m[12],T.y=this._m[13],T.z=this._m[14],this},t.prototype.removeRotationAndScaling=function(){var T=this.m;return t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,T[12],T[13],T[14],T[15],this),this._updateIdentityStatus(0===T[12]&&0===T[13]&&0===T[14]&&1===T[15]),this},t.prototype.multiply=function(T){var S=new t;return this.multiplyToRef(T,S),S},t.prototype.copyFrom=function(T){T.copyToArray(this._m);var S=T;return this._updateIdentityStatus(S._isIdentity,S._isIdentityDirty,S._isIdentity3x2,S._isIdentity3x2Dirty),this},t.prototype.copyToArray=function(T,S){void 0===S&&(S=0);for(var x=0;x<16;x++)T[S+x]=this._m[x];return this},t.prototype.multiplyToRef=function(T,S){return this._isIdentity?(S.copyFrom(T),this):T._isIdentity?(S.copyFrom(this),this):(this.multiplyToArray(T,S._m,0),S._markAsUpdated(),this)},t.prototype.multiplyToArray=function(T,S,x){var C=this._m,E=T.m,A=C[0],R=C[1],I=C[2],z=C[3],P=C[4],O=C[5],U=C[6],k=C[7],W=C[8],H=C[9],V=C[10],G=C[11],j=C[12],X=C[13],Q=C[14],Z=C[15],K=E[0],J=E[1],$=E[2],et=E[3],nt=E[4],ot=E[5],rt=E[6],it=E[7],st=E[8],at=E[9],ut=E[10],pt=E[11],lt=E[12],ht=E[13],dt=E[14],ft=E[15];return S[x]=A*K+R*nt+I*st+z*lt,S[x+1]=A*J+R*ot+I*at+z*ht,S[x+2]=A*$+R*rt+I*ut+z*dt,S[x+3]=A*et+R*it+I*pt+z*ft,S[x+4]=P*K+O*nt+U*st+k*lt,S[x+5]=P*J+O*ot+U*at+k*ht,S[x+6]=P*$+O*rt+U*ut+k*dt,S[x+7]=P*et+O*it+U*pt+k*ft,S[x+8]=W*K+H*nt+V*st+G*lt,S[x+9]=W*J+H*ot+V*at+G*ht,S[x+10]=W*$+H*rt+V*ut+G*dt,S[x+11]=W*et+H*it+V*pt+G*ft,S[x+12]=j*K+X*nt+Q*st+Z*lt,S[x+13]=j*J+X*ot+Q*at+Z*ht,S[x+14]=j*$+X*rt+Q*ut+Z*dt,S[x+15]=j*et+X*it+Q*pt+Z*ft,this},t.prototype.equals=function(T){var S=T;if(!S)return!1;if((this._isIdentity||S._isIdentity)&&!this._isIdentityDirty&&!S._isIdentityDirty)return this._isIdentity&&S._isIdentity;var x=this.m,C=S.m;return x[0]===C[0]&&x[1]===C[1]&&x[2]===C[2]&&x[3]===C[3]&&x[4]===C[4]&&x[5]===C[5]&&x[6]===C[6]&&x[7]===C[7]&&x[8]===C[8]&&x[9]===C[9]&&x[10]===C[10]&&x[11]===C[11]&&x[12]===C[12]&&x[13]===C[13]&&x[14]===C[14]&&x[15]===C[15]},t.prototype.clone=function(){var T=new t;return T.copyFrom(this),T},t.prototype.getClassName=function(){return"Matrix"},t.prototype.getHashCode=function(){for(var T=this._m[0]||0,S=1;S<16;S++)T=397*T^(this._m[S]||0);return T},t.prototype.decompose=function(T,S,x){if(this._isIdentity)return x&&x.setAll(0),T&&T.setAll(1),S&&S.copyFromFloats(0,0,0,1),!0;var C=this._m;x&&x.copyFromFloats(C[12],C[13],C[14]);var E=T||Nt.Vector3[0];if(E.x=Math.sqrt(C[0]*C[0]+C[1]*C[1]+C[2]*C[2]),E.y=Math.sqrt(C[4]*C[4]+C[5]*C[5]+C[6]*C[6]),E.z=Math.sqrt(C[8]*C[8]+C[9]*C[9]+C[10]*C[10]),this.determinant()<=0&&(E.y*=-1),0===E.x||0===E.y||0===E.z)return S&&S.copyFromFloats(0,0,0,1),!1;if(S){var A=1/E.x,R=1/E.y,I=1/E.z;t.FromValuesToRef(C[0]*A,C[1]*A,C[2]*A,0,C[4]*R,C[5]*R,C[6]*R,0,C[8]*I,C[9]*I,C[10]*I,0,0,0,0,1,Nt.Matrix[0]),Ft.FromRotationMatrixToRef(Nt.Matrix[0],S)}return!0},t.prototype.getRow=function(T){if(T<0||T>3)return null;var S=4*T;return new Pt(this._m[S+0],this._m[S+1],this._m[S+2],this._m[S+3])},t.prototype.setRow=function(T,S){return this.setRowFromFloats(T,S.x,S.y,S.z,S.w)},t.prototype.transpose=function(){return t.Transpose(this)},t.prototype.transposeToRef=function(T){return t.TransposeToRef(this,T),this},t.prototype.setRowFromFloats=function(T,S,x,C,E){if(T<0||T>3)return this;var A=4*T;return this._m[A+0]=S,this._m[A+1]=x,this._m[A+2]=C,this._m[A+3]=E,this._markAsUpdated(),this},t.prototype.scale=function(T){var S=new t;return this.scaleToRef(T,S),S},t.prototype.scaleToRef=function(T,S){for(var x=0;x<16;x++)S._m[x]=this._m[x]*T;return S._markAsUpdated(),this},t.prototype.scaleAndAddToRef=function(T,S){for(var x=0;x<16;x++)S._m[x]+=this._m[x]*T;return S._markAsUpdated(),this},t.prototype.toNormalMatrix=function(T){var S=Nt.Matrix[0];this.invertToRef(S),S.transposeToRef(T);var x=T._m;t.FromValuesToRef(x[0],x[1],x[2],0,x[4],x[5],x[6],0,x[8],x[9],x[10],0,0,0,0,1,T)},t.prototype.getRotationMatrix=function(){var T=new t;return this.getRotationMatrixToRef(T),T},t.prototype.getRotationMatrixToRef=function(T){var S=Nt.Vector3[0];if(!this.decompose(S))return t.IdentityToRef(T),this;var x=this._m,C=1/S.x,E=1/S.y,A=1/S.z;return t.FromValuesToRef(x[0]*C,x[1]*C,x[2]*C,0,x[4]*E,x[5]*E,x[6]*E,0,x[8]*A,x[9]*A,x[10]*A,0,0,0,0,1,T),this},t.prototype.toggleModelMatrixHandInPlace=function(){var T=this._m;T[2]*=-1,T[6]*=-1,T[8]*=-1,T[9]*=-1,T[14]*=-1,this._markAsUpdated()},t.prototype.toggleProjectionMatrixHandInPlace=function(){var T=this._m;T[8]*=-1,T[9]*=-1,T[10]*=-1,T[11]*=-1,this._markAsUpdated()},t.prototype._updateIdentityStatus=function(T,S,x,C){void 0===S&&(S=!1),void 0===x&&(x=!1),void 0===C&&(C=!0),this.updateFlag=t._updateFlagSeed++,this._isIdentity=T,this._isIdentity3x2=T||x,this._isIdentityDirty=!this._isIdentity&&S,this._isIdentity3x2Dirty=!this._isIdentity3x2&&C},t._updateFlagSeed=0,t._identityReadOnly=t.Identity(),t}(),Ft=function(){function t(T,S,x,C){void 0===T&&(T=0),void 0===S&&(S=0),void 0===x&&(x=0),void 0===C&&(C=1),this.x=T,this.y=S,this.z=x,this.w=C}return t.FromRotationMatrix=function(T){var S=new t;return t.FromRotationMatrixToRef(T,S),S},t.FromRotationMatrixToRef=function(T,S){var x,C=T.m,E=C[0],A=C[4],R=C[8],I=C[1],z=C[5],P=C[9],O=C[2],U=C[6],k=C[10],W=E+z+k;W>0?(x=.5/Math.sqrt(W+1),S.w=.25/x,S.x=(U-P)*x,S.y=(R-O)*x,S.z=(I-A)*x):E>z&&E>k?(x=2*Math.sqrt(1+E-z-k),S.w=(U-P)/x,S.x=.25*x,S.y=(A+I)/x,S.z=(R+O)/x):z>k?(x=2*Math.sqrt(1+z-E-k),S.w=(R-O)/x,S.x=(A+I)/x,S.y=.25*x,S.z=(P+U)/x):(x=2*Math.sqrt(1+k-E-z),S.w=(I-A)/x,S.x=(R+O)/x,S.y=(P+U)/x,S.z=.25*x)},t.Dot=function(T,S){return T.x*S.x+T.y*S.y+T.z*S.z+T.w*S.w},t.AreClose=function(T,S){return t.Dot(T,S)>=0},t.Zero=function(){return new t(0,0,0,0)},t.Inverse=function(T){return new t(-T.x,-T.y,-T.z,T.w)},t.IsIdentity=function(T){return T&&0===T.x&&0===T.y&&0===T.z&&1===T.w},t.RotationAxis=function(T,S){var x=S*At;return t.RotationAxisToRef(T,x,new t)},t.RotationAxisToRef=function(T,S,x){var C=S*At,E=Math.sin(C/2);return T.normalize(),x.w=Math.cos(C/2),x.x=T.x*E,x.y=T.y*E,x.z=T.z*E,x},t.FromArray=function(T,S){return void 0===S&&(S=0),new t(T[S],T[S+1],T[S+2],T[S+3])},t.FromEulerAnglesRef=function(T,S,x,C){return t.RotationYawPitchRollToRef(S*At,T*At,x*At,C)},t.RotationYawPitchRoll=function(T,S,x){var C=new t;return t.RotationYawPitchRollToRef(T,S,x,C),C},t.RotationYawPitchRollToRef=function(T,S,x,C){var E=.5*S,A=.5*T,R=.5*x,I=Math.cos(E),z=Math.cos(A),P=Math.cos(R),O=Math.sin(E),U=Math.sin(A),k=Math.sin(R);C.x=z*O*P+U*I*k,C.y=U*I*P-z*O*k,C.z=z*I*k-U*O*P,C.w=z*I*P+U*O*k},t.RotationAlphaBetaGamma=function(T,S,x){var C=new t;return t.RotationAlphaBetaGammaToRef(T,S,x,C),C},t.RotationAlphaBetaGammaToRef=function(T,S,x,C){var E=.5*(x+T),A=.5*(x-T),R=.5*S;C.x=Math.cos(A)*Math.sin(R),C.y=Math.sin(A)*Math.sin(R),C.z=Math.sin(E)*Math.cos(R),C.w=Math.cos(E)*Math.cos(R)},t.RotationQuaternionFromAxis=function(T,S,x){var C=new t(0,0,0,0);return t.RotationQuaternionFromAxisToRef(T,S,x,C),C},t.RotationQuaternionFromAxisToRef=function(T,S,x,C){var E=Nt.Matrix[0];Ot.FromXYZAxesToRef(T.normalize(),S.normalize(),x.normalize(),E),t.FromRotationMatrixToRef(E,C)},t.Slerp=function(T,S,x){var C=t.Identity;return t.SlerpToRef(T,S,x,C),C},t.SlerpToRef=function(T,S,x,C){var E,A,R=T.x*S.x+T.y*S.y+T.z*S.z+T.w*S.w,I=!1;if(R<0&&(I=!0,R=-R),R>.999999)A=1-x,E=I?-x:x;else{var z=Math.acos(R),P=1/Math.sin(z);A=Math.sin((1-x)*z)*P,E=I?-Math.sin(x*z)*P:Math.sin(x*z)*P}C.x=A*T.x+E*S.x,C.y=A*T.y+E*S.y,C.z=A*T.z+E*S.z,C.w=A*T.w+E*S.w},t.Hermite=function(T,S,x,C,E){var A=E*E,R=E*A,I=2*R-3*A+1,z=-2*R+3*A,P=R-2*A+E,O=R-A;return new t(T.x*I+x.x*z+S.x*P+C.x*O,T.y*I+x.y*z+S.y*P+C.y*O,T.z*I+x.z*z+S.z*P+C.z*O,T.w*I+x.w*z+S.w*P+C.w*O)},Object.defineProperty(t,"Identity",{get:function(){return new t(0,0,0,1)},enumerable:!1,configurable:!0}),t.Angle=function(T,S){var x=t.Dot(T,S);return 2*Math.acos(Math.min(Math.abs(x),1))*Rt},t.Euler=function(T,S,x){return t.RotationYawPitchRoll(S*At,T*At,x*At)},t.LookRotation=function(T,S){void 0===S&&(S=Nt.staticUp);var x=Mt.Normalize(T),C=Mt.Normalize(Mt.Cross(S,x)),E=Mt.Cross(x,C),A=C.x,R=C.y,I=C.z,z=E.x,P=E.y,O=E.z,U=x.x,k=x.y,W=x.z,H=A+P+W,V=new t;if(H>0){var G=Math.sqrt(H+1);return V.w=.5*G,G=.5/G,V.x=(O-k)*G,V.y=(U-I)*G,V.z=(R-z)*G,V}if(A>=P&&A>=W){var j=Math.sqrt(1+A-P-W),X=.5/j;return V.x=.5*j,V.y=(R+z)*X,V.z=(I+U)*X,V.w=(O-k)*X,V}if(P>W){var Q=Math.sqrt(1+P-A-W),Z=.5/Q;return V.x=(z+R)*Z,V.y=.5*Q,V.z=(k+O)*Z,V.w=(U-I)*Z,V}var K=Math.sqrt(1+W-A-P),J=.5/K;return V.x=(U+I)*J,V.y=(k+O)*J,V.z=.5*K,V.w=(R-z)*J,V},t.RotateTowards=function(T,S,x){var C=t.Angle(T,S);if(0===C)return S;var E=Math.min(1,x/C);return t.Slerp(T,S,E)},t.FromToRotation=function(T,S,x){void 0===x&&(x=Nt.staticUp);var C=T.normalize(),E=S.normalize(),A=Mt.Cross(C,E),R=Math.sqrt(C.lengthSquared()*E.lengthSquared())+Mt.Dot(C,E);return A.lengthSquared()<1e-4?Math.abs(R)<1e-4?new t(x.x,x.y,x.z,0).normalized:t.Identity:new t(A.x,A.y,A.z,R).normalized},Object.defineProperty(t.prototype,"normalized",{get:function(){return this.normalize()},enumerable:!1,configurable:!0}),t.prototype.setFromToRotation=function(T,S,x){void 0===x&&(x=Nt.staticUp);var C=t.FromToRotation(T,S,x);this.x=C.x,this.y=C.y,this.z=C.z,this.w=C.w},Object.defineProperty(t.prototype,"eulerAngles",{get:function(){var T=new Mt,S=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w,x=this.x*this.w-this.y*this.z;return x>.4995*S?(T.x=Math.PI/2,T.y=2*Math.atan2(this.y,this.x),T.z=0):x<-.4995*S?(T.x=-Math.PI/2,T.y=-2*Math.atan2(this.y,this.x),T.z=0):(T.x=Math.asin(2*(this.w*this.x-this.y*this.z)),T.y=Math.atan2(2*this.w*this.y+2*this.z*this.x,1-2*(this.x*this.x+this.y*this.y)),T.z=Math.atan2(2*this.w*this.z+2*this.x*this.y,1-2*(this.z*this.z+this.x*this.x))),T.x*=Rt,T.y*=Rt,T.z*=Rt,T.x=It.Repeat(T.x,360),T.y=It.Repeat(T.y,360),T.z=It.Repeat(T.z,360),T},set:function(T){this.setEuler(T.x,T.y,T.z)},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.lengthSquared)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lengthSquared",{get:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},enumerable:!1,configurable:!0}),t.prototype.getClassName=function(){return"Quaternion"},t.prototype.getHashCode=function(){var T=this.x||0;return 397*(T=397*(T=397*T^(this.y||0))^(this.z||0))^(this.w||0)},t.prototype.asArray=function(){return[this.x,this.y,this.z,this.w]},t.prototype.equals=function(T){return T&&this.x===T.x&&this.y===T.y&&this.z===T.z&&this.w===T.w},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copyFrom=function(T){return this.x=T.x,this.y=T.y,this.z=T.z,this.w=T.w,this},t.prototype.copyFromFloats=function(T,S,x,C){return this.x=T,this.y=S,this.z=x,this.w=C,this},t.prototype.set=function(T,S,x,C){return this.copyFromFloats(T,S,x,C)},t.prototype.setEuler=function(T,S,x){return t.RotationYawPitchRollToRef(S*At,T*At,x*At,this),this},t.prototype.add=function(T){return new t(this.x+T.x,this.y+T.y,this.z+T.z,this.w+T.w)},t.prototype.addInPlace=function(T){return this.x+=T.x,this.y+=T.y,this.z+=T.z,this.w+=T.w,this},t.prototype.subtract=function(T){return new t(this.x-T.x,this.y-T.y,this.z-T.z,this.w-T.w)},t.prototype.scale=function(T){return new t(this.x*T,this.y*T,this.z*T,this.w*T)},t.prototype.scaleToRef=function(T,S){return S.x=this.x*T,S.y=this.y*T,S.z=this.z*T,S.w=this.w*T,this},t.prototype.scaleInPlace=function(T){return this.x*=T,this.y*=T,this.z*=T,this.w*=T,this},t.prototype.scaleAndAddToRef=function(T,S){return S.x+=this.x*T,S.y+=this.y*T,S.z+=this.z*T,S.w+=this.w*T,this},t.prototype.multiply=function(T){var S=new t(0,0,0,1);return this.multiplyToRef(T,S),S},t.prototype.multiplyToRef=function(T,S){var x=this.x*T.w+this.y*T.z-this.z*T.y+this.w*T.x,C=-this.x*T.z+this.y*T.w+this.z*T.x+this.w*T.y,E=this.x*T.y-this.y*T.x+this.z*T.w+this.w*T.z,A=-this.x*T.x-this.y*T.y-this.z*T.z+this.w*T.w;return S.copyFromFloats(x,C,E,A),this},t.prototype.multiplyInPlace=function(T){return this.multiplyToRef(T,this),this},t.prototype.conjugateToRef=function(T){return T.copyFromFloats(-this.x,-this.y,-this.z,this.w),this},t.prototype.conjugateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},t.prototype.conjugate=function(){return new t(-this.x,-this.y,-this.z,this.w)},t.prototype.normalize=function(){var T=1/this.length;return this.x*=T,this.y*=T,this.z*=T,this.w*=T,this},t.prototype.angleAxis=function(T,S){if(0===S.lengthSquared())return t.Identity;var x=t.Identity,C=T*At;C*=.5;var E=S.normalize();return E=S.scaleInPlace(Math.sin(C)),x.x=E.x,x.y=E.y,x.z=E.z,x.w=Math.cos(C),x.normalize()},t.prototype.toRotationMatrix=function(T){return Ot.FromQuaternionToRef(this,T),this},t.prototype.fromRotationMatrix=function(T){return t.FromRotationMatrixToRef(T,this),this},t}(),Mt=function(){function t(T,S,x){void 0===T&&(T=0),void 0===S&&(S=0),void 0===x&&(x=0),this.x=T,this.y=S,this.z=x}return Object.defineProperty(t.prototype,"isNonUniform",{get:function(){var T=Math.abs(this.x),S=Math.abs(this.y);if(T!==S)return!0;var x=Math.abs(this.z);return T!==x||S!==x},enumerable:!1,configurable:!0}),t.Add=function(T,S){return new t(T.x,T.y,T.z).addInPlace(S)},t.GetClipFactor=function(T,S,x,C){var E=t.Dot(T,x)-C;return E/(E-(t.Dot(S,x)-C))},t.GetAngleBetweenVectors=function(T,S,x){var C=T.normalizeToRef(Nt.Vector3[1]),E=S.normalizeToRef(Nt.Vector3[2]),A=t.Dot(C,E),R=Nt.Vector3[3];return t.CrossToRef(C,E,R),t.Dot(R,x)>0?Math.acos(A):-Math.acos(A)},t.FromArray=function(T,S){return void 0===S&&(S=0),new t(T[S],T[S+1],T[S+2])},t.FromFloatArray=function(T,S){return t.FromArray(T,S)},t.FromArrayToRef=function(T,S,x){x.x=T[S],x.y=T[S+1],x.z=T[S+2]},t.FromFloatArrayToRef=function(T,S,x){return t.FromArrayToRef(T,S,x)},t.FromFloatsToRef=function(T,S,x,C){C.copyFromFloats(T,S,x)},t.Zero=function(){return new t(0,0,0)},t.One=function(){return new t(1,1,1)},t.Up=function(){return new t(0,1,0)},t.Down=function(){return new t(0,-1,0)},t.Forward=function(){return new t(0,0,1)},t.Backward=function(){return new t(0,0,-1)},t.Right=function(){return new t(1,0,0)},t.Left=function(){return new t(-1,0,0)},t.TransformCoordinates=function(T,S){var x=t.Zero();return t.TransformCoordinatesToRef(T,S,x),x},t.TransformCoordinatesToRef=function(T,S,x){return t.TransformCoordinatesFromFloatsToRef(T.x,T.y,T.z,S,x)},t.TransformCoordinatesFromFloatsToRef=function(T,S,x,C,E){var A=C.m,R=T*A[0]+S*A[4]+x*A[8]+A[12],I=T*A[1]+S*A[5]+x*A[9]+A[13],z=T*A[2]+S*A[6]+x*A[10]+A[14],P=1/(T*A[3]+S*A[7]+x*A[11]+A[15]);E.x=R*P,E.y=I*P,E.z=z*P},t.TransformNormal=function(T,S){var x=t.Zero();return t.TransformNormalToRef(T,S,x),x},t.TransformNormalToRef=function(T,S,x){this.TransformNormalFromFloatsToRef(T.x,T.y,T.z,S,x)},t.TransformNormalFromFloatsToRef=function(T,S,x,C,E){var A=C.m;E.x=T*A[0]+S*A[4]+x*A[8],E.y=T*A[1]+S*A[5]+x*A[9],E.z=T*A[2]+S*A[6]+x*A[10]},t.CatmullRom=function(T,S,x,C,E){var A=E*E,R=E*A;return new t(.5*(2*S.x+(-T.x+x.x)*E+(2*T.x-5*S.x+4*x.x-C.x)*A+(-T.x+3*S.x-3*x.x+C.x)*R),.5*(2*S.y+(-T.y+x.y)*E+(2*T.y-5*S.y+4*x.y-C.y)*A+(-T.y+3*S.y-3*x.y+C.y)*R),.5*(2*S.z+(-T.z+x.z)*E+(2*T.z-5*S.z+4*x.z-C.z)*A+(-T.z+3*S.z-3*x.z+C.z)*R))},t.Clamp=function(T,S,x){var C=new t;return t.ClampToRef(T,S,x,C),C},t.ClampToRef=function(T,S,x,C){var E=T.x;E=(E=E>x.x?x.x:E)<S.x?S.x:E;var A=T.y;A=(A=A>x.y?x.y:A)<S.y?S.y:A;var R=T.z;R=(R=R>x.z?x.z:R)<S.z?S.z:R,C.copyFromFloats(E,A,R)},t.Hermite=function(T,S,x,C,E){var A=E*E,R=E*A,I=2*R-3*A+1,z=-2*R+3*A,P=R-2*A+E,O=R-A;return new t(T.x*I+x.x*z+S.x*P+C.x*O,T.y*I+x.y*z+S.y*P+C.y*O,T.z*I+x.z*z+S.z*P+C.z*O)},t.Lerp=function(T,S,x){var C=new t(0,0,0);return t.LerpToRef(T,S,x,C),C},t.LerpToRef=function(T,S,x,C){C.x=T.x+(S.x-T.x)*x,C.y=T.y+(S.y-T.y)*x,C.z=T.z+(S.z-T.z)*x},t.Dot=function(T,S){return T.x*S.x+T.y*S.y+T.z*S.z},t.Cross=function(T,S){var x=t.Zero();return t.CrossToRef(T,S,x),x},t.CrossToRef=function(T,S,x){var C=T.y*S.z-T.z*S.y,E=T.z*S.x-T.x*S.z,A=T.x*S.y-T.y*S.x;x.copyFromFloats(C,E,A)},t.Normalize=function(T){var S=t.Zero();return t.NormalizeToRef(T,S),S},t.NormalizeToRef=function(T,S){T.normalizeToRef(S)},t.Minimize=function(T,S){var x=new t(T.x,T.y,T.z);return x.minimizeInPlace(S),x},t.Maximize=function(T,S){var x=new t(T.x,T.y,T.z);return x.maximizeInPlace(S),x},t.Distance=function(T,S){return Math.sqrt(t.DistanceSquared(T,S))},t.DistanceSquared=function(T,S){var x=T.x-S.x,C=T.y-S.y,E=T.z-S.z;return x*x+C*C+E*E},t.Center=function(T,S){var x=t.Add(T,S);return x.scaleInPlace(.5),x},t.RotationFromAxis=function(T,S,x){var C=t.Zero();return t.RotationFromAxisToRef(T,S,x,C),C},t.RotationFromAxisToRef=function(T,S,x,C){var E=Nt.Quaternion[0];Ft.RotationQuaternionFromAxisToRef(T,S,x,E),C.copyFrom(E.eulerAngles)},t.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},t.prototype.getClassName=function(){return"Vector3"},t.prototype.getHashCode=function(){var T=this.x||0;return 397*(T=397*T^(this.y||0))^(this.z||0)},t.prototype.asArray=function(){var T=[];return this.toArray(T,0),T},t.prototype.toArray=function(T,S){return void 0===S&&(S=0),T[S]=this.x,T[S+1]=this.y,T[S+2]=this.z,this},t.prototype.toQuaternion=function(){return Ft.Identity.setEuler(this.y,this.x,this.z)},t.prototype.addInPlace=function(T){return this.addInPlaceFromFloats(T.x,T.y,T.z)},t.prototype.addInPlaceFromFloats=function(T,S,x){return this.x+=T,this.y+=S,this.z+=x,this},t.prototype.add=function(T){return new t(this.x+T.x,this.y+T.y,this.z+T.z)},t.prototype.addToRef=function(T,S){return S.copyFromFloats(this.x+T.x,this.y+T.y,this.z+T.z)},t.prototype.subtractInPlace=function(T){return this.x-=T.x,this.y-=T.y,this.z-=T.z,this},t.prototype.subtract=function(T){return new t(this.x-T.x,this.y-T.y,this.z-T.z)},t.prototype.subtractToRef=function(T,S){return this.subtractFromFloatsToRef(T.x,T.y,T.z,S)},t.prototype.subtractFromFloats=function(T,S,x){return new t(this.x-T,this.y-S,this.z-x)},t.prototype.subtractFromFloatsToRef=function(T,S,x,C){return C.copyFromFloats(this.x-T,this.y-S,this.z-x)},t.prototype.applyMatrix4=function(T){this.applyMatrix4ToRef(T,this)},t.prototype.applyMatrix4ToRef=function(T,S){var x=this,C=x.x,E=x.y,A=x.z,R=T.m,I=1/(R[3]*C+R[7]*E+R[11]*A+R[15]);return S.x=(R[0]*C+R[4]*E+R[8]*A+R[12])*I,S.y=(R[1]*C+R[5]*E+R[9]*A+R[13])*I,S.z=(R[2]*C+R[6]*E+R[10]*A+R[14])*I,S},t.prototype.rotate=function(T){return this.rotateToRef(T,this)},t.prototype.rotateToRef=function(T,S){var x=this,C=x.x,E=x.y,A=x.z,R=T.x,I=T.y,z=T.z,P=T.w,O=P*C+I*A-z*E,U=P*E+z*C-R*A,k=P*A+R*E-I*C,W=-R*C-I*E-z*A;return S.x=O*P+W*-R+U*-z-k*-I,S.y=U*P+W*-I+k*-R-O*-z,S.z=k*P+W*-z+O*-I-U*-R,S},t.prototype.negate=function(){return new t(-this.x,-this.y,-this.z)},t.prototype.scaleInPlace=function(T){return this.x*=T,this.y*=T,this.z*=T,this},t.prototype.scale=function(T){return new t(this.x*T,this.y*T,this.z*T)},t.prototype.scaleToRef=function(T,S){return S.copyFromFloats(this.x*T,this.y*T,this.z*T)},t.prototype.scaleAndAddToRef=function(T,S){return S.addInPlaceFromFloats(this.x*T,this.y*T,this.z*T)},t.prototype.equals=function(T){return T&&this.x===T.x&&this.y===T.y&&this.z===T.z},t.prototype.equalsWithEpsilon=function(T,S){return void 0===S&&(S=Et),T&&It.WithinEpsilon(this.x,T.x,S)&&It.WithinEpsilon(this.y,T.y,S)&&It.WithinEpsilon(this.z,T.z,S)},t.prototype.equalsToFloats=function(T,S,x){return this.x===T&&this.y===S&&this.z===x},t.prototype.multiplyInPlace=function(T){return this.x*=T.x,this.y*=T.y,this.z*=T.z,this},t.prototype.multiply=function(T){return this.multiplyByFloats(T.x,T.y,T.z)},t.prototype.multiplyToRef=function(T,S){return S.copyFromFloats(this.x*T.x,this.y*T.y,this.z*T.z)},t.prototype.multiplyByFloats=function(T,S,x){return new t(this.x*T,this.y*S,this.z*x)},t.prototype.divide=function(T){return new t(this.x/T.x,this.y/T.y,this.z/T.z)},t.prototype.divideToRef=function(T,S){return S.copyFromFloats(this.x/T.x,this.y/T.y,this.z/T.z)},t.prototype.divideInPlace=function(T){return this.divideToRef(T,this)},t.prototype.minimizeInPlace=function(T){return this.minimizeInPlaceFromFloats(T.x,T.y,T.z)},t.prototype.maximizeInPlace=function(T){return this.maximizeInPlaceFromFloats(T.x,T.y,T.z)},t.prototype.minimizeInPlaceFromFloats=function(T,S,x){return T<this.x&&(this.x=T),S<this.y&&(this.y=S),x<this.z&&(this.z=x),this},t.prototype.maximizeInPlaceFromFloats=function(T,S,x){return T>this.x&&(this.x=T),S>this.y&&(this.y=S),x>this.z&&(this.z=x),this},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z},t.prototype.normalize=function(){return this.normalizeFromLength(this.length())},t.prototype.normalizeFromLength=function(T){return 0===T||1===T?this:this.scaleInPlace(1/T)},t.prototype.normalizeToNew=function(){var T=new t(0,0,0);return this.normalizeToRef(T),T},t.prototype.normalizeToRef=function(T){var S=this.length();return 0===S||1===S?T.copyFromFloats(this.x,this.y,this.z):this.scaleToRef(1/S,T)},t.prototype.clone=function(){return new t(this.x,this.y,this.z)},t.prototype.copyFrom=function(T){return this.copyFromFloats(T.x,T.y,T.z)},t.prototype.copyFromFloats=function(T,S,x){return this.x=T,this.y=S,this.z=x,this},t.prototype.set=function(T,S,x){return this.copyFromFloats(T,S,x)},t.prototype.setAll=function(T){return this.x=this.y=this.z=T,this},t}(),Nt={Vector3:v(6,Mt.Zero),Matrix:v(2,Ot.Identity),Quaternion:v(3,Ft.Zero),staticUp:Mt.Up(),tmpMatrix:Ot.Zero()},Lt=function(){function t(T){this._radians=T,this._radians<0&&(this._radians+=2*Math.PI)}return t.BetweenTwoPoints=function(T,S){var x=S.subtract(T);return new t(Math.atan2(x.y,x.x))},t.FromRadians=function(T){return new t(T)},t.FromDegrees=function(T){return new t(T*Math.PI/180)},t.prototype.degrees=function(){return 180*this._radians/Math.PI},t.prototype.radians=function(){return this._radians},t}(),Dt=function(){function t(T,S){void 0===T&&(T=0),void 0===S&&(S=0),this.x=T,this.y=S}return t.Zero=function(){return new t(0,0)},t.One=function(){return new t(1,1)},t.Add=function(T,S){return new t(T.x,T.y).addInPlace(S)},t.FromArray=function(T,S){return void 0===S&&(S=0),new t(T[S],T[S+1])},t.FromArrayToRef=function(T,S,x){x.x=T[S],x.y=T[S+1]},t.CatmullRom=function(T,S,x,C,E){var A=E*E,R=E*A;return new t(.5*(2*S.x+(-T.x+x.x)*E+(2*T.x-5*S.x+4*x.x-C.x)*A+(-T.x+3*S.x-3*x.x+C.x)*R),.5*(2*S.y+(-T.y+x.y)*E+(2*T.y-5*S.y+4*x.y-C.y)*A+(-T.y+3*S.y-3*x.y+C.y)*R))},t.Clamp=function(T,S,x){var C=T.x;C=(C=C>x.x?x.x:C)<S.x?S.x:C;var E=T.y;return new t(C,E=(E=E>x.y?x.y:E)<S.y?S.y:E)},t.Hermite=function(T,S,x,C,E){var A=E*E,R=E*A,I=2*R-3*A+1,z=-2*R+3*A,P=R-2*A+E,O=R-A;return new t(T.x*I+x.x*z+S.x*P+C.x*O,T.y*I+x.y*z+S.y*P+C.y*O)},t.Lerp=function(T,S,x){return new t(T.x+(S.x-T.x)*x,T.y+(S.y-T.y)*x)},t.Dot=function(T,S){return T.x*S.x+T.y*S.y},t.Normalize=function(T){var S=new t(T.x,T.y);return S.normalize(),S},t.Minimize=function(T,S){return new t(T.x<S.x?T.x:S.x,T.y<S.y?T.y:S.y)},t.Maximize=function(T,S){return new t(T.x>S.x?T.x:S.x,T.y>S.y?T.y:S.y)},t.Transform=function(T,S){var x=t.Zero();return t.TransformToRef(T,S,x),x},t.TransformToRef=function(T,S,x){var C=S.m,E=T.x*C[0]+T.y*C[4]+C[12],A=T.x*C[1]+T.y*C[5]+C[13];x.x=E,x.y=A},t.PointInTriangle=function(T,S,x,C){var E=.5*(-x.y*C.x+S.y*(-x.x+C.x)+S.x*(x.y-C.y)+x.x*C.y),A=E<0?-1:1,R=(S.y*C.x-S.x*C.y+(C.y-S.y)*T.x+(S.x-C.x)*T.y)*A,I=(S.x*x.y-S.y*x.x+(S.y-x.y)*T.x+(x.x-S.x)*T.y)*A;return R>0&&I>0&&R+I<2*E*A},t.Distance=function(T,S){return Math.sqrt(t.DistanceSquared(T,S))},t.DistanceSquared=function(T,S){var x=T.x-S.x,C=T.y-S.y;return x*x+C*C},t.Center=function(T,S){var x=t.Add(T,S);return x.scaleInPlace(.5),x},t.DistanceOfPointFromSegment=function(T,S,x){var C=t.DistanceSquared(S,x);if(0===C)return t.Distance(T,S);var E=x.subtract(S),A=Math.max(0,Math.min(1,t.Dot(T.subtract(S),E)/C)),R=S.add(E.multiplyByFloats(A,A));return t.Distance(T,R)},t.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+"}"},t.prototype.getClassName=function(){return"Vector2"},t.prototype.getHashCode=function(){return 397*(this.x||0)^(this.y||0)},t.prototype.toArray=function(T,S){return void 0===S&&(S=0),T[S]=this.x,T[S+1]=this.y,this},t.prototype.asArray=function(){var T=new Array;return this.toArray(T,0),T},t.prototype.copyFrom=function(T){return this.x=T.x,this.y=T.y,this},t.prototype.copyFromFloats=function(T,S){return this.x=T,this.y=S,this},t.prototype.set=function(T,S){return this.copyFromFloats(T,S)},t.prototype.add=function(T){return new t(this.x+T.x,this.y+T.y)},t.prototype.addToRef=function(T,S){return S.x=this.x+T.x,S.y=this.y+T.y,this},t.prototype.addInPlace=function(T){return this.x+=T.x,this.y+=T.y,this},t.prototype.addVector3=function(T){return new t(this.x+T.x,this.y+T.y)},t.prototype.subtract=function(T){return new t(this.x-T.x,this.y-T.y)},t.prototype.subtractToRef=function(T,S){return S.x=this.x-T.x,S.y=this.y-T.y,this},t.prototype.subtractInPlace=function(T){return this.x-=T.x,this.y-=T.y,this},t.prototype.multiplyInPlace=function(T){return this.x*=T.x,this.y*=T.y,this},t.prototype.multiply=function(T){return new t(this.x*T.x,this.y*T.y)},t.prototype.multiplyToRef=function(T,S){return S.x=this.x*T.x,S.y=this.y*T.y,this},t.prototype.multiplyByFloats=function(T,S){return new t(this.x*T,this.y*S)},t.prototype.divide=function(T){return new t(this.x/T.x,this.y/T.y)},t.prototype.divideToRef=function(T,S){return S.x=this.x/T.x,S.y=this.y/T.y,this},t.prototype.divideInPlace=function(T){return this.divideToRef(T,this)},t.prototype.negate=function(){return new t(-this.x,-this.y)},t.prototype.scaleInPlace=function(T){return this.x*=T,this.y*=T,this},t.prototype.scale=function(T){var S=new t(0,0);return this.scaleToRef(T,S),S},t.prototype.scaleToRef=function(T,S){return S.x=this.x*T,S.y=this.y*T,this},t.prototype.scaleAndAddToRef=function(T,S){return S.x+=this.x*T,S.y+=this.y*T,this},t.prototype.equals=function(T){return T&&this.x===T.x&&this.y===T.y},t.prototype.equalsWithEpsilon=function(T,S){return void 0===S&&(S=Et),T&&It.WithinEpsilon(this.x,T.x,S)&&It.WithinEpsilon(this.y,T.y,S)},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var T=this.length();if(0===T)return this;var S=1/T;return this.x*=S,this.y*=S,this},t.prototype.clone=function(){return new t(this.x,this.y)},t}(),zt=function(S,x,C){this.startPoint=S,this.midPoint=x,this.endPoint=C;var E=Math.pow(x.x,2)+Math.pow(x.y,2),A=(Math.pow(S.x,2)+Math.pow(S.y,2)-E)/2,R=(E-Math.pow(C.x,2)-Math.pow(C.y,2))/2,I=(S.x-x.x)*(x.y-C.y)-(x.x-C.x)*(S.y-x.y);this.centerPoint=new Dt((A*(x.y-C.y)-R*(S.y-x.y))/I,((S.x-x.x)*R-(x.x-C.x)*A)/I),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=Lt.BetweenTwoPoints(this.centerPoint,this.startPoint);var z=this.startAngle.degrees(),P=Lt.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),O=Lt.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();P-z>180&&(P-=360),P-z<-180&&(P+=360),O-P>180&&(O-=360),O-P<-180&&(O+=360),this.orientation=P-z<0?T.Orientation.CW:T.Orientation.CCW,this.angle=Lt.FromDegrees(this.orientation===T.Orientation.CW?z-O:O-z)},qt=function(){function t(){}return t.X=new Mt(1,0,0),t.Y=new Mt(0,1,0),t.Z=new Mt(0,0,1),t}(),Ut=function(){function t(){}return t.Interpolate=function(T,S,x,C,E){for(var A=1-3*C+3*S,R=3*C-6*S,I=3*S,z=T,P=0;P<5;P++){var O=z*z;z-=1/(3*A*O+2*R*z+I)*(A*(O*z)+R*O+I*z-T),z=Math.min(1,Math.max(0,z))}return 3*Math.pow(1-z,2)*z*x+3*(1-z)*Math.pow(z,2)*E+Math.pow(z,3)},t}(),kt=function(){function t(T,S,x,C){void 0===T&&(T=0),void 0===S&&(S=0),void 0===x&&(x=0),void 0===C&&(C=1),this.r=T,this.g=S,this.b=x,this.a=C}return t.FromHexString=function(T){if("#"!==T.substring(0,1)||9!==T.length)return new t(0,0,0,0);var S=parseInt(T.substring(1,3),16),x=parseInt(T.substring(3,5),16),C=parseInt(T.substring(5,7),16),E=parseInt(T.substring(7,9),16);return t.FromInts(S,x,C,E)},t.Lerp=function(T,S,x){var C=new t(0,0,0,0);return t.LerpToRef(T,S,x,C),C},t.LerpToRef=function(T,S,x,C){C.r=T.r+(S.r-T.r)*x,C.g=T.g+(S.g-T.g)*x,C.b=T.b+(S.b-T.b)*x,C.a=T.a+(S.a-T.a)*x},t.Red=function(){return new t(1,0,0,1)},t.Green=function(){return new t(0,1,0,1)},t.Blue=function(){return new t(0,0,1,1)},t.Black=function(){return new t(0,0,0,1)},t.White=function(){return new t(1,1,1,1)},t.Purple=function(){return new t(.5,0,.5,1)},t.Magenta=function(){return new t(1,0,1,1)},t.Yellow=function(){return new t(1,1,0,1)},t.Gray=function(){return new t(.5,.5,.5,1)},t.Teal=function(){return new t(0,1,1,1)},t.Clear=function(){return new t(0,0,0,0)},t.FromColor3=function(T,S){return void 0===S&&(S=1),new t(T.r,T.g,T.b,S)},t.FromArray=function(T,S){return void 0===S&&(S=0),new t(T[S],T[S+1],T[S+2],T[S+3])},t.FromInts=function(T,S,x,C){return new t(T/255,S/255,x/255,C/255)},t.CheckColors4=function(T,S){if(T.length===3*S){for(var x=[],C=0;C<T.length;C+=3){var E=C/3*4;x[E]=T[C],x[E+1]=T[C+1],x[E+2]=T[C+2],x[E+3]=1}return x}return T},t.prototype.addInPlace=function(T){return this.r+=T.r,this.g+=T.g,this.b+=T.b,this.a+=T.a,this},t.prototype.asArray=function(){var T=new Array;return this.toArray(T,0),T},t.prototype.toArray=function(T,S){return void 0===S&&(S=0),T[S]=this.r,T[S+1]=this.g,T[S+2]=this.b,T[S+3]=this.a,this},t.prototype.add=function(T){return new t(this.r+T.r,this.g+T.g,this.b+T.b,this.a+T.a)},t.prototype.subtract=function(T){return new t(this.r-T.r,this.g-T.g,this.b-T.b,this.a-T.a)},t.prototype.subtractToRef=function(T,S){return S.r=this.r-T.r,S.g=this.g-T.g,S.b=this.b-T.b,S.a=this.a-T.a,this},t.prototype.scale=function(T){return new t(this.r*T,this.g*T,this.b*T,this.a*T)},t.prototype.scaleToRef=function(T,S){return S.r=this.r*T,S.g=this.g*T,S.b=this.b*T,S.a=this.a*T,this},t.prototype.scaleAndAddToRef=function(T,S){return S.r+=this.r*T,S.g+=this.g*T,S.b+=this.b*T,S.a+=this.a*T,this},t.prototype.clampToRef=function(T,S,x){return void 0===T&&(T=0),void 0===S&&(S=1),x.r=It.Clamp(this.r,T,S),x.g=It.Clamp(this.g,T,S),x.b=It.Clamp(this.b,T,S),x.a=It.Clamp(this.a,T,S),this},t.prototype.multiply=function(T){return new t(this.r*T.r,this.g*T.g,this.b*T.b,this.a*T.a)},t.prototype.multiplyToRef=function(T,S){return S.r=this.r*T.r,S.g=this.g*T.g,S.b=this.b*T.b,S.a=this.a*T.a,S},t.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"},t.prototype.getClassName=function(){return"Color4"},t.prototype.getHashCode=function(){var T=this.r||0;return 397*(T=397*(T=397*T^(this.g||0))^(this.b||0))^(this.a||0)},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a)},t.prototype.copyFrom=function(T){return this.r=T.r,this.g=T.g,this.b=T.b,this.a=T.a,this},t.prototype.copyFromFloats=function(T,S,x,C){return this.r=T,this.g=S,this.b=x,this.a=C,this},t.prototype.set=function(T,S,x,C){return this.copyFromFloats(T,S,x,C)},t.prototype.toHexString=function(){var T=255*this.r|0,S=255*this.g|0,x=255*this.b|0,C=255*this.a|0;return"#"+It.ToHex(T)+It.ToHex(S)+It.ToHex(x)+It.ToHex(C)},t.prototype.toLinearSpace=function(){var T=new t;return this.toLinearSpaceToRef(T),T},t.prototype.toLinearSpaceToRef=function(T){return T.r=Math.pow(this.r,Ct),T.g=Math.pow(this.g,Ct),T.b=Math.pow(this.b,Ct),T.a=this.a,this},t.prototype.toGammaSpace=function(){var T=new t;return this.toGammaSpaceToRef(T),T},t.prototype.toGammaSpaceToRef=function(T){return T.r=Math.pow(this.r,bt),T.g=Math.pow(this.g,bt),T.b=Math.pow(this.b,bt),T.a=this.a,this},t}(),Bt=function(){function t(T,S,x){void 0===T&&(T=0),void 0===S&&(S=0),void 0===x&&(x=0),this.r=T,this.g=S,this.b=x}return t.FromHexString=function(T){if("#"!==T.substring(0,1)||7!==T.length)return new t(0,0,0);var S=parseInt(T.substring(1,3),16),x=parseInt(T.substring(3,5),16),C=parseInt(T.substring(5,7),16);return t.FromInts(S,x,C)},t.FromArray=function(T,S){return void 0===S&&(S=0),new t(T[S],T[S+1],T[S+2])},t.FromInts=function(T,S,x){return new t(T/255,S/255,x/255)},t.Lerp=function(T,S,x){var C=new t(0,0,0);return t.LerpToRef(T,S,x,C),C},t.LerpToRef=function(T,S,x,C){C.r=T.r+(S.r-T.r)*x,C.g=T.g+(S.g-T.g)*x,C.b=T.b+(S.b-T.b)*x},t.Red=function(){return new t(1,0,0)},t.Green=function(){return new t(0,1,0)},t.Blue=function(){return new t(0,0,1)},t.Black=function(){return new t(0,0,0)},t.White=function(){return new t(1,1,1)},t.Purple=function(){return new t(.5,0,.5)},t.Magenta=function(){return new t(1,0,1)},t.Yellow=function(){return new t(1,1,0)},t.Gray=function(){return new t(.5,.5,.5)},t.Teal=function(){return new t(0,1,1)},t.Random=function(){return new t(Math.random(),Math.random(),Math.random())},t.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"},t.prototype.getClassName=function(){return"Color3"},t.prototype.getHashCode=function(){var T=this.r||0;return 397*(T=397*T^(this.g||0))^(this.b||0)},t.prototype.toArray=function(T,S){return void 0===S&&(S=0),T[S]=this.r,T[S+1]=this.g,T[S+2]=this.b,this},t.prototype.toColor4=function(T){return void 0===T&&(T=1),new kt(this.r,this.g,this.b,T)},t.prototype.asArray=function(){var T=new Array;return this.toArray(T,0),T},t.prototype.toLuminance=function(){return.3*this.r+.59*this.g+.11*this.b},t.prototype.multiply=function(T){return new t(this.r*T.r,this.g*T.g,this.b*T.b)},t.prototype.multiplyToRef=function(T,S){return S.r=this.r*T.r,S.g=this.g*T.g,S.b=this.b*T.b,this},t.prototype.equals=function(T){return T&&this.r===T.r&&this.g===T.g&&this.b===T.b},t.prototype.equalsFloats=function(T,S,x){return this.r===T&&this.g===S&&this.b===x},t.prototype.scale=function(T){return new t(this.r*T,this.g*T,this.b*T)},t.prototype.scaleToRef=function(T,S){return S.r=this.r*T,S.g=this.g*T,S.b=this.b*T,this},t.prototype.scaleAndAddToRef=function(T,S){return S.r+=this.r*T,S.g+=this.g*T,S.b+=this.b*T,this},t.prototype.clampToRef=function(T,S,x){return void 0===T&&(T=0),void 0===S&&(S=1),x.r=It.Clamp(this.r,T,S),x.g=It.Clamp(this.g,T,S),x.b=It.Clamp(this.b,T,S),this},t.prototype.add=function(T){return new t(this.r+T.r,this.g+T.g,this.b+T.b)},t.prototype.addToRef=function(T,S){return S.r=this.r+T.r,S.g=this.g+T.g,S.b=this.b+T.b,this},t.prototype.subtract=function(T){return new t(this.r-T.r,this.g-T.g,this.b-T.b)},t.prototype.subtractToRef=function(T,S){return S.r=this.r-T.r,S.g=this.g-T.g,S.b=this.b-T.b,this},t.prototype.clone=function(){return new t(this.r,this.g,this.b)},t.prototype.copyFrom=function(T){return this.r=T.r,this.g=T.g,this.b=T.b,this},t.prototype.copyFromFloats=function(T,S,x){return this.r=T,this.g=S,this.b=x,this},t.prototype.set=function(T,S,x){return this.copyFromFloats(T,S,x)},t.prototype.toHexString=function(){var T=255*this.r|0,S=255*this.g|0,x=255*this.b|0;return"#"+It.ToHex(T)+It.ToHex(S)+It.ToHex(x)},t.prototype.toLinearSpace=function(){var T=new t;return this.toLinearSpaceToRef(T),T},t.prototype.toLinearSpaceToRef=function(T){return T.r=Math.pow(this.r,Ct),T.g=Math.pow(this.g,Ct),T.b=Math.pow(this.b,Ct),this},t.prototype.toGammaSpace=function(){var T=new t;return this.toGammaSpaceToRef(T),T},t.prototype.toGammaSpaceToRef=function(T){return T.r=Math.pow(this.r,bt),T.g=Math.pow(this.g,bt),T.b=Math.pow(this.b,bt),this},t.prototype.toJSON=function(){return{r:this.r,g:this.g,b:this.b}},t}(),Wt=function(){function t(T){this._length=0,this._points=T,this._length=this._computeLength(T)}return t.CreateQuadraticBezier=function(T,S,x,C){C=C>2?C:3;for(var E=new Array,s=function(T,S,x,C){return(1-T)*(1-T)*S+2*T*(1-T)*x+T*T*C},A=0;A<=C;A++)E.push(new Mt(s(A/C,T.x,S.x,x.x),s(A/C,T.y,S.y,x.y),s(A/C,T.z,S.z,x.z)));return new t(E)},t.CreateCubicBezier=function(T,S,x,C,E){E=E>3?E:4;for(var A=new Array,a=function(T,S,x,C,E){return(1-T)*(1-T)*(1-T)*S+3*T*(1-T)*(1-T)*x+3*T*T*(1-T)*C+T*T*T*E},R=0;R<=E;R++)A.push(new Mt(a(R/E,T.x,S.x,x.x,C.x),a(R/E,T.y,S.y,x.y,C.y),a(R/E,T.z,S.z,x.z,C.z)));return new t(A)},t.CreateHermiteSpline=function(T,S,x,C,E){for(var A=new Array,R=1/E,I=0;I<=E;I++)A.push(Mt.Hermite(T,S,x,C,I*R));return new t(A)},t.CreateCatmullRomSpline=function(T,S,x){var C=new Array,E=1/S,A=0;if(x){for(var R=T.length,I=0;I<R;I++){A=0;for(var z=0;z<S;z++)C.push(Mt.CatmullRom(T[I%R],T[(I+1)%R],T[(I+2)%R],T[(I+3)%R],A)),A+=E}C.push(C[0])}else{var P=new Array;for(P.push(T[0].clone()),Array.prototype.push.apply(P,T),P.push(T[T.length-1].clone()),I=0,I=0;I<P.length-3;I++)for(A=0,z=0;z<S;z++)C.push(Mt.CatmullRom(P[I],P[I+1],P[I+2],P[I+3],A)),A+=E;I--,C.push(Mt.CatmullRom(P[I],P[I+1],P[I+2],P[I+3],A))}return new t(C)},t.prototype.getPoints=function(){return this._points},t.prototype.length=function(){return this._length},t.prototype.continue=function(T){for(var S=this._points[this._points.length-1],x=this._points.slice(),C=T.getPoints(),E=1;E<C.length;E++)x.push(C[E].subtract(C[0]).add(S));return new t(x)},t.prototype._computeLength=function(T){for(var S=0,x=1;x<T.length;x++)S+=T[x].subtract(T[x-1]).length();return S},t}(),Ht=function(){function t(T,S,x,C){this.normal=new Mt(T,S,x),this.d=C}return t.FromArray=function(T){return new t(T[0],T[1],T[2],T[3])},t.FromPoints=function(T,S,x){var C=new t(0,0,0,0);return C.copyFromPoints(T,S,x),C},t.FromPositionAndNormal=function(T,S){var x=new t(0,0,0,0);return S.normalize(),x.normal=S,x.d=-(S.x*T.x+S.y*T.y+S.z*T.z),x},t.SignedDistanceToPlaneFromPositionAndNormal=function(T,S,x){var C=-(S.x*T.x+S.y*T.y+S.z*T.z);return Mt.Dot(x,S)+C},t.prototype.asArray=function(){return[this.normal.x,this.normal.y,this.normal.z,this.d]},t.prototype.clone=function(){return new t(this.normal.x,this.normal.y,this.normal.z,this.d)},t.prototype.getClassName=function(){return"Plane"},t.prototype.getHashCode=function(){return 397*this.normal.getHashCode()^(this.d||0)},t.prototype.normalize=function(){var T=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z),S=0;return 0!==T&&(S=1/T),this.normal.x*=S,this.normal.y*=S,this.normal.z*=S,this.d*=S,this},t.prototype.transform=function(T){var S=Nt.Matrix[0];Ot.TransposeToRef(T,S);var x=S.m,C=this.normal.x,E=this.normal.y,A=this.normal.z,R=this.d;return new t(C*x[0]+E*x[1]+A*x[2]+R*x[3],C*x[4]+E*x[5]+A*x[6]+R*x[7],C*x[8]+E*x[9]+A*x[10]+R*x[11],C*x[12]+E*x[13]+A*x[14]+R*x[15])},t.prototype.dotCoordinate=function(T){return this.normal.x*T.x+this.normal.y*T.y+this.normal.z*T.z+this.d},t.prototype.copyFromPoints=function(T,S,x){var C,E=S.x-T.x,A=S.y-T.y,R=S.z-T.z,I=x.x-T.x,z=x.y-T.y,P=x.z-T.z,O=A*P-R*z,U=R*I-E*P,k=E*z-A*I,W=Math.sqrt(O*O+U*U+k*k);return C=0!==W?1/W:0,this.normal.x=O*C,this.normal.y=U*C,this.normal.z=k*C,this.d=-(this.normal.x*T.x+this.normal.y*T.y+this.normal.z*T.z),this},t.prototype.isFrontFacingTo=function(T,S){return Mt.Dot(this.normal,T)<=S},t.prototype.signedDistanceTo=function(T){return Mt.Dot(T,this.normal)+this.d},t}(),Vt=function(){function t(){}return t.GetPlanes=function(T){for(var S=[],x=0;x<6;x++)S.push(new Ht(0,0,0,0));return t.GetPlanesToRef(T,S),S},t.GetNearPlaneToRef=function(T,S){var x=T.m;S.normal.x=x[3]+x[2],S.normal.y=x[7]+x[6],S.normal.z=x[11]+x[10],S.d=x[15]+x[14],S.normalize()},t.GetFarPlaneToRef=function(T,S){var x=T.m;S.normal.x=x[3]-x[2],S.normal.y=x[7]-x[6],S.normal.z=x[11]-x[10],S.d=x[15]-x[14],S.normalize()},t.GetLeftPlaneToRef=function(T,S){var x=T.m;S.normal.x=x[3]+x[0],S.normal.y=x[7]+x[4],S.normal.z=x[11]+x[8],S.d=x[15]+x[12],S.normalize()},t.GetRightPlaneToRef=function(T,S){var x=T.m;S.normal.x=x[3]-x[0],S.normal.y=x[7]-x[4],S.normal.z=x[11]-x[8],S.d=x[15]-x[12],S.normalize()},t.GetTopPlaneToRef=function(T,S){var x=T.m;S.normal.x=x[3]-x[1],S.normal.y=x[7]-x[5],S.normal.z=x[11]-x[9],S.d=x[15]-x[13],S.normalize()},t.GetBottomPlaneToRef=function(T,S){var x=T.m;S.normal.x=x[3]+x[1],S.normal.y=x[7]+x[5],S.normal.z=x[11]+x[9],S.d=x[15]+x[13],S.normalize()},t.GetPlanesToRef=function(T,S){t.GetNearPlaneToRef(T,S[0]),t.GetFarPlaneToRef(T,S[1]),t.GetLeftPlaneToRef(T,S[2]),t.GetRightPlaneToRef(T,S[3]),t.GetTopPlaneToRef(T,S[4]),t.GetBottomPlaneToRef(T,S[5])},t}(),Gt=function(){function e(T,S){this.closed=!1,this._points=new Array,this._length=0,this._points.push(new Dt(T,S))}return e.StartingAt=function(T,S){return new e(T,S)},e.prototype.addLineTo=function(T,S){if(this.closed)return this;var x=new Dt(T,S),C=this._points[this._points.length-1];return this._points.push(x),this._length+=x.subtract(C).length(),this},e.prototype.addArcTo=function(S,x,C,E,A){if(void 0===A&&(A=36),this.closed)return this;var R=this._points[this._points.length-1],I=new Dt(S,x),z=new Dt(C,E),P=new zt(R,I,z),O=P.angle.radians()/A;P.orientation===T.Orientation.CW&&(O*=-1);for(var U=P.startAngle.radians()+O,k=0;k<A;k++){var W=Math.cos(U)*P.radius+P.centerPoint.x,H=Math.sin(U)*P.radius+P.centerPoint.y;this.addLineTo(W,H),U+=O}return this},e.prototype.close=function(){return this.closed=!0,this},e.prototype.length=function(){var T=this._length;if(!this.closed){var S=this._points[this._points.length-1];T+=this._points[0].subtract(S).length()}return T},e.prototype.getPoints=function(){return this._points},e.prototype.getPointAtLengthPosition=function(T){if(T<0||T>1)return Dt.Zero();for(var S=T*this.length(),x=0,C=0;C<this._points.length;C++){var E=(C+1)%this._points.length,A=this._points[C],R=this._points[E].subtract(A),I=R.length()+x;if(S>=x&&S<=I){var z=R.normalize(),P=S-x;return new Dt(A.x+z.x*P,A.y+z.y*P)}x=I}return Dt.Zero()},e}(),jt=function(){function t(T,S,x){void 0===S&&(S=null),this.path=T,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array;for(var C=0;C<T.length;C++)this._curve[C]=T[C].clone();this._raw=x||!1,this._compute(S)}return t.prototype.getCurve=function(){return this._curve},t.prototype.getTangents=function(){return this._tangents},t.prototype.getNormals=function(){return this._normals},t.prototype.getBinormals=function(){return this._binormals},t.prototype.getDistances=function(){return this._distances},t.prototype.update=function(T,S){void 0===S&&(S=null);for(var x=0;x<T.length;x++)this._curve[x].x=T[x].x,this._curve[x].y=T[x].y,this._curve[x].z=T[x].z;return this._compute(S),this},t.prototype._compute=function(T){var S=this._curve.length;this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[S-1]=this._curve[S-1].subtract(this._curve[S-2]),this._raw||this._tangents[S-1].normalize();var x,C,E,A,R=this._tangents[0],I=this._normalVector(this._curve[0],R,T);this._normals[0]=I,this._raw||this._normals[0].normalize(),this._binormals[0]=Mt.Cross(R,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(var z=1;z<S;z++)x=this._getLastNonNullVector(z),z<S-1&&(C=this._getFirstNonNullVector(z),this._tangents[z]=x.add(C),this._tangents[z].normalize()),this._distances[z]=this._distances[z-1]+x.length(),E=this._tangents[z],A=this._binormals[z-1],this._normals[z]=Mt.Cross(A,E),this._raw||this._normals[z].normalize(),this._binormals[z]=Mt.Cross(E,this._normals[z]),this._raw||this._binormals[z].normalize()},t.prototype._getFirstNonNullVector=function(T){for(var S=1,x=this._curve[T+S].subtract(this._curve[T]);0===x.length()&&T+S+1<this._curve.length;)S++,x=this._curve[T+S].subtract(this._curve[T]);return x},t.prototype._getLastNonNullVector=function(T){for(var S=1,x=this._curve[T].subtract(this._curve[T-S]);0===x.length()&&T>S+1;)S++,x=this._curve[T].subtract(this._curve[T-S]);return x},t.prototype._normalVector=function(T,S,x){var C,E,A=S.length();(0===A&&(A=1),null==x)?(E=It.WithinEpsilon(Math.abs(S.y)/A,1,Et)?It.WithinEpsilon(Math.abs(S.x)/A,1,Et)?It.WithinEpsilon(Math.abs(S.z)/A,1,Et)?Mt.Zero():new Mt(0,0,1):new Mt(1,0,0):new Mt(0,-1,0),C=Mt.Cross(S,E)):(C=Mt.Cross(S,x),Mt.CrossToRef(C,S,C));return C.normalize(),C},t}(),Xt=function(){function t(T,S){this.width=T,this.height=S}return Object.defineProperty(t.prototype,"surface",{get:function(){return this.width*this.height},enumerable:!1,configurable:!0}),t.Zero=function(){return new t(0,0)},t.Lerp=function(T,S,x){return new t(T.width+(S.width-T.width)*x,T.height+(S.height-T.height)*x)},t.prototype.toString=function(){return"{W: "+this.width+", H: "+this.height+"}"},t.prototype.getClassName=function(){return"Size"},t.prototype.getHashCode=function(){return 397*(this.width||0)^(this.height||0)},t.prototype.copyFrom=function(T){this.width=T.width,this.height=T.height},t.prototype.copyFromFloats=function(T,S){return this.width=T,this.height=S,this},t.prototype.set=function(T,S){return this.copyFromFloats(T,S)},t.prototype.multiplyByFloats=function(T,S){return new t(this.width*T,this.height*S)},t.prototype.clone=function(){return new t(this.width,this.height)},t.prototype.equals=function(T){return!!T&&this.width===T.width&&this.height===T.height},t.prototype.add=function(T){return new t(this.width+T.width,this.height+T.height)},t.prototype.subtract=function(T){return new t(this.width-T.width,this.height-T.height)},t}(),Qt={looping:!0,speed:1,weight:1,layer:0},Zt=function(T){function e(S,x){void 0===x&&(x=Qt);var C=T.call(this)||this;return C.isAnimationClip=!0,C.looping=Qt.looping,C.weight=Qt.weight,C.playing=!1,C.shouldReset=!1,C.speed=Qt.speed,C.name=f("AnimClip"),C.layer=Qt.layer,C.clip=S,C.setParams(i({},x)),C}return o(e,T),e.prototype.setParams=function(T){return this.looping=void 0!==T.looping?T.looping:this.looping,this.speed=T.speed||this.speed,this.weight=T.weight||this.weight,this.layer=T.layer||this.layer,this},e.prototype.toJSON=function(){var S=JSON.parse(JSON.stringify(T.prototype.toJSON.call(this)));return this.shouldReset&&(this.shouldReset=!1),S},e.prototype.play=function(T){var S;void 0===T&&(T=!1),null===(S=this.owner)||void 0===S||S.play(this,T)},e.prototype.pause=function(){var T;null===(T=this.owner)||void 0===T||T.pause(this)},e.prototype.reset=function(){this.shouldReset=!0},e.prototype.stop=function(){var T;null===(T=this.owner)||void 0===T||T.stop(this)},r([G.readonly],e.prototype,"clip",void 0),r([G.field],e.prototype,"looping",void 0),r([G.field],e.prototype,"weight",void 0),r([G.field],e.prototype,"playing",void 0),r([G.field],e.prototype,"shouldReset",void 0),r([G.field],e.prototype,"speed",void 0),r([G.readonly],e.prototype,"name",void 0),e}(G);T.InputEventType=void 0,(Tt=T.InputEventType||(T.InputEventType={}))[Tt.DOWN=0]="DOWN",Tt[Tt.UP=1]="UP",T.CameraMode=void 0,(St=T.CameraMode||(T.CameraMode={}))[St.FirstPerson=0]="FirstPerson",St[St.ThirdPerson=1]="ThirdPerson",St[St.BuildingToolGodMode=2]="BuildingToolGodMode",T.LandRole=void 0,(wt=T.LandRole||(T.LandRole={})).OWNER="owner",wt.OPERATOR="operator",T.ActionButton=void 0,(xt=T.ActionButton||(T.ActionButton={})).POINTER="POINTER",xt.PRIMARY="PRIMARY",xt.SECONDARY="SECONDARY",xt.ANY="ANY";var Kt,$t,Yt=function(T){if(this.callback=T,!T||!("apply"in T)||!("call"in T))throw new Error("Callback is not a function");ne.ensureInstance()},te=function(T){function e(){return null!==T&&T.apply(this,arguments)||this}return o(e,T),r([M("pointerDown")],e)}(Yt),ee=function(T){function e(){return null!==T&&T.apply(this,arguments)||this}return o(e,T),r([M("pointerUp")],e)}(Yt),Jt=function(T,S){this.fn=T,this.useRaycast=S},ne=function(){function e(){var S,x;this.subscriptions=((S={})[T.ActionButton.POINTER]={BUTTON_DOWN:[],BUTTON_UP:[]},S[T.ActionButton.PRIMARY]={BUTTON_DOWN:[],BUTTON_UP:[]},S[T.ActionButton.SECONDARY]={BUTTON_DOWN:[],BUTTON_UP:[]},S[T.ActionButton.ANY]={BUTTON_DOWN:[],BUTTON_UP:[]},S),this.internalState=((x={})[T.ActionButton.POINTER]={BUTTON_DOWN:!1},x[T.ActionButton.PRIMARY]={BUTTON_DOWN:!1},x[T.ActionButton.SECONDARY]={BUTTON_DOWN:!1},x[T.ActionButton.ANY]={BUTTON_DOWN:!1},x)}return Object.defineProperty(e,"instance",{get:function(){return e.ensureInstance(),e._instance},enumerable:!1,configurable:!0}),e.ensureInstance=function(){e._instance||(e._instance=new e)},e.prototype.isButtonPressed=function(T){return this.internalState[T]},e.prototype.subscribe=function(T,S,x,C){var E=this;return this.subscriptions[S][T].push(new Jt(C,x)),function(){E.unsubscribe(T,S,C)}},e.prototype.unsubscribe=function(T,S,x){var C=this.getSubscriptionId(T,S,x);return C>-1&&this.subscriptions[S][T].splice(C,1)},e.prototype.handlePointerEvent=function(S){var x=this.getPointerById(S.buttonId),C=i(i({},S),{button:x,direction:(new Mt).copyFrom(S.direction),origin:(new Mt).copyFrom(S.origin),hit:void 0}),E=S.hit?i(i({},S.hit),{hitPoint:(new Mt).copyFrom(S.hit.hitPoint),normal:(new Mt).copyFrom(S.hit.normal),worldNormal:(new Mt).copyFrom(S.hit.worldNormal)}):void 0;if(S.type===T.InputEventType.DOWN){this.internalState[x].BUTTON_DOWN=!0;for(var A=0;A<this.subscriptions[x].BUTTON_DOWN.length;A++)(R=this.subscriptions[x].BUTTON_DOWN[A]).useRaycast?C.hit=E:C.hit=void 0,R.fn(C);E&&E.entityId&&F.engine&&(z=(I=F.engine.entities[E.entityId])&&I.getComponentOrNull(te))&&(C.hit=E,z.callback(C))}else{for(this.internalState[x].BUTTON_DOWN=!1,A=0;A<this.subscriptions[x].BUTTON_UP.length;A++){var R;(R=this.subscriptions[x].BUTTON_UP[A]).useRaycast?C.hit=E:C.hit=void 0,R.fn(C)}var I,z;E&&E.entityId&&F.engine&&(z=(I=F.engine.entities[E.entityId])&&I.getComponentOrNull(ee))&&(C.hit=E,z.callback(C))}},e.prototype.getSubscriptionId=function(T,S,x){for(var C=0;C<this.subscriptions[S][T].length;C++)if(this.subscriptions[S][T][C].fn===x)return C;return-1},e.prototype.getPointerById=function(S){return 0===S?T.ActionButton.POINTER:1===S?T.ActionButton.PRIMARY:T.ActionButton.SECONDARY},e}();T.CLASS_ID=void 0,(Kt=T.CLASS_ID||(T.CLASS_ID={}))[Kt.TRANSFORM=1]="TRANSFORM",Kt[Kt.UUID_CALLBACK=8]="UUID_CALLBACK",Kt[Kt.BOX_SHAPE=16]="BOX_SHAPE",Kt[Kt.SPHERE_SHAPE=17]="SPHERE_SHAPE",Kt[Kt.PLANE_SHAPE=18]="PLANE_SHAPE",Kt[Kt.CONE_SHAPE=19]="CONE_SHAPE",Kt[Kt.CYLINDER_SHAPE=20]="CYLINDER_SHAPE",Kt[Kt.TEXT_SHAPE=21]="TEXT_SHAPE",Kt[Kt.NFT_SHAPE=22]="NFT_SHAPE",Kt[Kt.UI_WORLD_SPACE_SHAPE=23]="UI_WORLD_SPACE_SHAPE",Kt[Kt.UI_SCREEN_SPACE_SHAPE=24]="UI_SCREEN_SPACE_SHAPE",Kt[Kt.UI_CONTAINER_RECT=25]="UI_CONTAINER_RECT",Kt[Kt.UI_CONTAINER_STACK=26]="UI_CONTAINER_STACK",Kt[Kt.UI_TEXT_SHAPE=27]="UI_TEXT_SHAPE",Kt[Kt.UI_INPUT_TEXT_SHAPE=28]="UI_INPUT_TEXT_SHAPE",Kt[Kt.UI_IMAGE_SHAPE=29]="UI_IMAGE_SHAPE",Kt[Kt.UI_SLIDER_SHAPE=30]="UI_SLIDER_SHAPE",Kt[Kt.CIRCLE_SHAPE=31]="CIRCLE_SHAPE",Kt[Kt.BILLBOARD=32]="BILLBOARD",Kt[Kt.ANIMATION=33]="ANIMATION",Kt[Kt.FONT=34]="FONT",Kt[Kt.UI_FULLSCREEN_SHAPE=40]="UI_FULLSCREEN_SHAPE",Kt[Kt.UI_BUTTON_SHAPE=41]="UI_BUTTON_SHAPE",Kt[Kt.GLTF_SHAPE=54]="GLTF_SHAPE",Kt[Kt.OBJ_SHAPE=55]="OBJ_SHAPE",Kt[Kt.AVATAR_SHAPE=56]="AVATAR_SHAPE",Kt[Kt.BASIC_MATERIAL=64]="BASIC_MATERIAL",Kt[Kt.PBR_MATERIAL=65]="PBR_MATERIAL",Kt[Kt.HIGHLIGHT_ENTITY=66]="HIGHLIGHT_ENTITY",Kt[Kt.SOUND=67]="SOUND",Kt[Kt.TEXTURE=68]="TEXTURE",Kt[Kt.VIDEO_CLIP=70]="VIDEO_CLIP",Kt[Kt.VIDEO_TEXTURE=71]="VIDEO_TEXTURE",Kt[Kt.AUDIO_CLIP=200]="AUDIO_CLIP",Kt[Kt.AUDIO_SOURCE=201]="AUDIO_SOURCE",Kt[Kt.AUDIO_STREAM=202]="AUDIO_STREAM",Kt[Kt.GIZMOS=203]="GIZMOS",Kt[Kt.SMART_ITEM=204]="SMART_ITEM",Kt[Kt.AVATAR_MODIFIER_AREA=205]="AVATAR_MODIFIER_AREA",Kt[Kt.NAME=300]="NAME",Kt[Kt.LOCKED_ON_EDIT=301]="LOCKED_ON_EDIT",Kt[Kt.VISIBLE_ON_EDIT=302]="VISIBLE_ON_EDIT",T.AvatarModifiers=void 0,($t=T.AvatarModifiers||(T.AvatarModifiers={})).HIDE_AVATARS="HIDE_AVATARS",$t.DISABLE_PASSPORTS="DISABLE_PASSPORTS";var oe,re=function(S){function n(T){var x=S.call(this)||this;return x.area=T.area,x.modifiers=T.modifiers,x}return o(n,S),r([G.field],n.prototype,"area",void 0),r([G.field],n.prototype,"modifiers",void 0),r([M("engine.avatarModifierArea",T.CLASS_ID.AVATAR_MODIFIER_AREA)],n)}(G),ie=function(S){function n(T){void 0===T&&(T={});var x=S.call(this)||this;return x.position=T.position||Mt.Zero(),x.rotation=T.rotation||Ft.Identity,x.scale=T.scale||new Mt(1,1,1),x}return o(n,S),Object.defineProperty(n.prototype,"eulerAngles",{get:function(){return this.rotation.eulerAngles},enumerable:!1,configurable:!0}),n.prototype.lookAt=function(T,S){void 0===S&&(S=Nt.staticUp);var x=new Ot;return Ot.LookAtLHToRef(this.position,T,S,x),x.invert(),Ft.FromRotationMatrixToRef(x,this.rotation),this},n.prototype.rotate=function(T,S){return this.rotation.multiplyInPlace(this.rotation.angleAxis(S,T)),this},n.prototype.translate=function(T){return this.position.addInPlace(T),this},r([G.field],n.prototype,"position",void 0),r([G.field],n.prototype,"rotation",void 0),r([G.field],n.prototype,"scale",void 0),r([M("engine.transform",T.CLASS_ID.TRANSFORM)],n)}(G),se=function(S){function n(T,x,C){void 0===T&&(T=!0),void 0===x&&(x=!0),void 0===C&&(C=!0);var E=S.call(this)||this;return E.x=!0,E.y=!0,E.z=!0,E.x=T,E.y=x,E.z=C,E}return o(n,S),r([G.field],n.prototype,"x",void 0),r([G.field],n.prototype,"y",void 0),r([G.field],n.prototype,"z",void 0),r([M("engine.billboard",T.CLASS_ID.BILLBOARD)],n)}(G),ae=function(T){function e(){var S=null!==T&&T.apply(this,arguments)||this;return S.withCollisions=!0,S.isPointerBlocker=!0,S.visible=!0,S}return o(e,T),r([G.field],e.prototype,"withCollisions",void 0),r([G.field],e.prototype,"isPointerBlocker",void 0),r([G.field],e.prototype,"visible",void 0),e}(G),ue=function(S){function n(){return null!==S&&S.apply(this,arguments)||this}return o(n,S),r([G.field],n.prototype,"uvs",void 0),r([F("engine.shape",T.CLASS_ID.BOX_SHAPE)],n)}(ae),pe=function(S){function n(){return null!==S&&S.apply(this,arguments)||this}return o(n,S),r([F("engine.shape",T.CLASS_ID.SPHERE_SHAPE)],n)}(ae),le=function(S){function n(){return null!==S&&S.apply(this,arguments)||this}return o(n,S),r([G.field],n.prototype,"segments",void 0),r([G.field],n.prototype,"arc",void 0),r([F("engine.shape",T.CLASS_ID.CIRCLE_SHAPE)],n)}(ae),ce=function(S){function n(){var T=null!==S&&S.apply(this,arguments)||this;return T.width=1,T.height=1,T}return o(n,S),r([G.field],n.prototype,"width",void 0),r([G.field],n.prototype,"height",void 0),r([G.field],n.prototype,"uvs",void 0),r([F("engine.shape",T.CLASS_ID.PLANE_SHAPE)],n)}(ae),he=function(S){function n(){var T=null!==S&&S.apply(this,arguments)||this;return T.radiusTop=0,T.radiusBottom=1,T.segmentsHeight=1,T.segmentsRadial=36,T.openEnded=!1,T.radius=null,T.arc=360,T}return o(n,S),r([G.field],n.prototype,"radiusTop",void 0),r([G.field],n.prototype,"radiusBottom",void 0),r([G.field],n.prototype,"segmentsHeight",void 0),r([G.field],n.prototype,"segmentsRadial",void 0),r([G.field],n.prototype,"openEnded",void 0),r([G.field],n.prototype,"radius",void 0),r([G.field],n.prototype,"arc",void 0),r([F("engine.shape",T.CLASS_ID.CONE_SHAPE)],n)}(ae),de=function(S){function n(){var T=null!==S&&S.apply(this,arguments)||this;return T.radiusTop=1,T.radiusBottom=1,T.segmentsHeight=1,T.segmentsRadial=36,T.openEnded=!1,T.radius=null,T.arc=360,T}return o(n,S),r([G.field],n.prototype,"radiusTop",void 0),r([G.field],n.prototype,"radiusBottom",void 0),r([G.field],n.prototype,"segmentsHeight",void 0),r([G.field],n.prototype,"segmentsRadial",void 0),r([G.field],n.prototype,"openEnded",void 0),r([G.field],n.prototype,"radius",void 0),r([G.field],n.prototype,"arc",void 0),r([F("engine.shape",T.CLASS_ID.CYLINDER_SHAPE)],n)}(ae),fe=function(S){function n(T){var x=S.call(this)||this;return x.src=T,x}return o(n,S),r([ae.readonly],n.prototype,"src",void 0),r([F("engine.shape",T.CLASS_ID.GLTF_SHAPE)],n)}(ae);T.PictureFrameStyle=void 0,(oe=T.PictureFrameStyle||(T.PictureFrameStyle={}))[oe.Classic=0]="Classic",oe[oe.Baroque_Ornament=1]="Baroque_Ornament",oe[oe.Diamond_Ornament=2]="Diamond_Ornament",oe[oe.Minimal_Wide=3]="Minimal_Wide",oe[oe.Minimal_Grey=4]="Minimal_Grey",oe[oe.Blocky=5]="Blocky",oe[oe.Gold_Edges=6]="Gold_Edges",oe[oe.Gold_Carved=7]="Gold_Carved",oe[oe.Gold_Wide=8]="Gold_Wide",oe[oe.Gold_Rounded=9]="Gold_Rounded",oe[oe.Metal_Medium=10]="Metal_Medium",oe[oe.Metal_Wide=11]="Metal_Wide",oe[oe.Metal_Slim=12]="Metal_Slim",oe[oe.Metal_Rounded=13]="Metal_Rounded",oe[oe.Pins=14]="Pins",oe[oe.Minimal_Black=15]="Minimal_Black",oe[oe.Minimal_White=16]="Minimal_White",oe[oe.Tape=17]="Tape",oe[oe.Wood_Slim=18]="Wood_Slim",oe[oe.Wood_Wide=19]="Wood_Wide",oe[oe.Wood_Twigs=20]="Wood_Twigs",oe[oe.Canvas=21]="Canvas",oe[oe.None=22]="None";var ye,me=function(S){function n(x,C){void 0===C&&(C={});var E=S.call(this)||this;E.src=x;var A=new Bt(.6404918,.611472,.8584906),R=T.PictureFrameStyle.Classic;return"r"in C?A=C:null!=C&&(C.color&&(A=C.color),C.style&&(R=C.style)),E.color=A,E.style=R,E}return o(n,S),r([ae.readonly],n.prototype,"src",void 0),r([ae.readonly],n.prototype,"style",void 0),r([G.field],n.prototype,"color",void 0),r([F("engine.shape",T.CLASS_ID.NFT_SHAPE)],n)}(ae),ge=function(S){function n(T,x){var C=S.call(this)||this;if(C.src=T,x)for(var E in x)C[E]=x[E];return C}return o(n,S),r([G.readonly],n.prototype,"src",void 0),r([G.readonly],n.prototype,"samplingMode",void 0),r([G.readonly],n.prototype,"wrap",void 0),r([G.readonly],n.prototype,"hasAlpha",void 0),r([F("engine.texture",T.CLASS_ID.TEXTURE)],n)}(G),ve=function(S){function n(){var T=null!==S&&S.apply(this,arguments)||this;return T.states=[],T}return o(n,S),n.prototype.addClip=function(T){var S=this;return this.states.push(T),T.onChange((function(){S.dirty=!0})),T.owner=this,this},n.prototype.getClip=function(T){for(var S=0;S<this.states.length;S++){var x=this.states[S];if(x.clip===T)return x}var C=new Zt(T);return this.addClip(C),C},n.prototype.stop=function(T){if(T)T.playing=!1,T.shouldReset=!0;else for(var S=0;S<this.states.length;S++){var x=this.states[S];this.stop(x)}},n.prototype.play=function(T,S){void 0===S&&(S=!1);for(var x=0;x<this.states.length;x++){var C=this.states[x];C.layer===T.layer&&T!==C&&this.pause(C)}S&&(T.shouldReset=!0),T.playing=!0,T.dirty=!0,T.data.nonce=Math.random()},n.prototype.pause=function(T){if(T)T.playing=!1;else for(var S=0;S<this.states.length;S++){var x=this.states[S];this.pause(x)}},r([G.readonly],n.prototype,"states",void 0),r([M("engine.animator",T.CLASS_ID.ANIMATION)],n)}(ae),_e=function(S){function n(T){var x=S.call(this)||this;return x.src=T,x}return o(n,S),r([G.readonly],n.prototype,"src",void 0),r([F("engine.shape",T.CLASS_ID.OBJ_SHAPE)],n)}(ae),Te=function(S){function n(T){void 0===T&&(T="");var x=S.call(this)||this;return x.src=T,x}return o(n,S),r([G.readonly],n.prototype,"src",void 0),r([F("engine.font",T.CLASS_ID.FONT)],n)}(G);T.Fonts=void 0,(ye=T.Fonts||(T.Fonts={})).SanFrancisco="builtin:SF-UI-Text-Regular SDF",ye.SanFrancisco_Heavy="builtin:SF-UI-Text-Heavy SDF",ye.SanFrancisco_Semibold="builtin:SF-UI-Text-Semibold SDF",ye.LiberationSans="builtin:LiberationSans SDF",ye.SansSerif="SansSerif",ye.SansSerif_Heavy="SansSerif_Heavy",ye.SansSerif_Bold="SansSerif_Bold",ye.SansSerif_SemiBold="SansSerif_SemiBold";var Se,we=function(S){function n(T){var x=S.call(this)||this;return x.outlineWidth=0,x.outlineColor=new Bt(1,1,1),x.color=new Bt(1,1,1),x.fontSize=10,x.fontWeight="normal",x.opacity=1,x.value="",x.lineSpacing="0px",x.lineCount=0,x.resizeToFit=!1,x.textWrapping=!1,x.shadowBlur=0,x.shadowOffsetX=0,x.shadowOffsetY=0,x.shadowColor=new Bt(1,1,1),x.zIndex=0,x.hTextAlign="center",x.vTextAlign="center",x.width=1,x.height=1,x.paddingTop=0,x.paddingRight=0,x.paddingBottom=0,x.paddingLeft=0,x.isPickable=!1,x.billboard=!1,x.visible=!0,T&&(x.value=T),x}return o(n,S),r([G.field],n.prototype,"outlineWidth",void 0),r([G.field],n.prototype,"outlineColor",void 0),r([G.field],n.prototype,"color",void 0),r([G.field],n.prototype,"fontSize",void 0),r([G.field],n.prototype,"fontWeight",void 0),r([G.component],n.prototype,"font",void 0),r([G.field],n.prototype,"opacity",void 0),r([G.field],n.prototype,"value",void 0),r([G.field],n.prototype,"lineSpacing",void 0),r([G.field],n.prototype,"lineCount",void 0),r([G.field],n.prototype,"resizeToFit",void 0),r([G.field],n.prototype,"textWrapping",void 0),r([G.field],n.prototype,"shadowBlur",void 0),r([G.field],n.prototype,"shadowOffsetX",void 0),r([G.field],n.prototype,"shadowOffsetY",void 0),r([G.field],n.prototype,"shadowColor",void 0),r([G.field],n.prototype,"zIndex",void 0),r([G.field],n.prototype,"hTextAlign",void 0),r([G.field],n.prototype,"vTextAlign",void 0),r([G.field],n.prototype,"width",void 0),r([G.field],n.prototype,"height",void 0),r([G.field],n.prototype,"paddingTop",void 0),r([G.field],n.prototype,"paddingRight",void 0),r([G.field],n.prototype,"paddingBottom",void 0),r([G.field],n.prototype,"paddingLeft",void 0),r([G.field],n.prototype,"isPickable",void 0),r([G.field],n.prototype,"billboard",void 0),r([G.field],n.prototype,"visible",void 0),r([M("engine.text",T.CLASS_ID.TEXT_SHAPE)],n)}(G);T.TransparencyMode=void 0,(Se=T.TransparencyMode||(T.TransparencyMode={}))[Se.OPAQUE=0]="OPAQUE",Se[Se.ALPHA_TEST=1]="ALPHA_TEST",Se[Se.ALPHA_BLEND=2]="ALPHA_BLEND",Se[Se.ALPHA_TEST_AND_BLEND=3]="ALPHA_TEST_AND_BLEND",Se[Se.AUTO=4]="AUTO";var xe,be=function(S){function n(){var x=null!==S&&S.apply(this,arguments)||this;return x.alphaTest=.5,x.castShadows=!0,x.transparencyMode=T.TransparencyMode.AUTO,x}return o(n,S),r([G.field],n.prototype,"alphaTest",void 0),r([G.field],n.prototype,"albedoColor",void 0),r([G.field],n.prototype,"emissiveColor",void 0),r([G.field],n.prototype,"metallic",void 0),r([G.field],n.prototype,"roughness",void 0),r([G.field],n.prototype,"ambientColor",void 0),r([G.field],n.prototype,"reflectionColor",void 0),r([G.field],n.prototype,"reflectivityColor",void 0),r([G.field],n.prototype,"directIntensity",void 0),r([G.field],n.prototype,"microSurface",void 0),r([G.field],n.prototype,"emissiveIntensity",void 0),r([G.field],n.prototype,"environmentIntensity",void 0),r([G.field],n.prototype,"specularIntensity",void 0),r([G.component],n.prototype,"albedoTexture",void 0),r([G.component],n.prototype,"alphaTexture",void 0),r([G.component],n.prototype,"emissiveTexture",void 0),r([G.component],n.prototype,"bumpTexture",void 0),r([G.component],n.prototype,"refractionTexture",void 0),r([G.field],n.prototype,"castShadows",void 0),r([G.field],n.prototype,"transparencyMode",void 0),r([F("engine.material",T.CLASS_ID.PBR_MATERIAL)],n)}(G),Ce=function(S){function n(){var T=null!==S&&S.apply(this,arguments)||this;return T.alphaTest=.5,T.castShadows=!0,T}return o(n,S),r([G.component],n.prototype,"texture",void 0),r([G.field],n.prototype,"alphaTest",void 0),r([G.field],n.prototype,"castShadows",void 0),r([F("engine.material",T.CLASS_ID.BASIC_MATERIAL)],n)}(G),Ee=function(T){function e(S){var x=T.call(this)||this;if(x.uuid=f("UUID"),!S||!("apply"in S)||!("call"in S))throw new Error("Callback is not a function");return x.callback=S,x}return o(e,T),e.uuidEvent=function(T,S){if(delete T[S]){var x=S+"_"+Math.random();T[x]=void 0,Object.defineProperty(T,x,i(i({},Object.getOwnPropertyDescriptor(T,x)),{enumerable:!1})),Object.defineProperty(T,S.toString(),{get:function(){return this[x]},set:function(T){var C=this[x];if(T){if(!(T instanceof e))throw new Error("value is not an OnUUIDEvent");this.data[S]=T.uuid}else this.data[S]=null;if(this[x]=T,T!==C){this.dirty=!0;for(var E=0;E<this.subscriptions.length;E++)this.subscriptions[E](S,T,C)}},enumerable:!0})}},e.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type}},r([G.field],e.prototype,"callback",void 0),e}(G),Ae=function(S){function n(){var x=null!==S&&S.apply(this,arguments)||this;return x.button=T.ActionButton.ANY,x.hoverText="Interact",x.distance=10,x.showFeedback=!0,x}return o(n,S),n.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type,button:this.button,hoverText:this.hoverText,distance:this.distance,showFeedback:this.showFeedback}},r([G.field],n.prototype,"button",void 0),r([G.field],n.prototype,"hoverText",void 0),r([G.field],n.prototype,"distance",void 0),r([G.field],n.prototype,"showFeedback",void 0),n}(Ee),Re=function(S){function n(){var T=null!==S&&S.apply(this,arguments)||this;return T.type="onPointerLock",T}return o(n,S),r([G.readonly],n.prototype,"type",void 0),r([M("engine.onPointerLock",T.CLASS_ID.UUID_CALLBACK)],n)}(Ee),Ie=function(S){function n(){var T=null!==S&&S.apply(this,arguments)||this;return T.type="onAnimationEnd",T}return o(n,S),r([G.readonly],n.prototype,"type",void 0),r([M("engine.onAnimationEnd",T.CLASS_ID.UUID_CALLBACK)],n)}(Ee),ze=function(S){function n(){return null!==S&&S.apply(this,arguments)||this}return o(n,S),r([M("engine.smartItem",T.CLASS_ID.SMART_ITEM)],n)}(G),Pe=function(S){function n(T){var x=S.call(this)||this;return x.url=T,x}return o(n,S),r([G.readonly],n.prototype,"url",void 0),r([F("engine.VideoClip",T.CLASS_ID.VIDEO_CLIP)],n)}(G);T.VideoStatus=void 0,(xe=T.VideoStatus||(T.VideoStatus={}))[xe.NONE=0]="NONE",xe[xe.ERROR=1]="ERROR",xe[xe.LOADING=2]="LOADING",xe[xe.READY=3]="READY",xe[xe.PLAYING=4]="PLAYING",xe[xe.BUFFERING=5]="BUFFERING";var Oe,Fe=function(S){function n(x,C){var E=S.call(this)||this;if(E.volume=1,E.playbackRate=1,E.loop=!1,E.seek=-1,E._position=-1,E._videoLength=-1,E._status=T.VideoStatus.NONE,E.playing=!1,!(x instanceof Pe))throw new Error("Trying to create VideoTexture(VideoClip) with an invalid VideoClip");if(E.videoClipId=D(x),C)for(var A in C)E[A]=C[A];return E}return o(n,S),n.prototype.play=function(){this.playing=!0},n.prototype.pause=function(){this.playing=!1},n.prototype.reset=function(){this.seekTime(0),this.pause()},n.prototype.seekTime=function(T){this.seek=T,this.dirty=!0,this.data.nonce=Math.random()},n.prototype.toJSON=function(){if(this.seek>=0){var T=JSON.parse(JSON.stringify(S.prototype.toJSON.call(this)));return this.seek=-1,T}return S.prototype.toJSON.call(this)},n.prototype.update=function(S){S.videoClipId==this.videoClipId&&(this._status=S.videoStatus||T.VideoStatus.NONE,this._videoLength=S.totalVideoLength,this._position=S.currentOffset)},Object.defineProperty(n.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"videoLength",{get:function(){return this._videoLength},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),r([G.readonly],n.prototype,"videoClipId",void 0),r([G.readonly],n.prototype,"samplingMode",void 0),r([G.readonly],n.prototype,"wrap",void 0),r([G.field],n.prototype,"volume",void 0),r([G.field],n.prototype,"playbackRate",void 0),r([G.field],n.prototype,"loop",void 0),r([G.field],n.prototype,"seek",void 0),r([G.field],n.prototype,"playing",void 0),r([F("engine.VideoTexture",T.CLASS_ID.VIDEO_TEXTURE)],n)}(G),Me=function(){function e(){var S=this;this.position=new Mt,this.rotation=new Ft,this.feetPosition=new Mt,this.worldPosition=new Mt,this.lastEventPosition={x:0,y:0,z:0},this.lastEventWorldPosition={x:0,y:0,z:0},this.lastEventRotation={x:0,y:0,z:0,w:1},this._playerHeight=1.6,this._cameraMode=T.CameraMode.FirstPerson,"undefined"!=typeof dcl&&(dcl.subscribe("positionChanged"),dcl.subscribe("rotationChanged"),dcl.subscribe("cameraModeChanged"),dcl.onEvent((function(T){switch(T.type){case"positionChanged":S.positionChanged(T.data);break;case"rotationChanged":S.rotationChanged(T.data);break;case"cameraModeChanged":S.cameraModeChanged(T.data)}}))),Object.defineProperty(this.position,"x",{get:function(){return S.lastEventPosition.x}}),Object.defineProperty(this.position,"y",{get:function(){return S.lastEventPosition.y}}),Object.defineProperty(this.position,"z",{get:function(){return S.lastEventPosition.z}}),Object.defineProperty(this.worldPosition,"x",{get:function(){return S.lastEventWorldPosition.x}}),Object.defineProperty(this.worldPosition,"y",{get:function(){return S.lastEventWorldPosition.y}}),Object.defineProperty(this.worldPosition,"z",{get:function(){return S.lastEventWorldPosition.z}}),Object.defineProperty(this.feetPosition,"x",{get:function(){return S.lastEventPosition.x}}),Object.defineProperty(this.feetPosition,"y",{get:function(){return S.lastEventPosition.y-S.playerHeight}}),Object.defineProperty(this.feetPosition,"z",{get:function(){return S.lastEventPosition.z}}),Object.defineProperty(this.rotation,"x",{get:function(){return S.lastEventRotation.x}}),Object.defineProperty(this.rotation,"y",{get:function(){return S.lastEventRotation.y}}),Object.defineProperty(this.rotation,"z",{get:function(){return S.lastEventRotation.z}}),Object.defineProperty(this.rotation,"w",{get:function(){return S.lastEventRotation.w}})}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playerHeight",{get:function(){return this._playerHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cameraMode",{get:function(){return this._cameraMode},enumerable:!1,configurable:!0}),e.prototype.positionChanged=function(T){this.lastEventPosition=T.position,this.lastEventWorldPosition=T.cameraPosition,this._playerHeight=T.playerHeight},e.prototype.rotationChanged=function(T){this.lastEventRotation=T.quaternion},e.prototype.cameraModeChanged=function(T){this._cameraMode=T.cameraMode},e}();!function(T){T.HitFirst="rqhf",T.HitAll="rqha"}(Oe||(Oe={}));var Ne,Le=function(){function t(){this.queries={}}return Object.defineProperty(t,"instance",{get:function(){return t.ensureInstance(),t._instance},enumerable:!1,configurable:!0}),t.ensureInstance=function(){t._instance||(t._instance=new t)},t.prototype.getRayFromCamera=function(T){var S=Me.instance.rotation,x=Ot.Identity();S.toRotationMatrix(x);var C=Mt.TransformCoordinates(Mt.Forward(),x);return{origin:Me.instance.position,direction:C,distance:T}},t.prototype.getRayFromPositions=function(T,S){var x=S.subtract(T),C=x.length();return{origin:T,direction:x.normalize(),distance:C}},t.prototype.hitFirst=function(T,S,x){var C="number"==typeof x?Oe.HitFirst+x:y();this.queries[C]=S,"undefined"!=typeof dcl&&dcl.query("raycast",{queryId:C,queryType:"HitFirst",ray:T})},t.prototype.hitAll=function(T,S,x){var C="number"==typeof x?Oe.HitAll+x:y();this.queries[C]=S,"undefined"!=typeof dcl&&dcl.query("raycast",{queryId:C,queryType:"HitAll",ray:T})},t.prototype.hitFirstAvatar=function(T,S){d("not implemented yet")},t.prototype.hitAllAvatars=function(T,S){d("not implemented yet")},t.prototype.handleRaycastHitFirstResponse=function(T){this.queries[T.payload.queryId](T.payload.payload),delete this.queries[T.payload.queryId]},t.prototype.handleRaycastHitAllResponse=function(T){this.queries[T.payload.queryId](T.payload.payload),delete this.queries[T.payload.queryId]},t}(),De=function(){function t(){}return t.prototype.activate=function(T){T.eventManager.addListener(rt,this,(function(T){"HitFirst"===T.payload.queryType?Le.instance.handleRaycastHitFirstResponse(T):"HitAll"===T.payload.queryType&&Le.instance.handleRaycastHitAllResponse(T)})),"undefined"!=typeof dcl&&dcl.subscribe("raycastResponse")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("raycastResponse")},t}(),qe=function(){function t(){}return t.prototype.activate=function(T){T.eventManager.addListener(it,this,(function(T){ne.instance.handlePointerEvent(T.payload)})),"undefined"!=typeof dcl&&(dcl.subscribe("pointerUp"),dcl.subscribe("pointerDown"),dcl.subscribe("pointerEvent"))},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&(dcl.unsubscribe("pointerUp"),dcl.unsubscribe("pointerDown"),dcl.unsubscribe("pointerEvent"))},t}(),Ue=function(){function t(){this.handlerMap={}}return t.prototype.activate=function(T){T.eventManager.addListener(ot,this,this.handleEvent),T.eventManager.addListener(I,this,this.componentAdded),T.eventManager.addListener(R,this,this.componentRemoved),"undefined"!=typeof dcl&&dcl.subscribe("uuidEvent")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("uuidEvent")},t.prototype.onAddEntity=function(T){for(var S in T.components){var x=T.components[S];x instanceof Ee&&(this.handlerMap[x.uuid]=x)}},t.prototype.onRemoveEntity=function(T){for(var S in T.components){var x=T.components[S];x instanceof Ee&&delete this.handlerMap[x.uuid]}},t.prototype.componentAdded=function(T){if(T.entity.isAddedToEngine()){var S=T.entity.components[T.componentName];S instanceof Ee&&(this.handlerMap[S.uuid]=S)}},t.prototype.componentRemoved=function(T){T.entity.isAddedToEngine()&&T.component instanceof Ee&&delete this.handlerMap[T.component.uuid]},t.prototype.handleEvent=function(T){if(T.uuid in this.handlerMap){var S=this.handlerMap[T.uuid];S&&S.callback&&"call"in S.callback&&S.callback(T.payload)}},t}(),ke=new De,Be=new qe,We=new Ue,He=function(S){function n(T){var x=S.call(this)||this;return x.loop=!1,x.volume=1,x.url=T,x}return o(n,S),r([G.readonly],n.prototype,"url",void 0),r([G.field],n.prototype,"loop",void 0),r([G.field],n.prototype,"loadingCompleteEventId",void 0),r([G.field],n.prototype,"volume",void 0),r([F("engine.AudioClip",T.CLASS_ID.AUDIO_CLIP)],n)}(G),Ve=function(S){function n(T){var x=S.call(this)||this;if(x.audioClip=T,x.loop=!1,x.volume=1,x.playing=!1,x.pitch=1,x.playedAtTimestamp=Date.now(),!(T instanceof He))throw new Error("Trying to create AudioSource(AudioClip) with an invalid AudioClip");return x.audioClipId=D(T),x}return o(n,S),n.prototype.playOnce=function(){return this.playing=!0,this.dirty=!0,this.playedAtTimestamp=Date.now(),this.data.nonce=Math.random(),this},r([G.readonly],n.prototype,"audioClipId",void 0),r([G.field],n.prototype,"loop",void 0),r([G.field],n.prototype,"volume",void 0),r([G.field],n.prototype,"playing",void 0),r([G.field],n.prototype,"pitch",void 0),r([G.field],n.prototype,"playedAtTimestamp",void 0),r([M("engine.AudioSource",T.CLASS_ID.AUDIO_SOURCE)],n)}(G),Ge=function(S){function n(T){var x=S.call(this)||this;return x.playing=!1,x.volume=1,x.url=T,x.playing=!0,x}return o(n,S),r([G.readonly],n.prototype,"url",void 0),r([G.field],n.prototype,"playing",void 0),r([G.field],n.prototype,"volume",void 0),r([M("engine.AudioStream",T.CLASS_ID.AUDIO_STREAM)],n)}(G);T.Gizmo=void 0,(Ne=T.Gizmo||(T.Gizmo={})).MOVE="MOVE",Ne.ROTATE="ROTATE",Ne.SCALE="SCALE",Ne.NONE="NONE";var je,Ye=function(S){function n(){var T=null!==S&&S.apply(this,arguments)||this;return T.type="gizmoEvent",T}return o(n,S),r([G.readonly],n.prototype,"type",void 0),r([M("engine.gizmoEvent",T.CLASS_ID.UUID_CALLBACK)],n)}(Ee),Xe=function(S){function n(){var T=null!==S&&S.apply(this,arguments)||this;return T.position=!0,T.rotation=!0,T.scale=!0,T.cycle=!0,T.localReference=!1,T}return o(n,S),r([G.field],n.prototype,"position",void 0),r([G.field],n.prototype,"rotation",void 0),r([G.field],n.prototype,"scale",void 0),r([G.field],n.prototype,"cycle",void 0),r([G.field],n.prototype,"selectedGizmo",void 0),r([G.field],n.prototype,"localReference",void 0),r([M("engine.gizmos",T.CLASS_ID.GIZMOS)],n)}(G),Qe=function(T){function e(S){var x=T.call(this)||this;return x.name=null,x.visible=!0,x.opacity=1,x.hAlign="center",x.vAlign="center",x.width="100px",x.height="50px",x.positionX="0px",x.positionY="0px",x.isPointerBlocker=!0,S&&(x._parent=S,x.data.parentComponent=D(S)),x}return o(e,T),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentComponent",{get:function(){return this.data.parentComponent},enumerable:!1,configurable:!0}),r([G.field],e.prototype,"name",void 0),r([G.field],e.prototype,"visible",void 0),r([G.field],e.prototype,"opacity",void 0),r([G.field],e.prototype,"hAlign",void 0),r([G.field],e.prototype,"vAlign",void 0),r([G.uiValue],e.prototype,"width",void 0),r([G.uiValue],e.prototype,"height",void 0),r([G.uiValue],e.prototype,"positionX",void 0),r([G.uiValue],e.prototype,"positionY",void 0),r([G.field],e.prototype,"isPointerBlocker",void 0),e}(G),Ze=function(S){function n(){return S.call(this,null)||this}return o(n,S),r([F("engine.shape",T.CLASS_ID.UI_FULLSCREEN_SHAPE)],n)}(Qe),Ke=function(S){function n(){return S.call(this,null)||this}return o(n,S),r([F("engine.shape",T.CLASS_ID.UI_WORLD_SPACE_SHAPE)],n)}(Qe),Je=function(S){function n(){return S.call(this,null)||this}return o(n,S),r([F("engine.shape",T.CLASS_ID.UI_SCREEN_SPACE_SHAPE)],n)}(Qe),$e=function(S){function n(){var T=null!==S&&S.apply(this,arguments)||this;return T.adaptWidth=!1,T.adaptHeight=!1,T.thickness=0,T.color=kt.Clear(),T.alignmentUsesSize=!0,T}return o(n,S),r([G.field],n.prototype,"adaptWidth",void 0),r([G.field],n.prototype,"adaptHeight",void 0),r([G.field],n.prototype,"thickness",void 0),r([G.field],n.prototype,"color",void 0),r([G.field],n.prototype,"alignmentUsesSize",void 0),r([F("engine.shape",T.CLASS_ID.UI_CONTAINER_RECT)],n)}(Qe);T.UIStackOrientation=void 0,(je=T.UIStackOrientation||(T.UIStackOrientation={}))[je.VERTICAL=0]="VERTICAL",je[je.HORIZONTAL=1]="HORIZONTAL";var tn=function(S){function n(){var x=null!==S&&S.apply(this,arguments)||this;return x.adaptWidth=!0,x.adaptHeight=!0,x.color=kt.Clear(),x.stackOrientation=T.UIStackOrientation.VERTICAL,x.spacing=0,x}return o(n,S),r([G.field],n.prototype,"adaptWidth",void 0),r([G.field],n.prototype,"adaptHeight",void 0),r([G.field],n.prototype,"color",void 0),r([G.field],n.prototype,"stackOrientation",void 0),r([G.field],n.prototype,"spacing",void 0),r([F("engine.shape",T.CLASS_ID.UI_CONTAINER_STACK)],n)}(Qe),en=function(S){function n(){var T=null!==S&&S.apply(this,arguments)||this;return T.fontSize=10,T.fontWeight="normal",T.thickness=0,T.cornerRadius=0,T.color=kt.White(),T.background=kt.White(),T.paddingTop=0,T.paddingRight=0,T.paddingBottom=0,T.paddingLeft=0,T.shadowBlur=0,T.shadowOffsetX=0,T.shadowOffsetY=0,T.shadowColor=kt.Black(),T.text="button",T}return o(n,S),r([G.field],n.prototype,"fontSize",void 0),r([G.field],n.prototype,"fontWeight",void 0),r([G.field],n.prototype,"thickness",void 0),r([G.field],n.prototype,"cornerRadius",void 0),r([G.field],n.prototype,"color",void 0),r([G.field],n.prototype,"background",void 0),r([G.field],n.prototype,"paddingTop",void 0),r([G.field],n.prototype,"paddingRight",void 0),r([G.field],n.prototype,"paddingBottom",void 0),r([G.field],n.prototype,"paddingLeft",void 0),r([G.field],n.prototype,"shadowBlur",void 0),r([G.field],n.prototype,"shadowOffsetX",void 0),r([G.field],n.prototype,"shadowOffsetY",void 0),r([G.field],n.prototype,"shadowColor",void 0),r([G.field],n.prototype,"text",void 0),r([F("engine.shape",T.CLASS_ID.UI_BUTTON_SHAPE)],n)}(Qe),nn=function(S){function n(){var T=null!==S&&S.apply(this,arguments)||this;return T.outlineWidth=0,T.outlineColor=kt.White(),T.color=kt.White(),T.fontSize=10,T.fontAutoSize=!1,T.fontWeight="normal",T.value="",T.lineSpacing=0,T.lineCount=0,T.adaptWidth=!1,T.adaptHeight=!1,T.textWrapping=!1,T.shadowBlur=0,T.shadowOffsetX=0,T.shadowOffsetY=0,T.shadowColor=kt.Black(),T.hTextAlign="left",T.vTextAlign="bottom",T.paddingTop=0,T.paddingRight=0,T.paddingBottom=0,T.paddingLeft=0,T}return o(n,S),r([G.field],n.prototype,"outlineWidth",void 0),r([G.field],n.prototype,"outlineColor",void 0),r([G.field],n.prototype,"color",void 0),r([G.field],n.prototype,"fontSize",void 0),r([G.field],n.prototype,"fontAutoSize",void 0),r([G.field],n.prototype,"fontWeight",void 0),r([G.component],n.prototype,"font",void 0),r([G.field],n.prototype,"value",void 0),r([G.field],n.prototype,"lineSpacing",void 0),r([G.field],n.prototype,"lineCount",void 0),r([G.field],n.prototype,"adaptWidth",void 0),r([G.field],n.prototype,"adaptHeight",void 0),r([G.field],n.prototype,"textWrapping",void 0),r([G.field],n.prototype,"shadowBlur",void 0),r([G.field],n.prototype,"shadowOffsetX",void 0),r([G.field],n.prototype,"shadowOffsetY",void 0),r([G.field],n.prototype,"shadowColor",void 0),r([G.field],n.prototype,"hTextAlign",void 0),r([G.field],n.prototype,"vTextAlign",void 0),r([G.field],n.prototype,"paddingTop",void 0),r([G.field],n.prototype,"paddingRight",void 0),r([G.field],n.prototype,"paddingBottom",void 0),r([G.field],n.prototype,"paddingLeft",void 0),r([F("engine.shape",T.CLASS_ID.UI_TEXT_SHAPE)],n)}(Qe),on=function(S){function n(){var T=null!==S&&S.apply(this,arguments)||this;return T.outlineWidth=0,T.outlineColor=kt.Black(),T.color=kt.Clear(),T.thickness=1,T.fontSize=10,T.fontWeight="normal",T.value="",T.placeholderColor=kt.White(),T.placeholder="",T.margin=10,T.maxWidth=100,T.hTextAlign="left",T.vTextAlign="bottom",T.autoStretchWidth=!0,T.background=kt.Black(),T.focusedBackground=kt.Black(),T.textWrapping=!1,T.shadowBlur=0,T.shadowOffsetX=0,T.shadowOffsetY=0,T.shadowColor=kt.White(),T.paddingTop=0,T.paddingRight=0,T.paddingBottom=0,T.paddingLeft=0,T.onTextSubmit=null,T.onChanged=null,T.onFocus=null,T.onBlur=null,T}return o(n,S),r([G.field],n.prototype,"outlineWidth",void 0),r([G.field],n.prototype,"outlineColor",void 0),r([G.field],n.prototype,"color",void 0),r([G.field],n.prototype,"thickness",void 0),r([G.field],n.prototype,"fontSize",void 0),r([G.field],n.prototype,"fontWeight",void 0),r([G.component],n.prototype,"font",void 0),r([G.field],n.prototype,"value",void 0),r([G.field],n.prototype,"placeholderColor",void 0),r([G.field],n.prototype,"placeholder",void 0),r([G.field],n.prototype,"margin",void 0),r([G.field],n.prototype,"maxWidth",void 0),r([G.field],n.prototype,"hTextAlign",void 0),r([G.field],n.prototype,"vTextAlign",void 0),r([G.field],n.prototype,"autoStretchWidth",void 0),r([G.field],n.prototype,"background",void 0),r([G.field],n.prototype,"focusedBackground",void 0),r([G.field],n.prototype,"textWrapping",void 0),r([G.field],n.prototype,"shadowBlur",void 0),r([G.field],n.prototype,"shadowOffsetX",void 0),r([G.field],n.prototype,"shadowOffsetY",void 0),r([G.field],n.prototype,"shadowColor",void 0),r([G.field],n.prototype,"paddingTop",void 0),r([G.field],n.prototype,"paddingRight",void 0),r([G.field],n.prototype,"paddingBottom",void 0),r([G.field],n.prototype,"paddingLeft",void 0),r([Ee.uuidEvent],n.prototype,"onTextSubmit",void 0),r([Ee.uuidEvent],n.prototype,"onChanged",void 0),r([Ee.uuidEvent],n.prototype,"onFocus",void 0),r([Ee.uuidEvent],n.prototype,"onBlur",void 0),r([F("engine.shape",T.CLASS_ID.UI_INPUT_TEXT_SHAPE)],n)}(Qe),rn=function(S){function n(T,x){var C=S.call(this,T)||this;return C.sourceLeft=0,C.sourceTop=0,C.sourceWidth=1,C.sourceHeight=1,C.paddingTop=0,C.paddingRight=0,C.paddingBottom=0,C.paddingLeft=0,C.sizeInPixels=!0,C.onClick=null,C.source=x,C}return o(n,S),r([G.field],n.prototype,"sourceLeft",void 0),r([G.field],n.prototype,"sourceTop",void 0),r([G.field],n.prototype,"sourceWidth",void 0),r([G.field],n.prototype,"sourceHeight",void 0),r([G.component],n.prototype,"source",void 0),r([G.field],n.prototype,"paddingTop",void 0),r([G.field],n.prototype,"paddingRight",void 0),r([G.field],n.prototype,"paddingBottom",void 0),r([G.field],n.prototype,"paddingLeft",void 0),r([G.field],n.prototype,"sizeInPixels",void 0),r([Ee.uuidEvent],n.prototype,"onClick",void 0),r([F("engine.shape",T.CLASS_ID.UI_IMAGE_SHAPE)],n)}(Qe),sn=function(S){function n(){var T=null!==S&&S.apply(this,arguments)||this;return T.valueX=0,T.valueY=0,T.borderColor=kt.White(),T.backgroundColor=kt.Clear(),T.isHorizontal=!1,T.isVertical=!1,T.paddingTop=0,T.paddingRight=0,T.paddingBottom=0,T.paddingLeft=0,T.onChanged=null,T}return o(n,S),r([G.field],n.prototype,"valueX",void 0),r([G.field],n.prototype,"valueY",void 0),r([G.field],n.prototype,"borderColor",void 0),r([G.field],n.prototype,"backgroundColor",void 0),r([G.field],n.prototype,"isHorizontal",void 0),r([G.field],n.prototype,"isVertical",void 0),r([G.field],n.prototype,"paddingTop",void 0),r([G.field],n.prototype,"paddingRight",void 0),r([G.field],n.prototype,"paddingBottom",void 0),r([G.field],n.prototype,"paddingLeft",void 0),r([Ee.uuidEvent],n.prototype,"onChanged",void 0),r([F("engine.shape",T.CLASS_ID.UI_SLIDER_SHAPE)],n)}(Qe),an=function(S){function n(){var T=null!==S&&S.apply(this,arguments)||this;return T.useDummyModel=!1,T.talking=!1,T}var x;return o(n,S),x=n,n.Dummy=function(){var T=new x;return T.useDummyModel=!0,T},r([G.field],n.prototype,"id",void 0),r([G.field],n.prototype,"name",void 0),r([G.field],n.prototype,"expressionTriggerId",void 0),r([G.field],n.prototype,"expressionTriggerTimestamp",void 0),r([G.field],n.prototype,"bodyShape",void 0),r([G.field],n.prototype,"wearables",void 0),r([G.field],n.prototype,"skinColor",void 0),r([G.field],n.prototype,"hairColor",void 0),r([G.field],n.prototype,"eyeColor",void 0),r([G.field],n.prototype,"useDummyModel",void 0),r([G.field],n.prototype,"talking",void 0),x=r([M("engine.avatarShape",T.CLASS_ID.AVATAR_SHAPE)],n)}(G),un=function(S){function n(T){var x=S.call(this,T)||this;return x.type="onFocus",We.handlerMap[x.uuid]=x,x}return o(n,S),r([G.readonly],n.prototype,"type",void 0),r([M("engine.onFocus",T.CLASS_ID.UUID_CALLBACK)],n)}(Ee),pn=function(S){function n(T){var x=S.call(this,T)||this;return x.type="onTextSubmit",We.handlerMap[x.uuid]=x,x}return o(n,S),r([G.readonly],n.prototype,"type",void 0),r([M("engine.onTextSubmit",T.CLASS_ID.UUID_CALLBACK)],n)}(Ee),ln=function(S){function n(T){var x=S.call(this,T)||this;return x.type="onBlur",We.handlerMap[x.uuid]=x,x}return o(n,S),r([G.readonly],n.prototype,"type",void 0),r([M("engine.onBlur",T.CLASS_ID.UUID_CALLBACK)],n)}(Ee),cn=function(S){function n(T){var x=S.call(this,T)||this;return x.type="onEnter",We.handlerMap[x.uuid]=x,x}return o(n,S),r([G.readonly],n.prototype,"type",void 0),r([M("engine.onEnter",T.CLASS_ID.UUID_CALLBACK)],n)}(Ee),hn=function(S){function n(T){var x=S.call(this,T)||this;return x.type="onChange",We.handlerMap[x.uuid]=x,x}return o(n,S),r([G.readonly],n.prototype,"type",void 0),r([M("engine.onChange",T.CLASS_ID.UUID_CALLBACK)],n)}(Ee),dn=function(S){function n(T,x){var C=S.call(this,T)||this;return C.type="onClick",We.handlerMap[C.uuid]=C,x&&(C.showFeedback=!(!1===x.showFeedback),x.button&&(C.button=x.button),x.hoverText&&(C.hoverText=x.hoverText),x.distance&&(C.distance=x.distance)),C}return o(n,S),r([G.readonly],n.prototype,"type",void 0),r([M("engine.onClick",T.CLASS_ID.UUID_CALLBACK)],n)}(Ae),yn=function(S){function n(T,x){var C=S.call(this,T)||this;return C.type="pointerDown",We.handlerMap[C.uuid]=C,x&&(C.showFeedback=!(!1===x.showFeedback),x.button&&(C.button=x.button),x.hoverText&&(C.hoverText=x.hoverText),x.distance&&(C.distance=x.distance)),C}return o(n,S),r([G.readonly],n.prototype,"type",void 0),r([M("engine.pointerDown",T.CLASS_ID.UUID_CALLBACK)],n)}(Ae),mn=function(S){function n(T,x){var C=S.call(this,T)||this;return C.type="pointerUp",We.handlerMap[C.uuid]=C,x&&(C.showFeedback=!(!1===x.showFeedback),x.button&&(C.button=x.button),x.hoverText&&(C.hoverText=x.hoverText),x.distance&&(C.distance=x.distance)),C}return o(n,S),r([G.readonly],n.prototype,"type",void 0),r([M("engine.pointerUp",T.CLASS_ID.UUID_CALLBACK)],n)}(Ae),gn=null,vn=null,_n=null;function fn(){return _n||(_n=new nt),_n}var Tn=function(){function t(){var T=this;this.messageQueue=[],this.connected=!1,this.flushing=!1,function(){if(!vn){(vn=dcl.loadModule("@decentraland/CommunicationsController",{})).then((function(T){gn=T}));var T=fn();dcl.subscribe("comms"),dcl.onEvent((function(S){"comms"===S.type&&T.notifyObservers(S.data)}))}return vn}().then((function(S){T.connected=!0,T.flush()}))}return t.prototype.on=function(T,S){return fn().add((function(x){try{var C=JSON.parse(x.message);C.message===T&&S(C.payload,x.sender)}catch(x){dcl.error("Error parsing comms message "+(x.message||""),x)}}))},t.prototype.sendRaw=function(T){this.messageQueue.push(T),this.connected&&this.flush()},t.prototype.emit=function(T,S){var x=JSON.stringify({message:T,payload:S});this.sendRaw(x),fn().notifyObservers({message:x,sender:"self"})},t.prototype.flush=function(){var T=this;if(0!==this.messageQueue.length&&this.connected&&gn&&!this.flushing){var S=this.messageQueue.shift();this.flushing=!0,dcl.callRpc(gn.rpcHandle,"send",[S]).then((function(S){T.flushing=!1,T.flush()}),(function(S){T.flushing=!1,l("Error flushing MessageBus",S)}))}},t}(),Sn=new X("scene");Sn.uuid="0";var wn=new Q(Sn);F.engine=wn,"undefined"!=typeof dcl&&(wn.addSystem(new _t(dcl),1/0),ct(dcl)),wn.addSystem(We),wn.addSystem(Be),wn.addSystem(ke),T.AVATAR_OBSERVABLE="AVATAR_OBSERVABLE",T.Angle=Lt,T.AnimationState=Zt,T.Animator=ve,T.Arc2=zt,T.Attachable=S,T.AudioClip=He,T.AudioSource=Ve,T.AudioStream=Ge,T.AvatarModifierArea=re,T.AvatarShape=an,T.Axis=qt,T.BasicMaterial=Ce,T.BezierCurve=Ut,T.Billboard=se,T.BoxShape=ue,T.Camera=Me,T.CircleShape=le,T.Color3=Bt,T.Color4=kt,T.Component=M,T.ComponentAdded=I,T.ComponentGroup=j,T.ComponentRemoved=R,T.ConeShape=he,T.Curve3=Wt,T.CylinderShape=de,T.DEG2RAD=At,T.DisposableComponent=F,T.DisposableComponentCreated=W,T.DisposableComponentRemoved=H,T.DisposableComponentUpdated=V,T.Engine=Q,T.Entity=X,T.Epsilon=Et,T.EventConstructor=w,T.EventManager=E,T.Font=Te,T.Frustum=Vt,T.GLTFShape=fe,T.Gizmos=Xe,T.GlobalPointerDown=te,T.GlobalPointerUp=ee,T.Input=ne,T.Material=be,T.MathTmp=Nt,T.Matrix=Ot,T.MessageBus=Tn,T.MultiObserver=et,T.NFTShape=me,T.OBJShape=_e,T.Observable=nt,T.ObservableComponent=G,T.Observer=Y,T.ObserverEventState=$,T.OnAnimationEnd=Ie,T.OnBlur=ln,T.OnChanged=hn,T.OnClick=dn,T.OnEnter=cn,T.OnFocus=un,T.OnGizmoEvent=Ye,T.OnPointerDown=yn,T.OnPointerLock=Re,T.OnPointerUUIDEvent=Ae,T.OnPointerUp=mn,T.OnTextSubmit=pn,T.OnUUIDEvent=Ee,T.ParentChanged=z,T.Path2=Gt,T.Path3D=jt,T.PhysicsCast=Le,T.Plane=Ht,T.PlaneShape=ce,T.PointerEvent=it,T.PointerEventComponent=Yt,T.PointerEventSystem=qe,T.Quaternion=Ft,T.RAD2DEG=Rt,T.RaycastEventSystem=De,T.RaycastResponse=rt,T.Scalar=It,T.Shape=ae,T.Size=Xt,T.SmartItem=ze,T.SphereShape=pe,T.Subscription=Jt,T.TextShape=we,T.Texture=ge,T.ToGammaSpace=bt,T.ToLinearSpace=Ct,T.Transform=ie,T.UIButton=en,T.UICanvas=Je,T.UIContainerRect=$e,T.UIContainerStack=tn,T.UIFullScreen=Ze,T.UIImage=rn,T.UIInputText=on,T.UIScrollRect=sn,T.UIShape=Qe,T.UIText=nn,T.UIValue=P,T.UIWorldSpace=Ke,T.UUIDEvent=ot,T.UUIDEventSystem=Ue,T.Vector2=Dt,T.Vector3=Mt,T.Vector4=Pt,T.VideoClip=Pe,T.VideoTexture=Fe,T._initEventObservables=ct,T.buildArray=v,T.engine=wn,T.error=l,T.executeTask=q,T.getComponentClassId=N,T.getComponentId=D,T.getComponentName=L,T.getMessageObserver=fn,T.isDisposableComponent=B,T.log=d,T.newId=f,T.onCameraModeChangedObservable=st,T.onEnterScene=pt,T.onEnterSceneObservable=ut,T.onIdleStateChangedObservable=at,T.onLeaveScene=ht,T.onLeaveSceneObservable=lt,T.onPlayerExpressionObservable=ft,T.onProfileChanged=mt,T.onSceneReadyObservable=dt,T.onVideoEvent=yt,T.openExternalURL=function(T){"undefined"!=typeof dcl?dcl.openExternalUrl(T):l("ERROR: openExternalURL dcl is undefined")},T.openNFTDialog=function(T,S){if(void 0===S&&(S=null),"undefined"!=typeof dcl){var x=T.match(/ethereum:\/\/(.+)\/(.+)/);if(!x||x.length<3)return;dcl.openNFTDialog(x[1],x[2],S)}else l("ERROR: openNFTDialog dcl is undefined")},T.pointerEventSystem=Be,T.raycastEventSystem=ke,T.teleportTo=function(T){var S;S=[T],void 0===K&&"undefined"!=typeof dcl&&(K=dcl.loadModule("@decentraland/UserActionModule",{})),void 0!==K&&"undefined"!=typeof dcl&&K.then((function(T){dcl.callRpc(T.rpcHandle,"requestTeleport",S)}))},T.uuid=y,T.uuidEventSystem=We,Object.defineProperty(T,"__esModule",{value:!0})}(this.self=this.self||{});var __decorate=this&&this.__decorate||function(T,S,x,C){var E,A=arguments.length,R=A<3?S:null===C?C=Object.getOwnPropertyDescriptor(S,x):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(T,S,x,C);else for(var I=T.length-1;I>=0;I--)(E=T[I])&&(R=(A<3?E(R):A>3?E(S,x,R):E(S,x))||R);return A>3&&R&&Object.defineProperty(S,x,R),R},__awaiter=this&&this.__awaiter||function(T,S,x,C){return new(x||(x=Promise))((function(E,A){function fulfilled(T){try{step(C.next(T))}catch(T){A(T)}}function rejected(T){try{step(C.throw(T))}catch(T){A(T)}}function step(T){var S;T.done?E(T.value):(S=T.value,S instanceof x?S:new x((function(T){T(S)}))).then(fulfilled,rejected)}step((C=C.apply(T,S||[])).next())}))},__generator=this&&this.__generator||function(T,S){var x,C,E,A,R={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return A={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A;function verb(A){return function(I){return function(A){if(x)throw new TypeError("Generator is already executing.");for(;R;)try{if(x=1,C&&(E=2&A[0]?C.return:A[0]?C.throw||((E=C.return)&&E.call(C),0):C.next)&&!(E=E.call(C,A[1])).done)return E;switch(C=0,E&&(A=[2&A[0],E.value]),A[0]){case 0:case 1:E=A;break;case 4:return R.label++,{value:A[1],done:!1};case 5:R.label++,C=A[1],A=[0];continue;case 7:A=R.ops.pop(),R.trys.pop();continue;default:if(!((E=(E=R.trys).length>0&&E[E.length-1])||6!==A[0]&&2!==A[0])){R=0;continue}if(3===A[0]&&(!E||A[1]>E[0]&&A[1]<E[3])){R.label=A[1];break}if(6===A[0]&&R.label<E[1]){R.label=E[1],E=A;break}if(E&&R.label<E[2]){R.label=E[2],R.ops.push(A);break}E[2]&&R.ops.pop(),R.trys.pop();continue}A=S.call(T,R)}catch(T){A=[6,T],C=0}finally{x=E=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([A,I])}}},__extends=this&&this.__extends||function(){var extendStatics=function(T,S){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(T[x]=S[x])},extendStatics(T,S)};return function(T,S){if("function"!=typeof S&&null!==S)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function __(){this.constructor=T}extendStatics(T,S),T.prototype=null===S?Object.create(S):(__.prototype=S.prototype,new __)}}(),__values=this&&this.__values||function(T){var S="function"==typeof Symbol&&Symbol.iterator,x=S&&T[S],C=0;if(x)return x.call(T);if(T&&"number"==typeof T.length)return{next:function(){return T&&C>=T.length&&(T=void 0),{value:T&&T[C++],done:!T}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")};define("node_modules/decentraland-ecs-utils/transform/component/itransformcomponent",["require","exports"],(function(T,S){Object.defineProperty(S,"__esModule",{value:!0})})),define("node_modules/decentraland-ecs-utils/transform/math/interpolation",["require","exports"],(function(T,S){var x;Object.defineProperty(S,"__esModule",{value:!0}),S.Interpolate=S.InterpolationType=void 0,function(T){T[T.LINEAR=0]="LINEAR",T[T.EASEINQUAD=1]="EASEINQUAD",T[T.EASEOUTQUAD=2]="EASEOUTQUAD",T[T.EASEQUAD=3]="EASEQUAD"}(x=S.InterpolationType||(S.InterpolationType={})),S.Interpolate=function(T,S){switch(T){case x.LINEAR:return S;case x.EASEINQUAD:return function(T){return T*T}(S);case x.EASEOUTQUAD:return function(T){return T*(2-T)}(S);case x.EASEQUAD:return function(T){return T*T/(2*(T*T-T)+1)}(S);default:return S}}})),define("node_modules/decentraland-ecs-utils/transform/component/rotate",["require","exports","node_modules/decentraland-ecs-utils/transform/system/transfromSystem","node_modules/decentraland-ecs-utils/transform/math/interpolation"],(function(T,S,x,C){Object.defineProperty(S,"__esModule",{value:!0}),S.RotateTransformComponent=void 0;var E=function(){function RotateTransformComponent(T,S,E,A,R){void 0===R&&(R=C.InterpolationType.LINEAR),this.start=T,this.end=S,this.normalizedTime=0,this.lerpTime=0,this.onFinishCallback=A,this.interpolationType=R,0!=E?this.speed=1/E:(this.speed=0,this.normalizedTime=1,this.lerpTime=1),x.TransformSystem.createAndAddToEngine()}return RotateTransformComponent.prototype.update=function(T){this.normalizedTime=Scalar.Clamp(this.normalizedTime+T*this.speed,0,1),this.lerpTime=(0,C.Interpolate)(this.interpolationType,this.normalizedTime)},RotateTransformComponent.prototype.hasFinished=function(){return this.normalizedTime>=1},RotateTransformComponent.prototype.assignValueToTransform=function(T){T.rotation=Quaternion.Slerp(this.start,this.end,this.lerpTime)},__decorate([Component("rotateTransformComponent")],RotateTransformComponent)}();S.RotateTransformComponent=E})),define("node_modules/decentraland-ecs-utils/transform/component/scale",["require","exports","node_modules/decentraland-ecs-utils/transform/system/transfromSystem","node_modules/decentraland-ecs-utils/transform/math/interpolation"],(function(T,S,x,C){Object.defineProperty(S,"__esModule",{value:!0}),S.ScaleTransformComponent=void 0;var E=function(){function ScaleTransformComponent(T,S,E,A,R){void 0===R&&(R=C.InterpolationType.LINEAR),this.start=T,this.end=S,this.normalizedTime=0,this.lerpTime=0,this.onFinishCallback=A,this.interpolationType=R,0!=E?this.speed=1/E:(this.speed=0,this.normalizedTime=1,this.lerpTime=1),x.TransformSystem.createAndAddToEngine()}return ScaleTransformComponent.prototype.update=function(T){this.normalizedTime=Scalar.Clamp(this.normalizedTime+T*this.speed,0,1),this.lerpTime=(0,C.Interpolate)(this.interpolationType,this.normalizedTime)},ScaleTransformComponent.prototype.hasFinished=function(){return this.normalizedTime>=1},ScaleTransformComponent.prototype.assignValueToTransform=function(T){T.scale=Vector3.Lerp(this.start,this.end,this.lerpTime)},__decorate([Component("scaleTransformComponent")],ScaleTransformComponent)}();S.ScaleTransformComponent=E})),define("node_modules/decentraland-ecs-utils/transform/component/followpath",["require","exports","node_modules/decentraland-ecs-utils/transform/system/transfromSystem"],(function(T,S,x){Object.defineProperty(S,"__esModule",{value:!0}),S.FollowCurvedPathComponent=S.FollowPathComponent=void 0;var C=function(){function FollowPathComponent(T,S,C,E){if(this.speed=[],this.normalizedTime=0,this.currentIndex=0,this.points=T,this.onFinishCallback=C,this.onPointReachedCallback=E,T.length<2)throw new Error("At least 2 points are needed for FollowPathComponent.");if(S>0){for(var A=0,R=[],I=0;I<T.length-1;I++){var z=Vector3.Distance(T[I],T[I+1]);A+=z,R.push(z)}for(I=0;I<R.length;I++)this.speed.push(1/(R[I]/A*S))}else this.normalizedTime=1,this.currentIndex=T.length-2;x.TransformSystem.createAndAddToEngine()}return FollowPathComponent.prototype.update=function(T){this.normalizedTime=Scalar.Clamp(this.normalizedTime+T*this.speed[this.currentIndex],0,1),this.normalizedTime>=1&&this.currentIndex<this.points.length-2&&(this.currentIndex++,this.normalizedTime=0,this.onPointReachedCallback&&this.currentIndex<this.points.length-1&&this.onPointReachedCallback(this.points[this.currentIndex],this.points[this.currentIndex+1]))},FollowPathComponent.prototype.hasFinished=function(){return this.currentIndex>=this.points.length-2&&this.normalizedTime>=1},FollowPathComponent.prototype.assignValueToTransform=function(T){T.position=Vector3.Lerp(this.points[this.currentIndex],this.points[this.currentIndex+1],this.normalizedTime)},__decorate([Component("followPathComponent")],FollowPathComponent)}();S.FollowPathComponent=C;var E=function(){function FollowCurvedPathComponent(T,S,C,E,A,R){if(this.speed=[],this.turnToFaceNext=!1,this.facingNext=!1,this.normalizedTime=0,this.currentIndex=0,this.points=Curve3.CreateCatmullRomSpline(T,C,!!A).getPoints(),this.onFinishCallback=R,this.turnToFaceNext=E||!1,this.points.length<2)throw new Error("At least 2 points are needed for FollowPathComponent.");if(S>0){for(var I=0,z=[],P=0;P<this.points.length-1;P++){var O=Vector3.Distance(this.points[P],this.points[P+1]);I+=O,z.push(O)}for(P=0;P<z.length;P++)this.speed.push(1/(z[P]/I*S))}else this.normalizedTime=1,this.currentIndex=T.length-2;x.TransformSystem.createAndAddToEngine()}return FollowCurvedPathComponent.prototype.update=function(T){this.normalizedTime=Scalar.Clamp(this.normalizedTime+T*this.speed[this.currentIndex],0,1),this.normalizedTime>=1&&this.currentIndex<this.points.length-2&&(this.currentIndex++,this.normalizedTime=0,1==this.turnToFaceNext&&(this.facingNext=!1))},FollowCurvedPathComponent.prototype.hasFinished=function(){return this.currentIndex>=this.points.length-2&&this.normalizedTime>=1},FollowCurvedPathComponent.prototype.assignValueToTransform=function(T){T.position=Vector3.Lerp(this.points[this.currentIndex],this.points[this.currentIndex+1],this.normalizedTime),this.facingNext||(this.facingNext=!0,this.currentIndex<this.points.length-1?T.lookAt(this.points[this.currentIndex+1]):T.lookAt(this.points[0]))},__decorate([Component("followCurvedPathComponent")],FollowCurvedPathComponent)}();S.FollowCurvedPathComponent=E})),define("node_modules/decentraland-ecs-utils/transform/component/keeprotating",["require","exports","node_modules/decentraland-ecs-utils/transform/system/transfromSystem"],(function(T,S,x){Object.defineProperty(S,"__esModule",{value:!0}),S.KeepRotatingComponent=void 0;var C=function(){function KeepRotatingComponent(T,S){this.rotationVelocity=T,this.onFinishCallback=S,this.rotation=Quaternion.Identity,this.finished=!1,x.TransformSystem.createAndAddToEngine()}return KeepRotatingComponent.prototype.update=function(T){this.rotation=Quaternion.Slerp(Quaternion.Identity,this.rotationVelocity,T)},KeepRotatingComponent.prototype.hasFinished=function(){return this.finished},KeepRotatingComponent.prototype.assignValueToTransform=function(T){T.rotation=T.rotation.multiply(this.rotation)},KeepRotatingComponent.prototype.stop=function(){this.finished=!0},__decorate([Component("keepRotatingComponent")],KeepRotatingComponent)}();S.KeepRotatingComponent=C})),define("node_modules/decentraland-ecs-utils/transform/system/transfromSystem",["require","exports","node_modules/decentraland-ecs-utils/transform/component/move","node_modules/decentraland-ecs-utils/transform/component/rotate","node_modules/decentraland-ecs-utils/transform/component/scale","node_modules/decentraland-ecs-utils/transform/component/followpath","node_modules/decentraland-ecs-utils/transform/component/keeprotating"],(function(T,S,x,C,E,A,R){Object.defineProperty(S,"__esModule",{value:!0}),S.TransformSystem=void 0;var I=function(){function TransformSystem(){this._components=[],this._componentGroups=[],TransformSystem._instance=this,this._components.push(x.MoveTransformComponent),this._componentGroups.push(engine.getComponentGroup(x.MoveTransformComponent,Transform)),this._components.push(C.RotateTransformComponent),this._componentGroups.push(engine.getComponentGroup(C.RotateTransformComponent,Transform)),this._components.push(E.ScaleTransformComponent),this._componentGroups.push(engine.getComponentGroup(E.ScaleTransformComponent,Transform)),this._components.push(A.FollowPathComponent),this._componentGroups.push(engine.getComponentGroup(A.FollowPathComponent,Transform)),this._components.push(A.FollowCurvedPathComponent),this._componentGroups.push(engine.getComponentGroup(A.FollowCurvedPathComponent,Transform)),this._components.push(R.KeepRotatingComponent),this._componentGroups.push(engine.getComponentGroup(R.KeepRotatingComponent,Transform))}return TransformSystem.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new TransformSystem,engine.addSystem(this._instance)),this._instance},TransformSystem.registerCustomComponent=function(T){this.createAndAddToEngine()._components.push(T)},TransformSystem.prototype.update=function(T){for(var S=0;S<this._components.length;S++)this.updateComponent(T,this._components[S],this._componentGroups[S])},TransformSystem.prototype.updateComponent=function(T,S,x){x.entities.forEach((function(x){var C=x.getComponent(Transform),E=x.getComponent(S);E.update(T),E.assignValueToTransform(C),E.hasFinished()&&(x.removeComponent(E),null!=E.onFinishCallback&&E.onFinishCallback())}))},TransformSystem._instance=null,TransformSystem}();S.TransformSystem=I})),define("node_modules/decentraland-ecs-utils/transform/component/move",["require","exports","node_modules/decentraland-ecs-utils/transform/system/transfromSystem","node_modules/decentraland-ecs-utils/transform/math/interpolation"],(function(T,S,x,C){Object.defineProperty(S,"__esModule",{value:!0}),S.MoveTransformComponent=void 0;var E=function(){function MoveTransformComponent(T,S,E,A,R){void 0===R&&(R=C.InterpolationType.LINEAR),this.start=T,this.end=S,this.normalizedTime=0,this.lerpTime=0,this.onFinishCallback=A,this.interpolationType=R,0!=E?this.speed=1/E:(this.speed=0,this.normalizedTime=1,this.lerpTime=1),x.TransformSystem.createAndAddToEngine()}return MoveTransformComponent.prototype.update=function(T){this.normalizedTime=Scalar.Clamp(this.normalizedTime+T*this.speed,0,1),this.lerpTime=(0,C.Interpolate)(this.interpolationType,this.normalizedTime)},MoveTransformComponent.prototype.hasFinished=function(){return this.normalizedTime>=1},MoveTransformComponent.prototype.assignValueToTransform=function(T){T.position=Vector3.Lerp(this.start,this.end,this.lerpTime)},__decorate([Component("moveTransformComponent")],MoveTransformComponent)}();S.MoveTransformComponent=E})),define("node_modules/decentraland-ecs-utils/toggle/toggleComponent",["require","exports"],(function(T,S){var x;Object.defineProperty(S,"__esModule",{value:!0}),S.ToggleComponent=S.ToggleState=void 0,function(T){T[T.Off=0]="Off",T[T.On=1]="On"}(x=S.ToggleState||(S.ToggleState={}));var C=function(){function ToggleComponent(T,S){void 0===T&&(T=x.On),this.enabled=!0,this.state=x.Off,this.set(T),S&&this.setCallback(S)}return ToggleComponent.prototype.set=function(T){this.state=T,this.onValueChangedCallback&&this.onValueChangedCallback(T)},ToggleComponent.prototype.toggle=function(){this.enabled&&this.set(1-this.state)},ToggleComponent.prototype.isOn=function(){return this.state==x.On},ToggleComponent.prototype.setCallback=function(T){this.onValueChangedCallback=T},__decorate([Component("toggle")],ToggleComponent)}();S.ToggleComponent=C,S.default={ToggleComponent:C,ToggleState:x}})),define("node_modules/decentraland-ecs-utils/timer/component/itimercomponent",["require","exports"],(function(T,S){Object.defineProperty(S,"__esModule",{value:!0})})),define("node_modules/decentraland-ecs-utils/timer/component/interval",["require","exports","node_modules/decentraland-ecs-utils/timer/system/timerSystem"],(function(T,S,x){Object.defineProperty(S,"__esModule",{value:!0}),S.Interval=void 0;var C=function(){function Interval(T,S){var C=this;x.TimerSystem.createAndAddToEngine(),this.elapsedTime=0,this.targetTime=T/1e3,this.onTimeReachedCallback=S,this.onTargetTimeReached=function(){C.elapsedTime=0,C.onTimeReachedCallback&&C.onTimeReachedCallback()}}return Interval.prototype.setCallback=function(T){this.onTimeReachedCallback=T},__decorate([Component("timerInterval")],Interval)}();S.Interval=C})),define("node_modules/decentraland-ecs-utils/timer/component/expire",["require","exports","node_modules/decentraland-ecs-utils/timer/system/timerSystem"],(function(T,S,x){Object.defineProperty(S,"__esModule",{value:!0}),S.ExpireIn=void 0;var C=function(){function ExpireIn(T,S){var C=this;x.TimerSystem.createAndAddToEngine(),this.elapsedTime=0,this.targetTime=T/1e3,this.onTimeReachedCallback=S,this.onTargetTimeReached=function(T){C.onTimeReachedCallback&&C.onTimeReachedCallback(),T.removeComponent(C),engine.removeEntity(T)}}return ExpireIn.prototype.setCallback=function(T){this.onTimeReachedCallback=T},__decorate([Component("timerExpireIn")],ExpireIn)}();S.ExpireIn=C})),define("node_modules/decentraland-ecs-utils/timer/system/timerSystem",["require","exports","node_modules/decentraland-ecs-utils/timer/component/interval","node_modules/decentraland-ecs-utils/timer/component/delay","node_modules/decentraland-ecs-utils/timer/component/expire"],(function(T,S,x,C,E){Object.defineProperty(S,"__esModule",{value:!0}),S.TimerSystem=void 0;var A=function(){function TimerSystem(){this._components=[],TimerSystem._instance=this,this._components.push(x.Interval),this._components.push(C.Delay),this._components.push(E.ExpireIn)}return TimerSystem.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new TimerSystem,engine.addSystem(this._instance)),this._instance},TimerSystem.registerCustomComponent=function(T){this.createAndAddToEngine()._components.push(T)},TimerSystem.prototype.update=function(T){var S=this;this._components.forEach((function(x){S.updateComponent(T,x)}))},TimerSystem.prototype.updateComponent=function(T,S){var x=engine.getEntitiesWithComponent(S);for(var C in x)if(x.hasOwnProperty(C)){var E=x[C],A=E.getComponent(S);A.elapsedTime+=T,A.elapsedTime>=A.targetTime&&A.onTargetTimeReached(E)}},TimerSystem._instance=null,TimerSystem}();S.TimerSystem=A})),define("node_modules/decentraland-ecs-utils/timer/component/delay",["require","exports","node_modules/decentraland-ecs-utils/timer/system/timerSystem"],(function(T,S,x){Object.defineProperty(S,"__esModule",{value:!0}),S.Delay=void 0;var C=function(){function Delay(T,S){var C=this;x.TimerSystem.createAndAddToEngine(),this.elapsedTime=0,this.targetTime=T/1e3,this.onTimeReachedCallback=S,this.onTargetTimeReached=function(T){C.onTimeReachedCallback&&C.onTimeReachedCallback(),T.removeComponent(C)}}return Delay.prototype.setCallback=function(T){this.onTimeReachedCallback=T},__decorate([Component("timerDelay")],Delay)}();S.Delay=C})),define("node_modules/decentraland-ecs-utils/helpers/helperfunctions",["require","exports"],(function(T,S){Object.defineProperty(S,"__esModule",{value:!0}),S.getEntityWorldRotation=S.getEntityWorldPosition=S.clamp=S.map=void 0,S.map=function(T,S,x,C,E){return(T-S)/(x-S)*(E-C)+C},S.clamp=function(T,S,x){var C=T;return T>x?C=x:T<S&&(C=S),C},S.getEntityWorldPosition=function getEntityWorldPosition(T){var S=T.hasComponent(Transform)?T.getComponent(Transform).position.clone():Vector3.Zero(),x=T.getParent();if(null!=x){if("FirstPersonCameraEntityReference"==x.uuid){var C=Camera.instance.rotation.clone();return Camera.instance.position.clone().add(S.rotate(C))}if("AvatarEntityReference"==x.uuid){var E=Camera.instance.rotation;return C=Quaternion.Euler(0,E.eulerAngles.y,0),Camera.instance.position.clone().add(S.rotate(C)).add(new Vector3(0,-.875,0))}return C=x.hasComponent(Transform)?x.getComponent(Transform).rotation:Quaternion.Identity,getEntityWorldPosition(x).add(S.rotate(C))}return S},S.getEntityWorldRotation=function getEntityWorldRotation(T){var S=T.hasComponent(Transform)?T.getComponent(Transform).rotation.clone():Quaternion.Zero(),x=T.getParent();if(null!=x){if("FirstPersonCameraEntityReference"==x.uuid){var C=Camera.instance.rotation.clone();return S.multiply(C)}return"AvatarEntityReference"==x.uuid?(C=Quaternion.Euler(0,Camera.instance.rotation.eulerAngles.y,0),S.multiply(C)):S.multiply(getEntityWorldRotation(x))}return S}})),define("node_modules/decentraland-ecs-utils/helpers/testCube",["require","exports","@decentraland/EnvironmentAPI"],(function(T,S,x){function addLabel(T,S,x,C,E,A){var R=new Entity;R.addComponent(new Transform(A||{position:new Vector3(0,1.5,0)})),R.setParent(S);var I=new TextShape(T);return I.fontSize=E||3,I.color=C||Color3.Black(),R.addComponent(I),x&&R.addComponent(new Billboard),engine.addEntity(R),R}Object.defineProperty(S,"__esModule",{value:!0}),S.addLabel=S.addTestCube=void 0,S.addTestCube=function(T,S,C,E,A,R,I){return __awaiter(this,void 0,void 0,(function(){var z,P,O;return __generator(this,(function(U){switch(U.label){case 0:return(z=!I)?[4,!(0,x.isPreviewMode)()]:[3,2];case 1:z=U.sent(),U.label=2;case 2:return z?[2]:((P=new Entity).addComponent(new Transform(T)),A?(P.addComponent(new SphereShape),P.getComponent(Transform).scale.setAll(.5)):P.addComponent(new BoxShape),engine.addEntity(P),P.addComponent(new OnPointerDown(S,{hoverText:C||"click",button:ActionButton.POINTER})),E&&((O=new Material).albedoColor=E,P.addComponent(O)),R&&(P.getComponent(BoxShape).withCollisions=!1),C&&addLabel(C,P,!0),[2,P])}}))}))},S.addLabel=addLabel})),define("node_modules/decentraland-ecs-utils/helpers/requests",["require","exports"],(function(T,S){Object.defineProperty(S,"__esModule",{value:!0}),S.sendRequest=void 0,S.sendRequest=function(T,S,x,C){return __awaiter(this,void 0,void 0,(function(){var E,A,R;return __generator(this,(function(I){switch(I.label){case 0:return I.trys.push([0,6,,7]),E={method:S||"GET"},x&&(E.headers=x),C&&(E.body=JSON.stringify(C)),[4,fetch(T,E)];case 1:A=I.sent(),I.label=2;case 2:return I.trys.push([2,4,,5]),[4,A.json()];case 3:return[2,I.sent()];case 4:return I.sent(),[2,A];case 5:return[3,7];case 6:return R=I.sent(),log("error fetching from ",T," : ",R),[3,7];case 7:return[2]}}))}))}})),define("node_modules/decentraland-ecs-utils/triggers/triggerSystem",["require","exports","@decentraland/EnvironmentAPI"],(function(T,S,x){Object.defineProperty(S,"__esModule",{value:!0}),S.TriggerSphereShape=S.TriggerBoxShape=S.TriggerComponent=S.TriggerSystem=void 0;var C=function(){function TriggerSystem(){this._triggers={},TriggerSystem._instance=this,this._cameraTriggerWrapper=new A(new TriggerBoxShape(new Vector3(.5,1.8,.5),new Vector3(0,.91,0))),this._componentGroup=engine.getComponentGroup(R)}return Object.defineProperty(TriggerSystem,"instance",{get:function(){return this.createAndAddToEngine()},enumerable:!1,configurable:!0}),TriggerSystem.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new TriggerSystem,engine.addSystem(this._instance)),this._instance},TriggerSystem.prototype.setCameraTriggerShape=function(T){this._cameraTriggerWrapper.setShape(T)},TriggerSystem.prototype.update=function(){var T=this,S=this._componentGroup.entities;for(var x in S.forEach((function(S){T.shouldWrapTriggerEntity(S)&&T.wrapTriggerEntity(S)})),this._triggers)if(this._triggers.hasOwnProperty(x)){var C=this._triggers[x];C.isDebugging()&&C.updateDebugEntity(),C.isInEngine()?null!=C.trigger&&C.trigger.enabled?(C.wasEnabled||C.isDebugging()&&C.addDebugEntity(),C.wasEnabled=!0,(C.trigger.onCameraEnter||C.trigger.onCameraExit)&&this.checkCollisionAgainstCamera(C),(C.trigger.onTriggerEnter||C.trigger.onTriggerExit)&&this.checkCollisionAgainstOtherTriggers(C)):C.wasEnabled&&(C.wasEnabled=!1,C.isDebugging()&&C.removeDebugEntity(),TriggerSystem.removeTriggerFromSystem(C)):(C.isDebugging()&&C.removeDebugEntity(),TriggerSystem.removeTriggerFromSystem(C),delete this._triggers[x])}},TriggerSystem.prototype.shouldWrapTriggerEntity=function(T){return null==this._triggers[T.uuid]||null==this._triggers[T.uuid]},TriggerSystem.prototype.wrapTriggerEntity=function(T){this._triggers[T.uuid]=new E(T)},TriggerSystem.removeTriggerFromSystem=function(T){for(var S,x=T.getActiveCollisions(),C=0;C<x.length;C++)!(x[C]===(null===(S=TriggerSystem._instance)||void 0===S?void 0:S._cameraTriggerWrapper)||null==x[C].trigger)&&x[C].trigger.onTriggerExit&&T.entity&&x[C].trigger.onTriggerExit(T.entity),x[C].disengageActiveCollision(T),T.disengageActiveCollision(x[C])},TriggerSystem.disengageCollision=function(T,S){T.disengageActiveCollision(S),S.disengageActiveCollision(T),T.trigger.onTriggerExit&&S.entity&&T.trigger.onTriggerExit(S.entity),S.trigger.onTriggerExit&&T.entity&&S.trigger.onTriggerExit(T.entity)},TriggerSystem.engageCollision=function(T,S){T.engageCollision(S),S.engageCollision(T),T.trigger.onTriggerEnter&&S.entity&&T.trigger.onTriggerEnter(S.entity),S.trigger.onTriggerEnter&&T.entity&&S.trigger.onTriggerEnter(T.entity)},TriggerSystem.prototype.checkCollisionAgainstCamera=function(T){var S=T.hasActiveCollision(this._cameraTriggerWrapper),x=TriggerSystem.areColliding(T,this._cameraTriggerWrapper);S&&!x?(T.disengageActiveCollision(this._cameraTriggerWrapper),T.trigger.onCameraExit&&T.trigger.onCameraExit()):!S&&x&&(T.engageCollision(this._cameraTriggerWrapper),T.trigger.onCameraEnter&&T.trigger.onCameraEnter())},TriggerSystem.prototype.checkCollisionAgainstOtherTriggers=function(T){for(var S in this._triggers)if(this._triggers.hasOwnProperty(S)&&S!=T.uuid&&this._triggers[S].trigger.enabled&&TriggerSystem.canTriggersCollide(T,this._triggers[S])){var x=T.hasActiveCollision(this._triggers[S]),C=TriggerSystem.areColliding(T,this._triggers[S]);x&&!C?TriggerSystem.disengageCollision(T,this._triggers[S]):!x&&C&&TriggerSystem.engageCollision(T,this._triggers[S])}},TriggerSystem.canTriggersCollide=function(T,S){return 0==T.trigger.triggeredByLayer||0!=(S.trigger.layer&T.trigger.triggeredByLayer)},TriggerSystem.areColliding=function(T,S){return T.getShape()instanceof TriggerBoxShape&&S.getShape()instanceof TriggerBoxShape?TriggerSystem.areCollidingAABB(T.getGlobalPosition(),T.getShape(),S.getGlobalPosition(),S.getShape()):T.getShape()instanceof TriggerSphereShape&&S.getShape()instanceof TriggerSphereShape?TriggerSystem.areCollidingSphere(T.getGlobalPosition(),T.getShape(),S.getGlobalPosition(),S.getShape()):T.getShape()instanceof TriggerBoxShape&&S.getShape()instanceof TriggerSphereShape?TriggerSystem.areCollidingAABBSphere(T.getGlobalPosition(),T.getShape(),S.getGlobalPosition(),S.getShape()):T.getShape()instanceof TriggerSphereShape&&S.getShape()instanceof TriggerBoxShape&&TriggerSystem.areCollidingAABBSphere(S.getGlobalPosition(),S.getShape(),T.getGlobalPosition(),T.getShape())},TriggerSystem.areCollidingAABB=function(T,S,x,C){var E=TriggerSystem.getBoxShapeValues(T,S),A=TriggerSystem.getBoxShapeValues(x,C);return E.min.x<=A.max.x&&E.max.x>=A.min.x&&E.min.y<=A.max.y&&E.max.y>=A.min.y&&E.min.z<=A.max.z&&E.max.z>=A.min.z},TriggerSystem.areCollidingSphere=function(T,S,x,C){return Vector3.DistanceSquared(T.add(S.position),x.add(C.position))<S.radius*S.radius+C.radius*C.radius},TriggerSystem.areCollidingAABBSphere=function(T,S,x,C){var E=TriggerSystem.getBoxShapeValues(T,S),A=x.add(C.position),R=C.radius,I=0;return A.x<E.min.x&&(I+=(E.min.x-A.x)*(E.min.x-A.x)),A.x>E.max.x&&(I+=(A.x-E.max.x)*(A.x-E.max.x)),A.y<E.min.y&&(I+=(E.min.y-A.y)*(E.min.y-A.y)),A.y>E.max.y&&(I+=(A.y-E.max.y)*(A.y-E.max.y)),A.z<E.min.z&&(I+=(E.min.z-A.z)*(E.min.z-A.z)),A.z>E.max.z&&(I+=(A.z-E.max.z)*(A.z-E.max.z)),I<R*R},TriggerSystem.getBoxShapeValues=function(T,S){var x=T.add(S.position);return{center:x,min:x.subtract(S.size.scale(.5)),max:x.add(S.size.scale(.5))}},TriggerSystem._instance=null,TriggerSystem}();S.TriggerSystem=C;var E=function(){function TriggerWrapper(T){this.wasEnabled=!0,this._uuid="",this._collidingWith={},this._isDebug=!1,this._debugEntity=null,this._entity=T,T&&(this._trigger=T.getComponent(R),this._uuid=T.uuid,this._isDebug=this._trigger.debugEnabled,this._isDebug&&this.addDebugEntity())}return Object.defineProperty(TriggerWrapper.prototype,"entity",{get:function(){return this._entity},enumerable:!1,configurable:!0}),Object.defineProperty(TriggerWrapper.prototype,"trigger",{get:function(){return this._trigger},enumerable:!1,configurable:!0}),Object.defineProperty(TriggerWrapper.prototype,"uuid",{get:function(){return this._uuid},enumerable:!1,configurable:!0}),TriggerWrapper.prototype.getGlobalPosition=function(){return this._entity?TriggerWrapper.getEntityWorldPosition(this._entity):Vector3.Zero()},TriggerWrapper.prototype.getShape=function(){return this._trigger.shape},TriggerWrapper.prototype.isInEngine=function(){return null!=this._entity&&this._entity.isAddedToEngine()},TriggerWrapper.prototype.getActiveCollisions=function(){var T=[];for(var S in this._collidingWith)this._collidingWith.hasOwnProperty(S)&&T.push(this._collidingWith[S]);return T},TriggerWrapper.prototype.hasActiveCollision=function(T){return null!=this._collidingWith[T.uuid]&&null!=this._collidingWith[T.uuid]},TriggerWrapper.prototype.disengageActiveCollision=function(T){delete this._collidingWith[T.uuid]},TriggerWrapper.prototype.engageCollision=function(T){this._collidingWith[T.uuid]=T},TriggerWrapper.prototype.isDebugging=function(){return this._isDebug},TriggerWrapper.prototype.addDebugEntity=function(){return __awaiter(this,void 0,void 0,(function(){var T,S,C;return __generator(this,(function(E){switch(E.label){case 0:return[4,!(0,x.isPreviewMode)()];case 1:return E.sent()||(TriggerWrapper._debugMaterial||(TriggerWrapper._debugMaterial=new Material,TriggerWrapper._debugMaterial.alphaTest=.5),null==this._debugEntity&&(this._debugEntity=new Entity,T=new Transform,this._debugEntity.addComponent(T),this._debugEntity.addComponent(TriggerWrapper._debugMaterial),this.getShape()instanceof TriggerBoxShape&&((S=new BoxShape).withCollisions=!1,this._debugEntity.addComponent(S),T.scale=this.getShape().size),this.getShape()instanceof TriggerSphereShape&&((S=new SphereShape).withCollisions=!1,this._debugEntity.addComponent(S),C=this.getShape().radius,T.scale=new Vector3(C,C,C))),engine.addEntity(this._debugEntity)),[2]}}))}))},TriggerWrapper.prototype.removeDebugEntity=function(){null!=this._debugEntity&&engine.removeEntity(this._debugEntity)},TriggerWrapper.prototype.updateDebugEntity=function(){this._debugEntity&&(this._debugEntity.getComponent(Transform).position=this.getGlobalPosition().add(this.getShape().position))},TriggerWrapper.getEntityWorldPosition=function(T){var S=T.hasComponent(Transform)?T.getComponent(Transform).position.clone():Vector3.Zero(),x=T.getParent();if(null!=x){var C=x.hasComponent(Transform)?x.getComponent(Transform).rotation:Quaternion.Identity;return this.getEntityWorldPosition(x).add(S.rotate(C))}return S},TriggerWrapper._debugMaterial=null,TriggerWrapper}(),A=function(T){function CameraTrigger(S){var x=T.call(this)||this;return x._shape=S,x._uuid="cameraTrigger",x}return __extends(CameraTrigger,T),CameraTrigger.prototype.getGlobalPosition=function(){return Camera.instance.position},CameraTrigger.prototype.getShape=function(){return this._shape},CameraTrigger.prototype.setShape=function(T){this._shape=T},CameraTrigger.prototype.isInEngine=function(){return!1},CameraTrigger.prototype.hasActiveCollision=function(T){return!1},CameraTrigger.prototype.disengageActiveCollision=function(T){},CameraTrigger.prototype.engageCollision=function(T){},CameraTrigger.prototype.isDebugging=function(){return!1},CameraTrigger}(E),R=function(){function TriggerComponent(T,S){this.enabled=!0,this.layer=0,this.triggeredByLayer=0,this._debugEnabled=!1,C.createAndAddToEngine(),this.shape=T,S&&(S.layer&&(this.layer=S.layer),S.triggeredByLayer&&(this.triggeredByLayer=S.triggeredByLayer),S.onTriggerEnter&&(this.onTriggerEnter=S.onTriggerEnter),S.onTriggerExit&&(this.onTriggerExit=S.onTriggerExit),S.onCameraEnter&&(this.onCameraEnter=S.onCameraEnter),S.onCameraExit&&(this.onCameraExit=S.onCameraExit),S.enableDebug&&(this._debugEnabled=S.enableDebug))}return Object.defineProperty(TriggerComponent.prototype,"debugEnabled",{get:function(){return this._debugEnabled},enumerable:!1,configurable:!0}),__decorate([Component("triggerComponent")],TriggerComponent)}();S.TriggerComponent=R;var TriggerBoxShape=function(T,S){this.size=T||Vector3.One().scale(2),this.position=S||Vector3.Zero()};S.TriggerBoxShape=TriggerBoxShape;var TriggerSphereShape=function(T,S){this.radius=T||2,this.position=S||Vector3.Zero()};S.TriggerSphereShape=TriggerSphereShape})),define("node_modules/decentraland-ecs-utils/actionsSequenceSystem/actionsSequenceSystem",["require","exports"],(function(T,S){Object.defineProperty(S,"__esModule",{value:!0}),S.ActionsSequenceSystem=void 0;var x=function(){function ActionsSequenceSystem(T){this.beginSequenceNode=null,this.currentSequenceNode=null,this.running=!1,this.started=!1,T&&this.startSequence(T)}return ActionsSequenceSystem.prototype.startSequence=function(T){this.beginSequenceNode=T.beginSequenceNode,this.currentSequenceNode=this.beginSequenceNode,this.running=!0,this.started=!1},ActionsSequenceSystem.prototype.setOnFinishCallback=function(T){this.onFinishCallback=T},ActionsSequenceSystem.prototype.isRunning=function(){return this.running},ActionsSequenceSystem.prototype.stop=function(){this.running=!1},ActionsSequenceSystem.prototype.resume=function(){null!=this.beginSequenceNode&&(this.running=!0)},ActionsSequenceSystem.prototype.reset=function(){this.currentSequenceNode=this.beginSequenceNode,this.running=!0,this.started=!1},ActionsSequenceSystem.prototype.getRunningAction=function(){var T=this.currentSequenceNode;if(this.currentSequenceNode instanceof E)do{T=T.currentInnerSequence}while(T instanceof E);return T.action},ActionsSequenceSystem.prototype.update=function(T){this.running&&(this.started?this.currentSequenceNode.hasFinish()?(this.currentSequenceNode.onFinish(),this.currentSequenceNode=this.currentSequenceNode.next,this.currentSequenceNode?this.currentSequenceNode.onStart():(this.running=!1,this.onFinishCallback&&this.onFinishCallback())):this.currentSequenceNode.update(T):(this.currentSequenceNode.onStart(),this.started=!0))},ActionsSequenceSystem}();S.ActionsSequenceSystem=x,function(T){var S=function(){function SequenceBuilder(){this.currentSequenceNode=null,this.beginSequenceNode=null,this.whileNodeStack=[]}return SequenceBuilder.prototype.then=function(T){if(null==this.currentSequenceNode)this.currentSequenceNode=new C,this.currentSequenceNode.action=T,this.beginSequenceNode=this.currentSequenceNode;else{var S=new C;S.action=T,this.currentSequenceNode=this.currentSequenceNode.then(S)}return this},SequenceBuilder.prototype.if=function(T){var S=new A(T);return null==this.currentSequenceNode?(this.currentSequenceNode=S,this.beginSequenceNode=S):this.currentSequenceNode=this.currentSequenceNode.then(S),this},SequenceBuilder.prototype.else=function(){var T=this.currentSequenceNode.getSequence();if(!(T instanceof A))throw new Error("IF statement is needed to be called before ELSE statement.");T.closed=!0;var S=new R(T);return this.currentSequenceNode=this.currentSequenceNode.then(S),this},SequenceBuilder.prototype.endIf=function(){var T=this.currentSequenceNode.getSequence();if(!(T instanceof A||T instanceof R))throw new Error("IF statement is needed to be called before ENDIF statement.");return T.closed=!0,this},SequenceBuilder.prototype.while=function(T){var S=new I(T);return null==this.currentSequenceNode?(this.currentSequenceNode=S,this.beginSequenceNode=S):this.currentSequenceNode=this.currentSequenceNode.then(S),this.whileNodeStack.push(S),this},SequenceBuilder.prototype.endWhile=function(){var T=this.currentSequenceNode.getSequence();if(!(T instanceof I))throw new Error("WHILE statement is needed to be called before ENDWHILE statement.");return T.closed=!0,this.whileNodeStack.length>0&&this.whileNodeStack.splice(this.whileNodeStack.length-1,1),this},SequenceBuilder.prototype.breakWhile=function(){if(!(this.whileNodeStack.length>0))throw new Error("WHILE statement is needed to be called before BREAKWHILE statement.");return this.currentSequenceNode=this.currentSequenceNode.then(new z(this.whileNodeStack[this.whileNodeStack.length-1])),this},SequenceBuilder}();T.SequenceBuilder=S}(x=S.ActionsSequenceSystem||(S.ActionsSequenceSystem={})),S.ActionsSequenceSystem=x;var C=function(){function SequenceNode(){this.action=null,this.next=null}return SequenceNode.prototype.then=function(T){return this.next=T,T},SequenceNode.prototype.onStart=function(){this.action&&this.action.onStart()},SequenceNode.prototype.update=function(T){this.action&&this.action.update(T)},SequenceNode.prototype.onFinish=function(){this.action&&this.action.onFinish()},SequenceNode.prototype.hasFinish=function(){return!this.action||this.action.hasFinished},SequenceNode.prototype.getSequence=function(){return this},SequenceNode}(),E=function(T){function SubSequenceNode(){var S=null!==T&&T.apply(this,arguments)||this;return S.currentInnerSequence=null,S.startingInnerSequence=null,S.closed=!1,S}return __extends(SubSequenceNode,T),SubSequenceNode.prototype.then=function(T){if(null==this.currentInnerSequence)this.currentInnerSequence=T,this.startingInnerSequence=T;else{if(this.closed)return this.next=T,T;this.currentInnerSequence=this.currentInnerSequence.then(T)}return this},SubSequenceNode.prototype.onStart=function(){this.currentInnerSequence=this.startingInnerSequence,this.currentInnerSequence&&this.currentInnerSequence.onStart()},SubSequenceNode.prototype.update=function(T){this.currentInnerSequence&&(this.currentInnerSequence.hasFinish()?(this.currentInnerSequence.onFinish(),this.currentInnerSequence=this.currentInnerSequence.next,this.currentInnerSequence&&this.currentInnerSequence.onStart()):this.currentInnerSequence.update(T))},SubSequenceNode.prototype.onFinish=function(){this.currentInnerSequence&&this.currentInnerSequence.onFinish()},SubSequenceNode.prototype.hasFinish=function(){return null==this.currentInnerSequence},SubSequenceNode.prototype.getSequence=function(){if(this.currentInnerSequence){var T=this.currentInnerSequence.getSequence();if(T instanceof SubSequenceNode&&!T.closed)return T}return this},SubSequenceNode}(C),A=function(T){function IfSequenceNode(S){var x=T.call(this)||this;return x.result=!1,x.condition=S,x}return __extends(IfSequenceNode,T),IfSequenceNode.prototype.onStart=function(){this.result=this.condition(),this.result?T.prototype.onStart.call(this):this.currentInnerSequence=null},IfSequenceNode}(E),R=function(T){function ElseSequenceNode(S){var x=T.call(this)||this;return x.ifSequence=null,x.ifSequence=S,x}return __extends(ElseSequenceNode,T),ElseSequenceNode.prototype.onStart=function(){this.ifSequence&&!this.ifSequence.result?T.prototype.onStart.call(this):this.currentInnerSequence=null},ElseSequenceNode}(E),I=function(T){function WhileSequenceNode(S){var x=T.call(this)||this;return x.breakWhile=!1,x.condition=S,x}return __extends(WhileSequenceNode,T),WhileSequenceNode.prototype.onStart=function(){this.breakWhile=!1,this.condition()?T.prototype.onStart.call(this):this.currentInnerSequence=null},WhileSequenceNode.prototype.update=function(T){this.currentInnerSequence&&(this.currentInnerSequence.hasFinish()?(this.currentInnerSequence.onFinish(),this.currentInnerSequence=this.currentInnerSequence.next,null==this.currentInnerSequence&&(this.currentInnerSequence=this.startingInnerSequence),this.currentInnerSequence&&this.currentInnerSequence.onStart()):this.currentInnerSequence.update(T))},WhileSequenceNode.prototype.hasFinish=function(){return this.breakWhile||!this.condition()},WhileSequenceNode}(E),z=function(T){function BreakWhileSequenceNode(S){var x=T.call(this)||this;return x.whileNode=S,x}return __extends(BreakWhileSequenceNode,T),BreakWhileSequenceNode.prototype.onStart=function(){this.whileNode.breakWhile=!0},BreakWhileSequenceNode}(C)})),define("node_modules/decentraland-ecs-utils/index",["require","exports","node_modules/decentraland-ecs-utils/transform/component/move","node_modules/decentraland-ecs-utils/transform/component/rotate","node_modules/decentraland-ecs-utils/transform/component/scale","node_modules/decentraland-ecs-utils/transform/component/followpath","node_modules/decentraland-ecs-utils/transform/component/keeprotating","node_modules/decentraland-ecs-utils/transform/system/transfromSystem","node_modules/decentraland-ecs-utils/transform/math/interpolation","node_modules/decentraland-ecs-utils/toggle/toggleComponent","node_modules/decentraland-ecs-utils/timer/component/delay","node_modules/decentraland-ecs-utils/timer/component/expire","node_modules/decentraland-ecs-utils/timer/component/interval","node_modules/decentraland-ecs-utils/helpers/helperfunctions","node_modules/decentraland-ecs-utils/helpers/testCube","node_modules/decentraland-ecs-utils/helpers/requests","node_modules/decentraland-ecs-utils/triggers/triggerSystem","node_modules/decentraland-ecs-utils/actionsSequenceSystem/actionsSequenceSystem"],(function(T,S,x,C,E,A,R,I,z,P,O,U,k,W,H,V,G,j){Object.defineProperty(S,"__esModule",{value:!0}),S.default={TransformSystem:I.TransformSystem,MoveTransformComponent:x.MoveTransformComponent,RotateTransformComponent:C.RotateTransformComponent,ScaleTransformComponent:E.ScaleTransformComponent,FollowPathComponent:A.FollowPathComponent,FollowCurvedPathComponent:A.FollowCurvedPathComponent,KeepRotatingComponent:R.KeepRotatingComponent,Interpolate:z.Interpolate,InterpolationType:z.InterpolationType,ToggleComponent:P.ToggleComponent,ToggleState:P.ToggleState,Delay:O.Delay,ExpireIn:U.ExpireIn,Interval:k.Interval,TriggerComponent:G.TriggerComponent,TriggerSystem:G.TriggerSystem,TriggerSphereShape:G.TriggerSphereShape,TriggerBoxShape:G.TriggerBoxShape,ActionsSequenceSystem:j.ActionsSequenceSystem,map:W.map,clamp:W.clamp,addTestCube:H.addTestCube,addLabel:H.addLabel,sendRequest:V.sendRequest,getEntityWorldPosition:W.getEntityWorldPosition,getEntityWorldRotation:W.getEntityWorldRotation}})),define("src/game",["require","exports"],(function(T,S){Object.defineProperty(S,"__esModule",{value:!0});var x=function(){function RotatorSystem(){this.group=engine.getComponentGroup(Transform),this.spinBool=!0}return RotatorSystem.prototype.update=function(T){var S,x;try{for(var C=__values(this.group.entities),E=C.next();!E.done;E=C.next())E.value.getComponent(Transform)}catch(T){S={error:T}}finally{try{E&&!E.done&&(x=C.return)&&x.call(C)}finally{if(S)throw S.error}}},RotatorSystem}(),C=function(){function ElevatorSystem(){this.elevatorCube=new Entity,this.elevatorStop=!0,this.goUp=!1}return ElevatorSystem.prototype.update=function(T){0==this.elevatorStop?(this.goUp?(log("elevator going up.."),this.elevatorCube.getComponent(Transform).position=new Vector3(this.elevatorCube.getComponent(Transform).position.x,this.elevatorCube.getComponent(Transform).position.y+.02,this.elevatorCube.getComponent(Transform).position.z)):(log("elevator going down.."),this.elevatorCube.getComponent(Transform).position=new Vector3(this.elevatorCube.getComponent(Transform).position.x,this.elevatorCube.getComponent(Transform).position.y-.02,this.elevatorCube.getComponent(Transform).position.z)),log("Elevator is moving")):log("Elevator is stopped")},ElevatorSystem}(),E=new x;engine.addSystem(E);var A=new C;function spawnCube(T,S,x){var C=new Entity;return C.addComponent(new Transform({position:new Vector3(T,S,x)})),C.addComponent(new BoxShape),engine.addEntity(C),C}engine.addSystem(A);var R=new Entity;R.addComponent(new Transform({position:new Vector3(8,0,8)})),engine.addEntity(R);var I=spawnCube(0,.5,0);I.getComponent(Transform).scale=new Vector3(3,.1,3),A.elevatorCube=R;var z=spawnCube(1,.5,3),P=spawnCube(2,.5,3);I.setParent(R),z.setParent(R),P.setParent(R),z.getComponent(Transform).scale=new Vector3(.4,.4,.4),P.getComponent(Transform).scale=new Vector3(.4,.4,.4);var O=new Material;O.albedoColor=Color3.Red(),O.metallic=.9,O.roughness=.1;var U=new Material;U.albedoColor=Color3.Green(),U.metallic=.9,U.roughness=.1,P.addComponent(O),z.addComponent(U),I.addComponent(new OnClick((function(){E.spinBool?E.spinBool=!1:E.spinBool=!0,I.getComponent(Transform).scale.z*=1.1,I.getComponent(Transform).scale.x*=.9,spawnCube(8*Math.random()+1,8*Math.random(),8*Math.random()+1)}))),z.addComponent(new OnClick((function(){A.elevatorStop=!1,A.goUp?A.goUp=!1:A.goUp=!0}))),P.addComponent(new OnClick((function(){A.elevatorStop?A.elevatorStop=!1:A.elevatorStop=!0})))}));